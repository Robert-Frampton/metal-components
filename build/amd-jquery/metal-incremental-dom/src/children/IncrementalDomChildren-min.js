define(["exports","metal/src/metal","../IncrementalDomAop","../utils/IncrementalDomUtils"],function(e,n,t,r){"use strict";function l(e){return e&&e.__esModule?e:{"default":e}}function o(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function a(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function u(e,n){var t=o({parent:d},O.CHILD_OWNER,m);return n?(t.text=e[0],e.length>1&&(t.args=e)):(t.tag=e[0],t.props=b["default"].buildConfigFromCall(e),t.props.children=[],t.config=t.props),i(t),t}function i(e){d.props.children.push(e)}function f(){d===g?(v["default"].stopInterception(),C=!1,s(g),s=null,d=null,m=null,g=null):d=d.parent}function c(e){for(var n=arguments.length,t=Array(n>1?n-1:0),r=1;r<n;r++)t[r-1]=arguments[r];d=u(t)}function p(e){for(var n=arguments.length,t=Array(n>1?n-1:0),r=1;r<n;r++)t[r-1]=arguments[r];u(t,!0)}Object.defineProperty(e,"__esModule",{value:!0});var s,d,m,g,h=l(n),v=l(t),b=l(r),y=function(){function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}}(),O=function(){function e(){a(this,e)}return y(e,null,[{key:"capture",value:function(e,n){m=e,s=n,g={props:{children:[]}},g.config=g.props,d=g,C=!0,v["default"].startInterception({elementClose:f,elementOpen:c,text:p})}},{key:"render",value:function(n,t){if(C)return void i(n);if(!t||!t(n))if(h["default"].isDef(n.text)){var r=n.args?n.args:[];r[0]=n.text,IncrementalDOM.text.apply(null,r)}else{var l=b["default"].buildCallFromConfig(n.tag,n.props);if(IncrementalDOM.elementOpen.apply(null,l),n.props.children)for(var o=0;o<n.props.children.length;o++)e.render(n.props.children[o],t);IncrementalDOM.elementClose(n.tag)}}}]),e}(),C=!1;O.CHILD_OWNER="__metalChildOwner",e["default"]=O});