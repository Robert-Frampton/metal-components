{"version":3,"sources":["Select.js"],"names":["Select","element","items","querySelectorAll","i","length","item","index","option","querySelector","focusedIndex_","focus","components","dropdown","data","openedWithKeyboard_","focusIndex_","closedWithKeyboard_","changes","expanded","expanded_","getDropdown","event","selectItem_","delegateTarget","preventDefault","keyCode","isDefAndNotNull","hasClass","target","itemElement","selectedIndex","findItemIndex_","map","toIncDom","register","STATE","arrowClass","value","buttonClass","validator","isString","isBoolean","internal","hiddenInputName","setter","val","Array","valueFn","label","isNumber","values","ELEMENT_CLASSES"],"mappings":"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","file":"node_modules/metal-select/src/Select.js","sourcesContent":["'use strict';\n\nimport core from 'metal';\nimport dom from 'metal-dom';\nimport Component from 'metal-component';\nimport Soy from 'metal-soy';\n\nimport 'metal-dropdown';\nimport templates from './Select.soy.js';\n\n/**\n * Responsible for rendering and handling a custom select component, based\n * on `Dropdown`.\n */\nclass Select extends Component {\n\t/**\n\t * Finds the index of the given element in the items array.\n\t * @param {!Element} element\n\t * @return {number}\n\t * @protected\n\t */\n\tfindItemIndex_(element) {\n\t\tvar items = this.element.querySelectorAll('li');\n\t\tfor (var i = 0; i < items.length; i++) {\n\t\t\tif (items.item(i) === element) {\n\t\t\t\treturn i;\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Focuses the option at the given index.\n\t * @param {number} index\n\t * @protected\n\t */\n\tfocusIndex_(index) {\n\t\tvar option = this.element.querySelector('.select-option:nth-child(' + (index + 1) + ') a');\n\t\tif (option) {\n\t\t\tthis.focusedIndex_ = index;\n\t\t\toption.focus();\n\t\t}\n\t}\n\n\t/**\n\t * Gets the `Dropdown` instance used by this `Select`.\n\t * @return {!Dropdown}\n\t */\n\tgetDropdown() {\n\t\treturn this.components.dropdown;\n\t}\n\n\t/**\n\t * Handles a `stateSynced` event for the dropdown.\n\t * @param {!Object} data\n\t * @protected\n\t */\n\thandleDropdownStateSynced_(data) {\n\t\tif (this.openedWithKeyboard_) {\n\t\t\t// This is done on `stateSynced` because the items need to have already\n\t\t\t// been made visible before we try focusing them.\n\t\t\tthis.focusIndex_(0);\n\t\t\tthis.openedWithKeyboard_ = false;\n\t\t} else if (this.closedWithKeyboard_) {\n\t\t\tthis.element.querySelector('.dropdown-select').focus();\n\t\t\tthis.closedWithKeyboard_ = false;\n\t\t} else if (data.changes.expanded) {\n\t\t\tthis.focusedIndex_ = null;\n\t\t}\n\n\t\tthis.expanded_ = this.getDropdown().expanded;\n\t}\n\n\t/**\n\t * Handles a `click` event on one of the items. Updates `selectedIndex`\n\t * accordingly.\n\t * @param {!Event} event\n\t * @protected\n\t */\n\thandleItemClick_(event) {\n\t\tthis.selectItem_(event.delegateTarget);\n\t\tevent.preventDefault();\n\t}\n\n\t/**\n\t * Handles a `keydown` event on one of the items. Updates `selectedIndex`\n\t * accordingly.\n\t * @param {!Event} event\n\t * @protected\n\t */\n\thandleItemKeyDown_(event) {\n\t\tif ((event.keyCode === 13 || event.keyCode === 32)) {\n\t\t\tthis.closedWithKeyboard_ = true;\n\t\t\tthis.selectItem_(event.delegateTarget);\n\t\t\tevent.preventDefault();\n\t\t}\n\t}\n\n\t/**\n\t * Handles a `keydown` event on this component. Handles keyboard controls.\n\t * @param {!Event} event\n\t * @protected\n\t */\n\thandleKeyDown_(event) {\n\t\tif (this.expanded_) {\n\t\t\tswitch (event.keyCode) {\n\t\t\t\tcase 27:\n\t\t\t\t\tthis.closedWithKeyboard_ = true;\n\t\t\t\t\tthis.expanded_ = false;\n\t\t\t\t\tbreak;\n\t\t\t\tcase 38:\n\t\t\t\t\tthis.focusedIndex_ = core.isDefAndNotNull(this.focusedIndex_) ? this.focusedIndex_ : 1;\n\t\t\t\t\tthis.focusIndex_(this.focusedIndex_ === 0 ? this.items.length - 1 : this.focusedIndex_ - 1);\n\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\tbreak;\n\t\t\t\tcase 40:\n\t\t\t\t\tthis.focusedIndex_ = core.isDefAndNotNull(this.focusedIndex_) ? this.focusedIndex_ : -1;\n\t\t\t\t\tthis.focusIndex_(this.focusedIndex_ === this.items.length - 1 ? 0 : this.focusedIndex_ + 1);\n\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t} else if ((event.keyCode === 13 || event.keyCode === 32) && dom.hasClass(event.target, 'dropdown-select')) {\n\t\t\tthis.openedWithKeyboard_ = true;\n\t\t\tthis.expanded_ = true;\n\t\t\tevent.preventDefault();\n\t\t\treturn;\n\t\t}\n\t}\n\n\t/**\n\t * Selects the item for the given element, and closes the dropdown.\n\t * @param {!Element} itemElement\n\t * @protected\n\t */\n\tselectItem_(itemElement) {\n\t\tthis.selectedIndex = this.findItemIndex_(itemElement);\n\t\tthis.expanded_ = false;\n\t}\n\n\t/**\n\t * Setter for items attribute.\n\t * @param {!Array<string>} items\n\t * @protected\n\t */\n\tsetItems_(items) {\n\t\treturn items.map((item) => Soy.toIncDom(item));\n\t}\n\n}\nSoy.register(Select, templates);\n\n/**\n * State definition.\n * @type {!Object}\n * @static\n */\nSelect.STATE = {\n\t/**\n\t * The CSS class used by the select menu arrow.\n\t * @type {string}\n\t * @default 'caret'\n\t */\n\tarrowClass: {\n\t\tvalue: 'caret'\n\t},\n\n\t/**\n\t * The CSS class used by the select menu button.\n\t * @type {string}\n\t * @default 'btn btn-default'\n\t */\n\tbuttonClass: {\n\t\tvalidator: core.isString,\n\t\tvalue: 'btn btn-default'\n\t},\n\n\t/**\n\t * Flag indicating if the select dropdown is currently expanded.\n\t * @type {boolean}\n\t */\n\texpanded_: {\n\t\tvalidator: core.isBoolean,\n\t\tvalue: false,\n\t\tinternal: true\n\t},\n\n\t/**\n\t * The name of the hidden input field\n\t * @type {string}\n\t */\n\thiddenInputName: {\n\t\tvalidator: core.isString\n\t},\n\n\t/**\n\t * A list representing the select dropdown items.\n\t * @type {!Array<string>}\n\t * @default []\n\t */\n\titems: {\n\t\tsetter: 'setItems_',\n\t\tvalidator: val => val instanceof Array,\n\t\tvalueFn: function() {\n\t\t\treturn [];\n\t\t}\n\t},\n\n\t/**\n\t * The label that should be used for the select menu when no item is\n\t * selected. If not set, the first item will be selected automatically.\n\t * @type {string}\n\t */\n\tlabel: {\n\t\tvalidator: core.isString\n\t},\n\n\t/**\n\t * The index of the currently selected item, or -1 if none is selected.\n\t * @type {number}\n\t */\n\tselectedIndex: {\n\t\tvalidator: core.isNumber,\n\t\tvalueFn: function() {\n\t\t\treturn this.label || !this.items.length ? -1 : 0;\n\t\t}\n\t},\n\n\t/**\n\t * A list representing the select dropdown values.\n\t * @type {Array<string>=}\n\t */\n\tvalues: {\n\t\tvalidator: val => val instanceof Array\n\t}\n};\n\n/**\n * Default element classes.\n * @type {string}\n * @static\n */\nSelect.ELEMENT_CLASSES = 'select';\n\nexport default Select;\nimport JQueryAdapter from 'metal-jquery-adapter/src/JQueryAdapter';JQueryAdapter.register('select', Select);"],"sourceRoot":"/source/"}