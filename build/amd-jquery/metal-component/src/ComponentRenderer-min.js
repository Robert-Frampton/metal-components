define(["exports","metal-events/src/events"],function(e,t){"use strict";function n(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(e,"__esModule",{value:!0});var i=function(e){function i(n){r(this,i);var a=o(this,e.call(this));return a.component_=n,a.componentRendererEvents_=new t.EventHandler,a.componentRendererEvents_.add(a.component_.once("render",a.render.bind(a))),a.on("rendered",a.handleRendered_),n.on("dataManagerCreated",a.handleDataManagerCreated_.bind(a)),a}return a(i,e),i.prototype.disposeInternal=function(){this.componentRendererEvents_.removeAllListeners(),this.componentRendererEvents_=null},i.prototype.handleDataManagerCreated_=function(){var e=this.component_.getDataManager();this.component_.constructor.SYNC_UPDATES_MERGED?this.componentRendererEvents_.add(e.on("dataPropChanged",this.handleManagerDataPropChanged_.bind(this))):this.componentRendererEvents_.add(e.on("dataChanged",this.handleManagerDataChanged_.bind(this)))},i.prototype.handleManagerDataChanged_=function(e){this.shouldRerender_()&&this.update(e)},i.prototype.handleManagerDataPropChanged_=function(e){this.shouldRerender_()&&this.update({changes:n({},e.key,e)})},i.prototype.handleRendered_=function(){this.isRendered_=!0},i.prototype.render=function(){this.component_.element||(this.component_.element=document.createElement("div")),this.emit("rendered",!this.isRendered_)},i.prototype.shouldRerender_=function(){return this.isRendered_&&!this.skipUpdates_},i.prototype.startSkipUpdates=function(){this.skipUpdates_=!0},i.prototype.stopSkipUpdates=function(){this.skipUpdates_=!1},i.prototype.update=function(){},i}(t.EventEmitter);e["default"]=i});