define(["exports","metal-dom/src/all/dom","metal-events/src/events","metal-position/src/all/position"],function(t,e,o,r){"use strict";function l(t){return t&&t.__esModule?t:{"default":t}}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(t,"__esModule",{value:!0});var c=l(e),a=l(r),u=function(){function t(t,e){for(var o=0;o<e.length;o++){var r=e[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,o,r){return o&&t(e.prototype,o),r&&t(e,r),e}}(),f=function d(t,e,o){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,e);if(void 0===r){var l=Object.getPrototypeOf(t);return null===l?void 0:d(l,e,o)}if("value"in r)return r.value;var n=r.get;if(void 0!==n)return n.call(o)},p=function(t){function e(){n(this,e);var t=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.handler_=new o.EventHandler,t.scrollPositions_=[],t}return s(e,t),u(e,[{key:"disposeInternal",value:function(){f(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"disposeInternal",this).call(this),this.stop(),this.handler_=null}},{key:"handleScroll_",value:function(t,e){var o={scrollLeft:a["default"].getScrollLeft(e.currentTarget),scrollTop:a["default"].getScrollTop(e.currentTarget)},r=this.scrollPositions_[t];this.scrollPositions_[t]=o,this.emit("scrollDelta",{deltaX:o.scrollLeft-r.scrollLeft,deltaY:o.scrollTop-r.scrollTop})}},{key:"start",value:function(t,e){if("fixed"!==getComputedStyle(t).position)for(var o=0;o<e.length;o++)if(c["default"].contains(e[o],t)){this.scrollPositions_.push({scrollLeft:a["default"].getScrollLeft(e[o]),scrollTop:a["default"].getScrollTop(e[o])});var r=this.scrollPositions_.length-1;this.handler_.add(c["default"].on(e[o],"scroll",this.handleScroll_.bind(this,r)))}}},{key:"stop",value:function(){this.handler_.removeAllListeners(),this.scrollPositions_=[]}}]),e}(o.EventEmitter);t["default"]=p});