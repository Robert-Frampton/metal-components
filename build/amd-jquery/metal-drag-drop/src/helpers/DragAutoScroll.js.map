{"version":3,"sources":["DragAutoScroll.js"],"names":["DragAutoScroll","opt_config","scrollTimeout_","disposeInternal","stop","getRegionWithoutScroll_","scrollContainer","isDocument","height","window","innerHeight","width","innerWidth","makeRegion","getRegion","scroll","scrollContainers","mouseX","mouseY","setTimeout","scrollInternal_","bind","delay","scrollElement_","element","deltaX","deltaY","scrollBy","scrollTop","scrollLeft","i","length","scrollRegion","pointInsideRegion","getScrollTop","getScrollLeft","Math","abs","left","maxDistance","speed","right","top","bottom","clearTimeout","STATE","validator","isNumber","value"],"mappings":"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","file":"node_modules/metal-drag-drop/src/helpers/DragAutoScroll.js","sourcesContent":["'use strict';\n\nimport core from 'metal';\nimport State from 'metal-state';\nimport Position from 'metal-position';\n\n/**\n * Helper called by the `Drag` instance that scrolls elements when the\n * mouse is near their boundaries.\n */\nclass DragAutoScroll extends State {\n\t/**\n\t * @inheritDoc\n\t */\n\tconstructor(opt_config) {\n\t\tsuper(opt_config);\n\n\t\t/**\n\t\t * The handler for the current call to `setTimeout`.\n\t\t * @type {?number}\n\t\t * @protected\n\t\t */\n\t\tthis.scrollTimeout_ = null;\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tdisposeInternal() {\n\t\tsuper.disposeInternal();\n\t\tthis.stop();\n\t}\n\n\t/**\n\t * Gets the region for the given scroll container, without including scroll.\n\t * @param {!Element} scrollContainer\n\t * @return {!Object}\n\t * @protected\n\t */\n\tgetRegionWithoutScroll_(scrollContainer) {\n\t\tif (core.isDocument(scrollContainer)) {\n\t\t\tvar height = window.innerHeight;\n\t\t\tvar width = window.innerWidth;\n\t\t\treturn Position.makeRegion(height, height, 0, width, 0, width);\n\t\t} else {\n\t\t\treturn Position.getRegion(scrollContainer);\n\t\t}\n\t}\n\n\t/**\n\t * Schedules a function to scroll the given containers.\n\t * @param {!Array<!Element>} scrollContainers\n\t * @param {number} mouseX\n\t * @param {number} mouseY\n\t */\n\tscroll(scrollContainers, mouseX, mouseY) {\n\t\tthis.stop();\n\t\tthis.scrollTimeout_ = setTimeout(\n\t\t\tthis.scrollInternal_.bind(this, scrollContainers, mouseX, mouseY),\n\t\t\tthis.delay\n\t\t);\n\t}\n\n\t/**\n\t * Adds the given deltas to the given element's scroll position.\n\t * @param {!Element} element\n\t * @param {number} deltaX\n\t * @param {number} deltaY\n\t * @protected\n\t */\n\tscrollElement_(element, deltaX, deltaY) {\n\t\tif (core.isDocument(element)) {\n\t\t\twindow.scrollBy(deltaX, deltaY);\n\t\t} else {\n\t\t\telement.scrollTop += deltaY;\n\t\t\telement.scrollLeft += deltaX;\n\t\t}\n\t}\n\n\t/**\n\t * Scrolls the given containers if the mouse is near their boundaries.\n\t * @param {!Array<!Element>} scrollContainers\n\t * @param {number} mouseX\n\t * @param {number} mouseY\n\t * @protected\n\t */\n\tscrollInternal_(scrollContainers, mouseX, mouseY) {\n\t\tfor (var i = 0; i < scrollContainers.length; i++) {\n\t\t\tvar scrollRegion = this.getRegionWithoutScroll_(scrollContainers[i]);\n\t\t\tif (!Position.pointInsideRegion(mouseX, mouseY, scrollRegion)) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tvar deltaX = 0;\n\t\t\tvar deltaY = 0;\n\t\t\tvar scrollTop = Position.getScrollTop(scrollContainers[i]);\n\t\t\tvar scrollLeft = Position.getScrollLeft(scrollContainers[i]);\n\t\t\tif (scrollLeft > 0 && Math.abs(mouseX - scrollRegion.left) <= this.maxDistance) {\n\t\t\t\tdeltaX -= this.speed;\n\t\t\t} else if (Math.abs(mouseX - scrollRegion.right) <= this.maxDistance) {\n\t\t\t\tdeltaX += this.speed;\n\t\t\t}\n\t\t\tif (scrollTop > 0 && Math.abs(mouseY - scrollRegion.top) <= this.maxDistance) {\n\t\t\t\tdeltaY -= this.speed;\n\t\t\t} else if (Math.abs(mouseY - scrollRegion.bottom) <= this.maxDistance) {\n\t\t\t\tdeltaY += this.speed;\n\t\t\t}\n\n\t\t\tif (deltaX || deltaY) {\n\t\t\t\tthis.scrollElement_(scrollContainers[i], deltaX, deltaY);\n\t\t\t\tthis.scroll(scrollContainers, mouseX, mouseY);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Stops any auto scrolling that was scheduled to happen in the future.\n\t */\n\tstop() {\n\t\tclearTimeout(this.scrollTimeout_);\n\t}\n}\n\n/**\n * State definition.\n * @type {!Object}\n * @static\n */\nDragAutoScroll.STATE = {\n\t/**\n\t * The delay in ms before an element is scrolled automatically.\n\t * @type {number}\n\t * @default 200\n\t */\n\tdelay: {\n\t\tvalidator: core.isNumber,\n\t\tvalue: 50\n\t},\n\n\t/**\n\t * The maximum distance the mouse needs to be from an element before\n\t * it will be scrolled automatically.\n\t * @type {number}\n\t * @default 10\n\t */\n\tmaxDistance: {\n\t\tvalidator: core.isNumber,\n\t\tvalue: 20\n\t},\n\n\t/**\n\t * The number of pixels that will be scrolled each time.\n\t * @type {number}\n\t * @default 10\n\t */\n\tspeed: {\n\t\tvalidator: core.isNumber,\n\t\tvalue: 20\n\t}\n};\n\nexport default DragAutoScroll;\n"],"sourceRoot":"/source/"}