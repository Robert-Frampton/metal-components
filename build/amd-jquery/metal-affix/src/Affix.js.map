{"version":3,"sources":["Affix.js"],"names":["Affix","opt_config","emitter_","proxy_","document","scroll","lastPosition_","scrollHandle_","on","checkPosition","bind","disposeInternal","removeClasses","element","Position","Bottom","Default","Top","dispose","intersectTopRegion","syncPosition","intersectBottomRegion","isDef","offsetBottom","clientHeight","getHeight","scrollElement","scrollElementClientHeight","getClientHeight","getScrollTop","offsetTop","position","addClasses","STATE","setter","toElement","value","validator","isNumber","register"],"mappings":"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","file":"node_modules/metal-affix/src/Affix.js","sourcesContent":["'use strict';\n\nimport core from 'metal';\nimport { dom, DomEventEmitterProxy } from 'metal-dom';\nimport State from 'metal-state';\nimport EventEmitter from 'metal-events';\nimport Position from 'metal-position';\n\n/**\n * Affix utility.\n */\nclass Affix extends State {\n\t/**\n\t * @inheritDoc\n\t */\n\tconstructor(opt_config) {\n\t\tsuper(opt_config);\n\n\t\tif (!Affix.emitter_) {\n\t\t\tAffix.emitter_ = new EventEmitter();\n\t\t\tAffix.proxy_ = new DomEventEmitterProxy(document, Affix.emitter_, null, {\n\t\t\t\tscroll: true\n\t\t\t});\n\t\t}\n\n\t\t/**\n\t\t * Holds the last position.\n\t\t * @type {Position.Bottom|Position.Default|Position.Top}\n\t\t * @private\n\t\t */\n\t\tthis.lastPosition_ = null;\n\n\t\t/**\n\t\t * Holds event handle that listens scroll shared event emitter proxy.\n\t\t * @type {EventHandle}\n\t\t * @protected\n\t\t */\n\t\tthis.scrollHandle_ = Affix.emitter_.on('scroll', this.checkPosition.bind(this));\n\n\t\tthis.on('elementChanged', this.checkPosition);\n\t\tthis.on('offsetTopChanged', this.checkPosition);\n\t\tthis.on('offsetBottomChanged', this.checkPosition);\n\t\tthis.checkPosition();\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tdisposeInternal() {\n\t\tdom.removeClasses(this.element, Affix.Position.Bottom + ' ' + Affix.Position.Default + ' ' + Affix.Position.Top);\n\t\tthis.scrollHandle_.dispose();\n\t\tsuper.disposeInternal();\n\t}\n\n\t/**\n\t * Synchronize bottom, top and element regions and checks if position has\n\t * changed. If position has changed syncs position.\n\t */\n\tcheckPosition() {\n\t\tif (this.intersectTopRegion()) {\n\t\t\tthis.syncPosition(Affix.Position.Top);\n\t\t} else if (this.intersectBottomRegion()) {\n\t\t\tthis.syncPosition(Affix.Position.Bottom);\n\t\t} else {\n\t\t\tthis.syncPosition(Affix.Position.Default);\n\t\t}\n\t}\n\n\t/**\n\t * Whether the element is intersecting with bottom region defined by\n\t * offsetBottom.\n\t * @return {boolean}\n\t */\n\tintersectBottomRegion() {\n\t\tif (!core.isDef(this.offsetBottom)) {\n\t\t\treturn false;\n\t\t}\n\t\tvar clientHeight = Position.getHeight(this.scrollElement);\n\t\tvar scrollElementClientHeight = Position.getClientHeight(this.scrollElement);\n\t\treturn Position.getScrollTop(this.scrollElement) + scrollElementClientHeight >= clientHeight - this.offsetBottom;\n\t}\n\n\t/**\n\t * Whether the element is intersecting with top region defined by\n\t * offsetTop.\n\t * @return {boolean}\n\t */\n\tintersectTopRegion() {\n\t\tif (!core.isDef(this.offsetTop)) {\n\t\t\treturn false;\n\t\t}\n\t\treturn Position.getScrollTop(this.scrollElement) <= this.offsetTop;\n\t}\n\n\t/**\n\t * Synchronizes element css classes to match with the specified position.\n\t * @param {Position.Bottom|Position.Default|Position.Top} position\n\t */\n\tsyncPosition(position) {\n\t\tif (this.lastPosition_ !== position) {\n\t\t\tdom.addClasses(this.element, position);\n\t\t\tdom.removeClasses(this.element, this.lastPosition_);\n\t\t\tthis.lastPosition_ = position;\n\t\t}\n\t}\n}\n\n/**\n * Holds positions enum.\n * @enum {string}\n */\nAffix.Position = {\n\tTop: 'affix-top',\n\tBottom: 'affix-bottom',\n\tDefault: 'affix'\n};\n\nAffix.STATE = {\n\t/**\n\t * The scrollElement element to be used as scrollElement area for affix. The scrollElement is\n\t * where the scroll event is listened from.\n\t * @type {Element|Window}\n\t */\n\tscrollElement: {\n\t\tsetter: dom.toElement,\n\t\tvalue: document\n\t},\n\n\t/**\n\t * Defines the offset bottom that triggers affix.\n\t * @type {number}\n\t */\n\toffsetTop: {\n\t\tvalidator: core.isNumber\n\t},\n\n\t/**\n\t * Defines the offset top that triggers affix.\n\t * @type {number}\n\t */\n\toffsetBottom: {\n\t\tvalidator: core.isNumber\n\t},\n\n\t/**\n\t * Element to be used as alignment reference of affix.\n\t * @type {Element}\n\t */\n\telement: {\n\t\tsetter: dom.toElement\n\t}\n};\n\nexport default Affix;\nimport JQueryAdapter from 'metal-jquery-adapter/src/JQueryAdapter';JQueryAdapter.register('affix', Affix);"],"sourceRoot":"/source/"}