{"version":3,"sources":["Alert.js"],"names":["Alert","created","eventHandler_","detached","removeAllListeners","clearTimeout","delay_","close","once","element","dispose","bind","syncVisible","handleDocClick_","event","contains","target","hide","visible","hideCompletely_","isDisposed","toggle","show","syncDismissible","dismissible","add","on","document","syncHideDelay","hideDelay","isNumber","setTimeout","prevVisible","shouldAsync","isDef","showOrHide","removeClasses","animClasses","addClasses","emulateEnd","register","STATE","validator","isObject","value","body","isBoolean","elementClasses"],"mappings":"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","file":"node_modules/metal-alert/src/Alert.js","sourcesContent":["'use strict';\n\nimport { core } from 'metal';\nimport dom from 'metal-dom';\nimport Anim from 'metal-anim';\nimport Component from 'metal-component';\nimport { EventHandler } from 'metal-events';\nimport Soy from 'metal-soy';\n\nimport templates from './Alert.soy.js';\n\n/**\n * Alert component.\n */\nclass Alert extends Component {\n\tcreated() {\n\t\tthis.eventHandler_ = new EventHandler();\n\t}\n\n\t/**\n\t * @inheritDoc\n\t */\n\tdetached() {\n\t\tsuper.detached();\n\t\tthis.eventHandler_.removeAllListeners();\n\t\tclearTimeout(this.delay_);\n\t}\n\n\t/**\n\t * Closes the alert, disposing it once the animation ends.\n\t */\n\tclose() {\n\t\tdom.once(this.element, 'animationend', this.dispose.bind(this));\n\t\tdom.once(this.element, 'transitionend', this.dispose.bind(this));\n\t\tthis.eventHandler_.removeAllListeners();\n\t\tthis.syncVisible(false);\n\t}\n\n\t/**\n\t * Handles document click in order to close the alert.\n\t * @param {!Event} event\n\t * @protected\n\t */\n\thandleDocClick_(event) {\n\t\tif (!this.element.contains(event.target)) {\n\t\t\tthis.hide();\n\t\t}\n\t}\n\n\t/**\n\t * Hide the alert.\n\t */\n\thide() {\n\t\tthis.visible = false;\n\t}\n\n\t/**\n\t * Hides the alert completely (with display \"none\"). This is called after the\n\t * hiding animation is done.\n\t * @protected\n\t */\n\thideCompletely_() {\n\t\tif (!this.isDisposed() && !this.visible) {\n\t\t\tsuper.syncVisible(false);\n\t\t}\n \t}\n\n\t/**\n\t * Toggles the visibility of the alert.\n\t */\n\ttoggle() {\n\t\tthis.visible = !this.visible;\n\t}\n\n\t/**\n\t * Show the alert.\n\t */\n\tshow() {\n\t\tthis.visible = true;\n\t}\n\n\t/**\n\t * Synchronization logic for `dismissible` state.\n\t * @param {boolean} dismissible\n\t */\n\tsyncDismissible(dismissible) {\n\t\tif (dismissible) {\n\t\t\tthis.eventHandler_.add(dom.on(document, 'click', this.handleDocClick_.bind(this)));\n\t\t} else {\n\t\t\tthis.eventHandler_.removeAllListeners();\n\t\t}\n\t}\n\n\t/**\n\t * Synchronization logic for `hideDelay` state.\n\t * @param {?number} hideDelay\n\t */\n\tsyncHideDelay(hideDelay) {\n\t\tif (core.isNumber(hideDelay) && this.visible) {\n\t\t\tclearTimeout(this.delay_);\n\t\t\tthis.delay_ = setTimeout(this.hide.bind(this), hideDelay);\n\t\t}\n\t}\n\n\t/**\n\t * Synchronization logic for `visible` state.\n\t * @param {boolean} visible\n\t */\n\tsyncVisible(visible, prevVisible) {\n\t\tvar shouldAsync = false;\n\t\tif (!visible) {\n\t\t\tdom.once(this.element, 'animationend', this.hideCompletely_.bind(this));\n\t\t\tdom.once(this.element, 'transitionend', this.hideCompletely_.bind(this));\n\t\t} else if (core.isDef(prevVisible)) {\n\t\t\tshouldAsync = true;\n\t\t\tsuper.syncVisible(true);\n\t\t}\n\n\t\tvar showOrHide = () => {\n\t\t\tif (this.isDisposed()) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tdom.removeClasses(this.element, this.animClasses[visible ? 'hide' : 'show']);\n\t\t\tdom.addClasses(this.element, this.animClasses[visible ? 'show' : 'hide']);\n\n\t\t\t// Some browsers do not fire transitionend events when running in background\n\t\t\t// tab, see https://bugzilla.mozilla.org/show_bug.cgi?id=683696.\n\t\t\tAnim.emulateEnd(this.element);\n\n\t\t\tif (visible && core.isNumber(this.hideDelay)) {\n\t\t\t\tthis.syncHideDelay(this.hideDelay);\n\t\t\t}\n\t\t};\n\n\t\tif (shouldAsync) {\n\t\t\t// We need to start the animation asynchronously because of the possible\n\t\t\t// previous call to `super.syncVisible`, which doesn't allow the show\n\t\t\t// animation to work as expected.\n\t\t\tsetTimeout(showOrHide, 0);\n\t\t} else {\n\t\t\tshowOrHide();\n\t\t}\n\t}\n}\nSoy.register(Alert, templates);\n\n/**\n * Alert state definition.\n * @type {!Object}\n * @static\n */\nAlert.STATE = {\n\t/**\n\t * The CSS classes that should be added to the alert when being shown/hidden.\n\t * @type {!Object}\n\t */\n\tanimClasses: {\n\t\tvalidator: core.isObject,\n\t\tvalue: {\n\t\t\tshow: 'fade in',\n\t\t\thide: 'fade'\n\t\t}\n\t},\n\n\t/**\n\t * The body content of the alert.\n\t * @type {string}\n\t */\n\tbody: {\n\t},\n\n\t/**\n\t * Flag indicating if the alert should be dismissable (closeable).\n\t * @type {boolean}\n\t * @default true\n\t */\n\tdismissible: {\n\t\tvalidator: core.isBoolean,\n\t\tvalue: true\n\t},\n\n\t/**\n\t * The CSS classes that should be added to the alert.\n\t * @type {string}\n\t * @default 'alert-success'\n\t */\n\telementClasses: {\n\t\tvalue: 'alert-success'\n\t},\n\n\t/**\n\t * Delay hiding the alert (ms).\n\t * @type {?number}\n\t */\n\thideDelay: {\n\t},\n\n\t/**\n\t * Flag indicating if the alert is visible or not.\n\t * @type {boolean}\n\t * @default false\n\t */\n\tvisible: {\n\t\tvalue: false\n\t}\n};\n\nexport default Alert;\nimport JQueryAdapter from 'metal-jquery-adapter/src/JQueryAdapter';JQueryAdapter.register('alert', Alert);"],"sourceRoot":"/source/"}