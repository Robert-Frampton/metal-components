(function(){this.metal=this.metal||{},this.metalNamed=this.metalNamed||{};var babelHelpers={};babelHelpers["typeof"]="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},babelHelpers.classCallCheck=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},babelHelpers.createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),babelHelpers.defineProperty=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},babelHelpers.get=function e(t,n,o){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,n,o)}if("value"in i)return i.value;var r=i.get;if(void 0!==r)return r.call(o)},babelHelpers.inherits=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},babelHelpers.possibleConstructorReturn=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},babelHelpers.toConsumableArray=function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)},function(){var e=function(){function e(){babelHelpers.classCallCheck(this,e)}return babelHelpers.createClass(e,null,[{key:"abstractMethod",value:function(){throw Error("Unimplemented abstract method")}},{key:"collectSuperClassesProperty",value:function(e,t){for(var n=[e[t]];e.__proto__&&!e.__proto__.isPrototypeOf(Function);)e=e.__proto__,n.push(e[t]);return n}},{key:"getFunctionName",value:function(e){if(!e.name){var t=e.toString();e.name=t.substring(9,t.indexOf("("))}return e.name}},{key:"getUid",value:function(t,n){if(t){var o=t[e.UID_PROPERTY];return n&&!t.hasOwnProperty(e.UID_PROPERTY)&&(o=null),o||(t[e.UID_PROPERTY]=e.uniqueIdCounter_++)}return e.uniqueIdCounter_++}},{key:"identityFunction",value:function(e){return e}},{key:"isBoolean",value:function(e){return"boolean"==typeof e}},{key:"isDef",value:function(e){return void 0!==e}},{key:"isDefAndNotNull",value:function(t){return e.isDef(t)&&!e.isNull(t)}},{key:"isDocument",value:function(e){return e&&"object"===("undefined"==typeof e?"undefined":babelHelpers["typeof"](e))&&9===e.nodeType}},{key:"isElement",value:function(e){return e&&"object"===("undefined"==typeof e?"undefined":babelHelpers["typeof"](e))&&1===e.nodeType}},{key:"isFunction",value:function(e){return"function"==typeof e}},{key:"isNull",value:function(e){return null===e}},{key:"isNumber",value:function(e){return"number"==typeof e}},{key:"isWindow",value:function(e){return null!==e&&e===e.window}},{key:"isObject",value:function(e){var t="undefined"==typeof e?"undefined":babelHelpers["typeof"](e);return"object"===t&&null!==e||"function"===t}},{key:"isPromise",value:function(e){return e&&"object"===("undefined"==typeof e?"undefined":babelHelpers["typeof"](e))&&"function"==typeof e.then}},{key:"isString",value:function(e){return"string"==typeof e||e instanceof String}},{key:"mergeSuperClassesProperty",value:function(t,n,o){var i=n+"_MERGED";if(t.hasOwnProperty(i))return!1;var a=e.collectSuperClassesProperty(t,n);return o&&(a=o(a)),t[i]=a,!0}},{key:"nullFunction",value:function(){}}]),e}();e.UID_PROPERTY="core_"+(1e9*Math.random()>>>0),e.uniqueIdCounter_=1,this.metal.core=e}.call(this),function(){var e=this.metal.core,t=function(){function t(){babelHelpers.classCallCheck(this,t)}return babelHelpers.createClass(t,null,[{key:"equal",value:function(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}},{key:"firstDefinedValue",value:function(e){for(var t=0;t<e.length;t++)if(void 0!==e[t])return e[t]}},{key:"flatten",value:function(e,n){for(var o=n||[],i=0;i<e.length;i++)Array.isArray(e[i])?t.flatten(e[i],o):o.push(e[i]);return o}},{key:"remove",value:function(e,n){var o,i=e.indexOf(n);return(o=i>=0)&&t.removeAt(e,i),o}},{key:"removeAt",value:function(e,t){return 1===Array.prototype.splice.call(e,t,1).length}},{key:"slice",value:function(t,n,o){for(var i=[],a=e.isDef(o)?o:t.length,r=n;r<a;r++)i.push(t[r]);return i}}]),t}();this.metal.array=t}.call(this),function(){var e={};e.throwException=function(t){e.nextTick(function(){throw t})},e.run=function(t,n){e.run.workQueueScheduled_||(e.nextTick(e.run.processWorkQueue),e.run.workQueueScheduled_=!0),e.run.workQueue_.push(new e.run.WorkItem_(t,n))},e.run.workQueueScheduled_=!1,e.run.workQueue_=[],e.run.processWorkQueue=function(){for(;e.run.workQueue_.length;){var t=e.run.workQueue_;e.run.workQueue_=[];for(var n=0;n<t.length;n++){var o=t[n];try{o.fn.call(o.scope)}catch(i){e.throwException(i)}}}e.run.workQueueScheduled_=!1},e.run.WorkItem_=function(e,t){this.fn=e,this.scope=t},e.nextTick=function(t,n){var o=t;return n&&(o=t.bind(n)),o=e.nextTick.wrapCallback_(o),"function"==typeof setImmediate?void setImmediate(o):(e.nextTick.setImmediate_||(e.nextTick.setImmediate_=e.nextTick.getSetImmediateEmulator_()),void e.nextTick.setImmediate_(o))},e.nextTick.setImmediate_=null,e.nextTick.getSetImmediateEmulator_=function(){var e;if("function"==typeof MessageChannel&&(e=MessageChannel),"undefined"==typeof e&&"undefined"!=typeof window&&window.postMessage&&window.addEventListener&&(e=function(){var e=document.createElement("iframe");e.style.display="none",e.src="",document.documentElement.appendChild(e);var t=e.contentWindow,n=t.document;n.open(),n.write(""),n.close();var o="callImmediate"+Math.random(),i=t.location.protocol+"//"+t.location.host,a=function(e){e.origin!==i&&e.data!==o||this.port1.onmessage()}.bind(this);t.addEventListener("message",a,!1),this.port1={},this.port2={postMessage:function(){t.postMessage(o,i)}}}),"undefined"!=typeof e){var t=new e,n={},o=n;return t.port1.onmessage=function(){n=n.next;var e=n.cb;n.cb=null,e()},function(e){o.next={cb:e},o=o.next,t.port2.postMessage(0)}}return"undefined"!=typeof document&&"onreadystatechange"in document.createElement("script")?function(e){var t=document.createElement("script");t.onreadystatechange=function(){t.onreadystatechange=null,t.parentNode.removeChild(t),t=null,e(),e=null},document.documentElement.appendChild(t)}:function(e){setTimeout(e,0)}},e.nextTick.wrapCallback_=function(e){return e},this.metal.async=e}.call(this),function(){var e=function(){function e(){babelHelpers.classCallCheck(this,e),this.disposed_=!1}return babelHelpers.createClass(e,[{key:"dispose",value:function(){this.disposed_||(this.disposeInternal(),this.disposed_=!0)}},{key:"disposeInternal",value:function(){}},{key:"isDisposed",value:function(){return this.disposed_}}]),e}();this.metal.Disposable=e}.call(this),function(){var e=function(){function e(){babelHelpers.classCallCheck(this,e)}return babelHelpers.createClass(e,null,[{key:"mixin",value:function(e){for(var t,n,o=1;o<arguments.length;o++){n=arguments[o];for(t in n)e[t]=n[t]}return e}},{key:"getObjectByName",value:function(e,t){var n=t||window,o=e.split(".");return o.reduce(function(e,t){return e[t]},n)}},{key:"map",value:function(e,t){for(var n={},o=Object.keys(e),i=0;i<o.length;i++)n[o[i]]=t(o[i],e[o[i]]);return n}},{key:"shallowEqual",value:function(e,t){if(e===t)return!0;var n=Object.keys(e),o=Object.keys(t);if(n.length!==o.length)return!1;for(var i=0;i<n.length;i++)if(e[n[i]]!==t[n[i]])return!1;return!0}}]),e}();this.metal.object=e}.call(this),function(){var e=function(){function e(){babelHelpers.classCallCheck(this,e)}return babelHelpers.createClass(e,null,[{key:"collapseBreakingSpaces",value:function(e){return e.replace(/[\t\r\n ]+/g," ").replace(/^[\t\r\n ]+|[\t\r\n ]+$/g,"")}},{key:"escapeRegex",value:function(e){return String(e).replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08")}},{key:"getRandomString",value:function(){var e=2147483648;return Math.floor(Math.random()*e).toString(36)+Math.abs(Math.floor(Math.random()*e)^Date.now()).toString(36)}},{key:"hashCode",value:function(e){for(var t=0,n=0,o=e.length;n<o;n++)t=31*t+e.charCodeAt(n),t%=4294967296;return t}},{key:"replaceInterval",value:function(e,t,n,o){return e.substring(0,t)+o+e.substring(n)}}]),e}();this.metal.string=e}.call(this),function(){var e=this.metal.core,t=this.metal.array,n=this.metal.async,o=this.metal.Disposable,i=this.metal.object,a=this.metal.string;this.metal.metal=e,this.metalNamed.metal=this.metalNamed.metal||{},this.metalNamed.metal.core=e,this.metalNamed.metal.array=t,this.metalNamed.metal.async=n,this.metalNamed.metal.Disposable=o,this.metalNamed.metal.object=i,this.metalNamed.metal.string=a}.call(this),function(){var e="__metal_data__",t=function(){function t(){babelHelpers.classCallCheck(this,t)}return babelHelpers.createClass(t,null,[{key:"get",value:function(t){return t[e]||(t[e]={delegating:{},listeners:{}}),t[e]}}]),t}();this.metal.domData=t}.call(this),function(){var e=this.metalNamed.metal.Disposable,t=function(e){function t(e,n,o){babelHelpers.classCallCheck(this,t);var i=babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return i.emitter_=e,i.event_=n,i.listener_=o,i}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"disposeInternal",value:function(){this.removeListener(),this.emitter_=null,this.listener_=null}},{key:"removeListener",value:function(){this.emitter_.isDisposed()||this.emitter_.removeListener(this.event_,this.listener_)}}]),t}(e);this.metal.EventHandle=t}.call(this),function(){var e=this.metalNamed.metal.core,t=this.metalNamed.metal.array,n=this.metalNamed.metal.Disposable,o=this.metal.EventHandle,i=function(n){function i(){babelHelpers.classCallCheck(this,i);var e=babelHelpers.possibleConstructorReturn(this,(i.__proto__||Object.getPrototypeOf(i)).call(this));return e.events_=[],e.maxListeners_=10,e.shouldUseFacade_=!1,e}return babelHelpers.inherits(i,n),babelHelpers.createClass(i,[{key:"addListener",value:function(e,t,n){this.validateListener_(t),e=this.normalizeEvents_(e);for(var i=0;i<e.length;i++)this.addSingleListener_(e[i],t,n);return new o(this,e,t)}},{key:"addSingleListener_",value:function(e,t,n,o){this.emit("newListener",e,t),this.events_[e]||(this.events_[e]=[]),this.events_[e].push({"default":n,fn:t,origin:o});var i=this.events_[e];i.length>this.maxListeners_&&!i.warned&&(i.warned=!0)}},{key:"disposeInternal",value:function(){this.events_=[]}},{key:"emit",value:function(e){var n,o=t.slice(arguments,1),i=(this.events_[e]||[]).concat();this.getShouldUseFacade()&&(n={preventDefault:function(){n.preventedDefault=!0},target:this,type:e},o.push(n));for(var a=[],r=0;r<i.length;r++)i[r]["default"]?a.push(i[r]):i[r].fn.apply(this,o);if(!n||!n.preventedDefault)for(var s=0;s<a.length;s++)a[s].fn.apply(this,o);return"*"!==e&&this.emit.apply(this,["*",e].concat(o)),i.length>0}},{key:"getShouldUseFacade",value:function(){return this.shouldUseFacade_}},{key:"listeners",value:function(e){return(this.events_[e]||[]).map(function(e){return e.fn})}},{key:"many",value:function(e,t,n){e=this.normalizeEvents_(e);for(var i=0;i<e.length;i++)this.many_(e[i],t,n);return new o(this,e,n)}},{key:"many_",value:function(e,t,n){function o(){0===--t&&i.removeListener(e,o),n.apply(i,arguments)}var i=this;t<=0||i.addSingleListener_(e,o,!1,n)}},{key:"matchesListener_",value:function(e,t){return e.fn===t||e.origin&&e.origin===t}},{key:"normalizeEvents_",value:function(t){return e.isString(t)?[t]:t}},{key:"off",value:function(e,t){this.validateListener_(t),e=this.normalizeEvents_(e);for(var n=0;n<e.length;n++){var o=this.events_[e[n]]||[];this.removeMatchingListenerObjs_(o,t)}return this}},{key:"on",value:function(){return this.addListener.apply(this,arguments)}},{key:"once",value:function(e,t){return this.many(e,1,t)}},{key:"removeAllListeners",value:function(e){if(e)for(var t=this.normalizeEvents_(e),n=0;n<t.length;n++)this.events_[t[n]]=null;else this.events_={};return this}},{key:"removeMatchingListenerObjs_",value:function(e,t){for(var n=e.length-1;n>=0;n--)this.matchesListener_(e[n],t)&&e.splice(n,1)}},{key:"removeListener",value:function(){return this.off.apply(this,arguments)}},{key:"setMaxListeners",value:function(e){return this.maxListeners_=e,this}},{key:"setShouldUseFacade",value:function(e){return this.shouldUseFacade_=e,this}},{key:"validateListener_",value:function(t){if(!e.isFunction(t))throw new TypeError("Listener must be a function")}}]),i}(n);this.metal.EventEmitter=i}.call(this),function(){var e=this.metalNamed.metal.array,t=this.metalNamed.metal.object,n=this.metalNamed.metal.Disposable,o=function(n){function o(e,n,i,a){babelHelpers.classCallCheck(this,o);var r=babelHelpers.possibleConstructorReturn(this,(o.__proto__||Object.getPrototypeOf(o)).call(this));return r.blacklist_=t.mixin({newListener:!0},i),r.originEmitter_=e,r.pendingEvents_=[],r.proxiedEvents_={},r.targetEmitter_=n,r.whitelist_=a,r.startProxy_(),r}return babelHelpers.inherits(o,n),babelHelpers.createClass(o,[{key:"addListener_",value:function(e,t){return this.originEmitter_.on(e,t)}},{key:"addListenerForEvent_",value:function(e){return this.addListener_(e,this.emitOnTarget_.bind(this,e))}},{key:"disposeInternal",value:function(){this.removeListeners_(),this.proxiedEvents_=null,this.originEmitter_=null,this.targetEmitter_=null}},{key:"emitOnTarget_",value:function(t){var n=[t].concat(e.slice(arguments,1));this.targetEmitter_.emit.apply(this.targetEmitter_,n)}},{key:"proxyEvent",value:function(e){this.shouldProxyEvent_(e)&&this.tryToAddListener_(e)}},{key:"removeListeners_",value:function(){for(var e=Object.keys(this.proxiedEvents_),t=0;t<e.length;t++)this.proxiedEvents_[e[t]].removeListener();this.proxiedEvents_={},this.pendingEvents_=[]}},{key:"setOriginEmitter",value:function(e){var t=this,n=this.originEmitter_?Object.keys(this.proxiedEvents_):this.pendingEvents_;this.removeListeners_(),this.originEmitter_=e,n.forEach(function(e){return t.proxyEvent(e)})}},{key:"shouldProxyEvent_",value:function(e){return!(this.whitelist_&&!this.whitelist_[e])&&(!this.blacklist_[e]&&!this.proxiedEvents_[e])}},{key:"startProxy_",value:function(){this.targetEmitter_.on("newListener",this.proxyEvent.bind(this))}},{key:"tryToAddListener_",value:function(e){this.originEmitter_?this.proxiedEvents_[e]=this.addListenerForEvent_(e):this.pendingEvents_.push(e)}}]),o}(n);this.metal.EventEmitterProxy=o}.call(this),function(){var e=this.metalNamed.metal.Disposable,t=function(e){function t(){babelHelpers.classCallCheck(this,t);var e=babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.eventHandles_=[],e}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"add",value:function(){for(var e=0;e<arguments.length;e++)this.eventHandles_.push(arguments[e])}},{key:"disposeInternal",value:function(){this.eventHandles_=null}},{key:"removeAllListeners",value:function(){for(var e=0;e<this.eventHandles_.length;e++)this.eventHandles_[e].removeListener();this.eventHandles_=[]}}]),t}(e);this.metal.EventHandler=t}.call(this),function(){var e=this.metal.EventEmitter,t=this.metal.EventEmitterProxy,n=this.metal.EventHandle,o=this.metal.EventHandler;this.metal.events=e,this.metalNamed.events=this.metalNamed.events||{},this.metalNamed.events.EventEmitter=e,this.metalNamed.events.EventEmitterProxy=t,this.metalNamed.events.EventHandle=n,this.metalNamed.events.EventHandler=o}.call(this),function(){var e=this.metalNamed.metal.array,t=this.metalNamed.metal.core,n=this.metal.domData,o=this.metalNamed.events.EventHandle,i=function(o){function i(e,t,n,o){babelHelpers.classCallCheck(this,i);var a=babelHelpers.possibleConstructorReturn(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,e,t,n));return a.selector_=o,a}return babelHelpers.inherits(i,o),babelHelpers.createClass(i,[{key:"removeListener",value:function(){var o=n.get(this.emitter_),i=this.selector_,a=t.isString(i)?o.delegating[this.event_].selectors:o.listeners,r=t.isString(i)?i:this.event_;e.remove(a[r]||[],this.listener_),a[r]&&0===a[r].length&&delete a[r]}}]),i}(o);this.metal.DomDelegatedEventHandle=i}.call(this),function(){var e=this.metalNamed.events.EventHandle,t=function(e){function t(e,n,o,i){babelHelpers.classCallCheck(this,t);var a=babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,o));return a.capture_=i,a}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"removeListener",value:function(){this.emitter_.removeEventListener(this.event_,this.listener_,this.capture_)}}]),t}(e);this.metal.DomEventHandle=t}.call(this),function(){var e=this.metalNamed.metal.core,t=this.metalNamed.metal.object,n=this.metal.domData,o=this.metal.DomDelegatedEventHandle,i=this.metal.DomEventHandle,a="__metal_next_target__",r={blur:!0,error:!0,focus:!0,invalid:!0,load:!0,scroll:!0},s=function(){function s(){babelHelpers.classCallCheck(this,s)}return babelHelpers.createClass(s,null,[{key:"addClasses",value:function(t,n){if(e.isObject(t)&&e.isString(n)){t.length||(t=[t]);for(var o=0;o<t.length;o++)"classList"in t[o]?s.addClassesWithNative_(t[o],n):s.addClassesWithoutNative_(t[o],n)}}},{key:"addClassesWithNative_",value:function(e,t){t.split(" ").forEach(function(t){t&&e.classList.add(t)})}},{key:"addClassesWithoutNative_",value:function(e,t){var n=" "+e.className+" ",o="";t=t.split(" ");for(var i=0;i<t.length;i++){var a=t[i];n.indexOf(" "+a+" ")===-1&&(o+=" "+a)}o&&(e.className=e.className+o)}},{key:"addElementListener_",value:function(e,t,o){var i=n.get(e);s.addToArr_(i.listeners,t,o)}},{key:"addSelectorListener_",value:function(e,t,o,i){var a=n.get(e);s.addToArr_(a.delegating[t].selectors,o,i)}},{key:"addToArr_",value:function(e,t,n){e[t]||(e[t]=[]),e[t].push(n)}},{key:"attachDelegateEvent_",value:function(e,t){var o=n.get(e);o.delegating[t]||(o.delegating[t]={handle:s.on(e,t,s.handleDelegateEvent_,!!r[t]),selectors:{}})}},{key:"closest",value:function(e,t){for(;e&&!s.match(e,t);)e=e.parentNode;return e}},{key:"append",value:function(t,n){if(e.isString(n)&&(n=s.buildFragment(n)),n instanceof NodeList)for(var o=Array.prototype.slice.call(n),i=0;i<o.length;i++)t.appendChild(o[i]);else t.appendChild(n);return n}},{key:"buildFragment",value:function(e){var t=document.createElement("div");t.innerHTML="<br>"+e,t.removeChild(t.firstChild);for(var n=document.createDocumentFragment();t.firstChild;)n.appendChild(t.firstChild);return n}},{key:"contains",value:function(t,n){return e.isDocument(t)?t.documentElement.contains(n):t.contains(n)}},{key:"delegate",value:function(t,n,i,a,r){var l=s.customEvents[n];return l&&l.delegate&&(n=l.originalEvent,a=l.handler.bind(l,a)),r&&(a=a.bind(),a.defaultListener_=!0),s.attachDelegateEvent_(t,n),e.isString(i)?s.addSelectorListener_(t,n,i,a):s.addElementListener_(i,n,a),new o(e.isString(i)?t:i,n,a,e.isString(i)?i:null)}},{key:"isAbleToInteractWith_",value:function(e,t){var n=e,o=!0,i="button, input, select, textarea, fieldset";if("click"===t)for(;n;){if(n.disabled&&s.match(n,i)){o=!1;break}n=n.parentNode}return o}},{key:"enterDocument",value:function(e){e&&s.append(document.body,e)}},{key:"exitDocument",value:function(e){e&&e.parentNode&&e.parentNode.removeChild(e)}},{key:"handleDelegateEvent_",value:function(t){s.normalizeDelegateEvent_(t);for(var n=e.isDef(t[a])?t[a]:t.target,o=!0,i=t.currentTarget,r=t.currentTarget.parentNode,l=[];n&&n!==r&&!t.stopped;)t.delegateTarget=n,o&=s.triggerMatchedListeners_(i,n,t,l),n=n.parentNode;for(var u=0;u<l.length&&!t.defaultPrevented;u++)t.delegateTarget=l[u].element,o&=l[u].fn(t);return t.delegateTarget=null,t[a]=r,o}},{key:"hasClass",value:function(e,t){return"classList"in e?s.hasClassWithNative_(e,t):s.hasClassWithoutNative_(e,t)}},{key:"hasClassWithNative_",value:function(e,t){return e.classList.contains(t)}},{key:"hasClassWithoutNative_",value:function(e,t){return(" "+e.className+" ").indexOf(" "+t+" ")>=0}},{key:"isEmpty",value:function(e){return 0===e.childNodes.length}},{key:"match",value:function(e,t){if(!e||1!==e.nodeType)return!1;var n=Element.prototype,o=n.matches||n.webkitMatchesSelector||n.mozMatchesSelector||n.msMatchesSelector||n.oMatchesSelector;return o?o.call(e,t):s.matchFallback_(e,t)}},{key:"matchFallback_",value:function(e,t){for(var n=document.querySelectorAll(t,e.parentNode),o=0;o<n.length;++o)if(n[o]===e)return!0;return!1}},{key:"next",value:function(e,t){do if(e=e.nextSibling,e&&s.match(e,t))return e;while(e);return null}},{key:"normalizeDelegateEvent_",value:function(e){e.stopPropagation=s.stopPropagation_,e.stopImmediatePropagation=s.stopImmediatePropagation_}},{key:"on",value:function(t,n,o,a){if(e.isString(t))return s.delegate(document,n,t,o);var r=s.customEvents[n];return r&&r.event&&(n=r.originalEvent,o=r.handler.bind(r,o)),t.addEventListener(n,o,a),new i(t,n,o,a)}},{key:"once",value:function(e,t,n){var o=this.on(e,t,function(){return o.removeListener(),n.apply(this,arguments)});return o}},{key:"parent",value:function(e,t){return s.closest(e.parentNode,t)}},{key:"registerCustomEvent",value:function(e,t){s.customEvents[e]=t}},{key:"removeChildren",value:function(e){for(var t;t=e.firstChild;)e.removeChild(t)}},{key:"removeClasses",value:function(t,n){if(e.isObject(t)&&e.isString(n)){t.length||(t=[t]);for(var o=0;o<t.length;o++)"classList"in t[o]?s.removeClassesWithNative_(t[o],n):s.removeClassesWithoutNative_(t[o],n)}}},{key:"removeClassesWithNative_",value:function(e,t){t.split(" ").forEach(function(t){t&&e.classList.remove(t)})}},{key:"removeClassesWithoutNative_",value:function(e,t){var n=" "+e.className+" ";t=t.split(" ");for(var o=0;o<t.length;o++)n=n.replace(" "+t[o]+" "," ");e.className=n.trim()}},{key:"replace",value:function(e,t){e&&t&&e!==t&&e.parentNode&&(e.parentNode.insertBefore(t,e),e.parentNode.removeChild(e))}},{key:"stopImmediatePropagation_",value:function(){this.stopped=!0,this.stoppedImmediate=!0,Event.prototype.stopImmediatePropagation.call(this)}},{key:"stopPropagation_",value:function(){this.stopped=!0,Event.prototype.stopPropagation.call(this)}},{key:"supportsEvent",value:function(t,n){return!!s.customEvents[n]||(e.isString(t)&&(l[t]||(l[t]=document.createElement(t)),t=l[t]),"on"+n in t)}},{key:"toElement",value:function(t){return e.isElement(t)||e.isDocument(t)?t:e.isString(t)?"#"===t[0]&&t.indexOf(" ")===-1?document.getElementById(t.substr(1)):document.querySelector(t):null}},{key:"toggleClasses",value:function(t,n){e.isObject(t)&&e.isString(n)&&("classList"in t?s.toggleClassesWithNative_(t,n):s.toggleClassesWithoutNative_(t,n))}},{key:"toggleClassesWithNative_",value:function(e,t){t.split(" ").forEach(function(t){e.classList.toggle(t)})}},{key:"toggleClassesWithoutNative_",value:function(e,t){var n=" "+e.className+" ";t=t.split(" ");for(var o=0;o<t.length;o++){var i=" "+t[o]+" ",a=n.indexOf(i);n=a===-1?n+t[o]+" ":n.substring(0,a)+" "+n.substring(a+i.length)}e.className=n.trim()}},{key:"triggerEvent",value:function(e,n,o){if(s.isAbleToInteractWith_(e,n)){var i=document.createEvent("HTMLEvents");i.initEvent(n,!0,!0),t.mixin(i,o),e.dispatchEvent(i)}}},{key:"triggerListeners_",value:function(e,t,n,o){var i=!0;e=e||[];for(var a=0;a<e.length&&!t.stoppedImmediate;a++)e[a].defaultListener_?o.push({element:n,fn:e[a]}):i&=e[a](t);return i}},{key:"triggerMatchedListeners_",value:function(e,t,o,i){if("click"!==o.type||2!==o.button){for(var a=n.get(t),r=a.listeners[o.type],l=s.triggerListeners_(r,o,t,i),u=n.get(e).delegating[o.type].selectors,c=Object.keys(u),d=0;d<c.length&&!o.stoppedImmediate;d++)s.match(t,c[d])&&(r=u[c[d]],l&=s.triggerListeners_(r,o,t,i));return l}}}]),s}(),l={};s.customEvents={},this.metal.dom=s}.call(this),function(){var e=this.metal.dom,t=this.metalNamed.events.EventEmitterProxy,n=function(t){function n(){return babelHelpers.classCallCheck(this,n),babelHelpers.possibleConstructorReturn(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return babelHelpers.inherits(n,t),babelHelpers.createClass(n,[{key:"addListener_",value:function(t,o){if(this.originEmitter_.addEventListener){if(this.isDelegateEvent_(t)){var i=t.indexOf(":",9),a=t.substring(9,i),r=t.substring(i+1);return e.delegate(this.originEmitter_,a,r,o)}return e.on(this.originEmitter_,t,o)}return babelHelpers.get(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"addListener_",this).call(this,t,o)}},{key:"isDelegateEvent_",value:function(e){return"delegate:"===e.substr(0,9)}},{key:"isSupportedDomEvent_",value:function(t){return!this.originEmitter_||!this.originEmitter_.addEventListener||(this.isDelegateEvent_(t)&&t.indexOf(":",9)!==-1||e.supportsEvent(this.originEmitter_,t))}},{key:"shouldProxyEvent_",value:function(e){return babelHelpers.get(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"shouldProxyEvent_",this).call(this,e)&&this.isSupportedDomEvent_(e)}}]),n}(t);this.metal.DomEventEmitterProxy=n}.call(this),function(){var e=this.metal.dom,t=this.metalNamed.metal.string,n=function(){function n(){babelHelpers.classCallCheck(this,n)}return babelHelpers.createClass(n,null,[{key:"checkAnimationEventName",value:function(){return void 0===n.animationEventName_&&(n.animationEventName_={animation:n.checkAnimationEventName_("animation"),transition:n.checkAnimationEventName_("transition")}),n.animationEventName_}},{key:"checkAnimationEventName_",value:function(e){for(var o=["Webkit","MS","O",""],i=t.replaceInterval(e,0,1,e.substring(0,1).toUpperCase()),a=[i+"End",i+"End",i+"End",e+"end"],r=0;r<o.length;r++)if(void 0!==n.animationElement_.style[o[r]+i])return o[r].toLowerCase()+a[r];return e+"end"}},{key:"checkAttrOrderChange",value:function(){if(void 0===n.attrOrderChange_){var t='<div data-component="" data-ref=""></div>',o=document.createElement("div");e.append(o,t),n.attrOrderChange_=t!==o.innerHTML}return n.attrOrderChange_}}]),n}();n.animationElement_=document.createElement("div"),n.animationEventName_=void 0,n.attrOrderChange_=void 0,this.metal.features=n}.call(this),function(){var e=this.metalNamed.metal.async,t=this.metal.dom,n=function(){function n(){babelHelpers.classCallCheck(this,n)}return babelHelpers.createClass(n,null,[{key:"run",value:function(e,n){var o=document.createElement("script");return o.text=e,n?n(o):document.head.appendChild(o),t.exitDocument(o),o}},{key:"runFile",value:function(e,n,o){var i=document.createElement("script");i.src=e;var a=function(){t.exitDocument(i),n&&n()};return t.once(i,"load",a),t.once(i,"error",a),o?o(i):document.head.appendChild(i),i}},{key:"runScript",value:function(o,i,a){var r=function(){i&&i()};return o.type&&"text/javascript"!==o.type?void e.nextTick(r):(t.exitDocument(o),o.src?n.runFile(o.src,i,a):(e.nextTick(r),n.run(o.text,a)))}},{key:"runScriptsInElement",value:function(t,o,i){var a=t.querySelectorAll("script");a.length?n.runScriptsInOrder(a,0,o,i):o&&e.nextTick(o)}},{key:"runScriptsInOrder",value:function(t,o,i,a){n.runScript(t.item(o),function(){o<t.length-1?n.runScriptsInOrder(t,o+1,i,a):i&&e.nextTick(i)},a)}}]),n}();this.metal.globalEval=n}.call(this),function(){var e=this.metalNamed.metal.async,t=this.metal.dom,n=function(){function n(){babelHelpers.classCallCheck(this,n)}return babelHelpers.createClass(n,null,[{key:"run",value:function(e,t){var n=document.createElement("style");return n.innerHTML=e,t?t(n):document.head.appendChild(n),n}},{key:"runFile",value:function(e,t,o){var i=document.createElement("link");return i.rel="stylesheet",i.href=e,n.runStyle(i,t,o),i}},{key:"runStyle",value:function(n,o,i){var a=function(){o&&o()};return n.rel&&"stylesheet"!==n.rel?void e.nextTick(a):("STYLE"===n.tagName?e.nextTick(a):(t.once(n,"load",a),t.once(n,"error",a)),i?i(n):document.head.appendChild(n),n)}},{key:"runStylesInElement",value:function(t,o,i){var a=t.querySelectorAll("style,link");if(0===a.length&&o)return void e.nextTick(o);for(var r=0,s=function(){o&&++r===a.length&&e.nextTick(o)},l=0;l<a.length;l++)n.runStyle(a[l],s,i)}}]),n}();this.metal.globalEvalStyles=n}.call(this),function(){var e=this.metal.dom,t=this.metal.features,n={mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"};Object.keys(n).forEach(function(t){e.registerCustomEvent(t,{delegate:!0,handler:function(e,n){var o=n.relatedTarget,i=n.delegateTarget;if(!o||o!==i&&!i.contains(o))return n.customType=t,e(n)},originalEvent:n[t]})});var o={animation:"animationend",transition:"transitionend"};Object.keys(o).forEach(function(n){var i=o[n];e.registerCustomEvent(i,{event:!0,delegate:!0,handler:function(e,t){return t.customType=i,e(t)},originalEvent:t.checkAnimationEventName()[n]})})}.call(this),function(){var e=this.metal.dom,t=this.metal.domData,n=this.metal.DomEventEmitterProxy,o=this.metal.DomEventHandle,i=this.metal.features,a=this.metal.globalEval,r=this.metal.globalEvalStyles;this.metal.dom=e,this.metalNamed.dom=this.metalNamed.dom||{},this.metalNamed.dom.dom=e,this.metalNamed.dom.domData=t,this.metalNamed.dom.DomEventEmitterProxy=n,this.metalNamed.dom.DomEventHandle=o,this.metalNamed.dom.features=i,this.metalNamed.dom.globalEval=a,this.metalNamed.dom.globalEvalStyles=r}.call(this),function(){function e(e,t,n){var o=n?a.getFunctionName(n.constructor):null,i=n&&n.getRenderer&&n.getRenderer(),r=i&&i.getParent?n.getRenderer().getParent():null,s=r?a.getFunctionName(r.constructor):null,l=s?"Check render method of '"+s+"'.":"";return new Error("Warning: Invalid state passed to '"+t+"'. "+(e+" Passed to '"+o+"'. "+l))}function t(e){var t="undefined"==typeof e?"undefined":babelHelpers["typeof"](e);return Array.isArray(e)?"array":t}function n(e){return e instanceof Error}function o(e){return function(t,n,o){return!(a.isDef(t)&&!a.isNull(t))||e(t,n,o)}}function i(n){var i=o(function(o,i,a){var r=t(o);return r===n||e("Expected type '"+n+"', but received type '"+r+"'.",i,a)});return function(){return 0===arguments.length?i:i.apply(void 0,arguments)}}var a=this.metalNamed.metal.core,r={any:function(){return function(){return!0}},array:i("array"),bool:i("boolean"),func:i("function"),number:i("number"),object:i("object"),string:i("string"),arrayOf:function(t){return o(function(o,i,a){var s=r.array(o,i,a);if(n(s))return s;for(var l=0;l<o.length;l++)if(n(t(o[l],i,a)))return e("Expected an array of single type",i,a);return!0})},instanceOf:function(t){return o(function(n,o,i){return n instanceof t||e("Expected instance of "+t,o,i)})},objectOf:function(t){return o(function(o,i,a){for(var r in o)if(n(t(o[r])))return e("Expected object of one type",i,a);return!0})},oneOf:function(t){return o(function(o,i,a){var s=r.array(t,i,a);if(n(s))return s;for(var l=0;l<t.length;l++){var u=t[l];if(o===u)return!0}return e("Expected one of given values.",i,a)})},oneOfType:function(t){return o(function(o,i,a){var s=r.array(t,i,a);if(n(s))return s;for(var l=0;l<t.length;l++)if(!n(t[l](o,i,a)))return!0;return e("Expected one of given types.",i,a)})},shapeOf:function(t){return o(function(o,i,s){var l=r.object(t,i,s);if(n(l))return l;for(var u in t){var c=!1,d=t[u];if(d.config&&(c=d.config.required,d=d.config.validator),c&&!a.isDefAndNotNull(o[u])||n(d(o[u])))return e("Expected object with a specific shape",i,s)}return!0})}};this.metal.validators=r}.call(this),function(){function e(e,n){var i=e;return i===o&&(i=Object.create(o),i.config={}),t.mixin(i.config,n),i}var t=this.metalNamed.metal.object,n=this.metal.validators,o={required:function(){var t=arguments.length<=0||void 0===arguments[0]||arguments[0];return e(this,{required:t})},setter:function(t){return e(this,{setter:t})},validator:function(t){return e(this,{validator:t})},value:function(t){return e(this,{
value:t})}},i=Object.keys(n);i.forEach(function(e){return o[e]=function(){return this.validator(n[e])}}),this.metal.Config=o}.call(this),function(){var e=this.metalNamed.metal.array,t=this.metalNamed.metal.async,n=this.metalNamed.metal.core,o=this.metalNamed.metal.object,i=this.metalNamed.events.EventEmitter,a=function(i){function a(e,t,n,o){babelHelpers.classCallCheck(this,a);var i=babelHelpers.possibleConstructorReturn(this,(a.__proto__||Object.getPrototypeOf(a)).call(this));return i.commonOpts_=o,i.context_=n||i,i.keysBlacklist_={},i.obj_=t||i,i.scheduledBatchData_=null,i.stateInfo_={},i.setShouldUseFacade(!0),i.mergeInvalidKeys_(),i.addToStateFromStaticHint_(e),i}return babelHelpers.inherits(a,i),babelHelpers.createClass(a,[{key:"addKeyToState",value:function(e,t,n){this.buildKeyInfo_(e,t,n,arguments.length>2),Object.defineProperty(this.obj_,e,this.buildKeyPropertyDef_(e)),this.validateInitialValue_(e),this.assertGivenIfRequired_(e)}},{key:"addToState",value:function(e,t,o){if(n.isString(e))return this.addKeyToState.apply(this,arguments);for(var i=t||{},a=Object.keys(e),r={},s=0;s<a.length;s++){var l=a[s];this.buildKeyInfo_(l,e[l],i[l],i.hasOwnProperty(l)),r[l]=this.buildKeyPropertyDef_(l,o),this.assertGivenIfRequired_(l)}o!==!1&&Object.defineProperties(o||this.obj_,r);for(var u=0;u<a.length;u++)this.validateInitialValue_(a[u])}},{key:"addToStateFromStaticHint_",value:function(e){var t,n=this.constructor,o=a.mergeStateStatic(n);this.obj_===this&&(t=!!o&&n.prototype),this.addToState(n.STATE_MERGED,e,t)}},{key:"assertGivenIfRequired_",value:function(e){var t=this.stateInfo_[e];if(t.config.required){var o=t.state===a.KeyStates.INITIALIZED?this.get(e):t.initialValue;!n.isDefAndNotNull(o)}}},{key:"assertValidStateKeyName_",value:function(e){if(this.constructor.INVALID_KEYS_MERGED[e]||this.keysBlacklist_[e])throw new Error("It's not allowed to create a state key with the name \""+e+'".')}},{key:"buildKeyInfo_",value:function(e,t,n,i){this.assertValidStateKeyName_(e),t=t&&t.config?t.config:t||{},this.commonOpts_&&(t=o.mixin({},t,this.commonOpts_)),this.stateInfo_[e]={config:t,state:a.KeyStates.UNINITIALIZED},i&&(this.stateInfo_[e].initialValue=n)}},{key:"buildKeyPropertyDef_",value:function(e,t){var n=t===this.constructor.prototype?null:this;return{configurable:!0,enumerable:!0,get:function(){return(n||this).getStateKeyValue_(e)},set:function(t){(n||this).setStateKeyValue_(e,t)}}}},{key:"callFunction_",value:function(e,t){return n.isString(e)?this.context_[e].apply(this.context_,t):n.isFunction(e)?e.apply(this.context_,t):void 0}},{key:"callSetter_",value:function(e,t,n){var o=this.stateInfo_[e],i=o.config;return i.setter&&(t=this.callFunction_(i.setter,[t,n])),t}},{key:"callValidator_",value:function(e,t){var n=this.stateInfo_[e],o=n.config;if(o.validator){var i=this.callFunction_(o.validator,[t,e,this.context_]);return i instanceof Error,i}return!0}},{key:"canSetState",value:function(e){var t=this.stateInfo_[e];return!t.config.writeOnce||!t.written}},{key:"disposeInternal",value:function(){babelHelpers.get(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"disposeInternal",this).call(this),this.stateInfo_=null,this.scheduledBatchData_=null}},{key:"emitBatchEvent_",value:function(){if(!this.isDisposed()){var e=this.scheduledBatchData_;this.scheduledBatchData_=null,this.emit("stateChanged",e)}}},{key:"get",value:function(e){return this.obj_[e]}},{key:"getState",value:function(e){for(var t={},n=e||this.getStateKeys(),o=0;o<n.length;o++)t[n[o]]=this.get(n[o]);return t}},{key:"getStateKeyConfig",value:function(e){return(this.stateInfo_[e]||{}).config}},{key:"getStateKeys",value:function(){return this.stateInfo_?Object.keys(this.stateInfo_):[]}},{key:"getStateKeyValue_",value:function(e){if(!this.warnIfDisposed_(e))return this.initStateKey_(e),this.stateInfo_[e].value}},{key:"hasBeenSet",value:function(e){var t=this.stateInfo_[e];return t.state===a.KeyStates.INITIALIZED||this.hasInitialValue_(e)}},{key:"hasInitialValue_",value:function(e){return this.stateInfo_[e].hasOwnProperty("initialValue")}},{key:"hasStateKey",value:function(e){if(!this.warnIfDisposed_(e))return!!this.stateInfo_[e]}},{key:"informChange_",value:function(e,t){if(this.shouldInformChange_(e,t)){var n={key:e,newVal:this.get(e),prevVal:t};this.emit(e+"Changed",n),this.emit("stateKeyChanged",n),this.scheduleBatchEvent_(n)}}},{key:"initStateKey_",value:function(e){var t=this.stateInfo_[e];t.state===a.KeyStates.UNINITIALIZED&&(t.state=a.KeyStates.INITIALIZING,this.setInitialValue_(e),t.written||this.setDefaultValue(e),t.state=a.KeyStates.INITIALIZED)}},{key:"mergeInvalidKeys_",value:function(){n.mergeSuperClassesProperty(this.constructor,"INVALID_KEYS",function(t){return e.flatten(t).reduce(function(e,t){return t&&(e[t]=!0),e},{})})}},{key:"removeStateKey",value:function(e){this.stateInfo_[e]=null,delete this.obj_[e]}},{key:"scheduleBatchEvent_",value:function(e){this.scheduledBatchData_||(t.nextTick(this.emitBatchEvent_,this),this.scheduledBatchData_={changes:{}});var n=e.key,o=this.scheduledBatchData_.changes;o[n]?o[n].newVal=e.newVal:o[n]=e}},{key:"set",value:function(e,t){this.hasStateKey(e)&&(this.obj_[e]=t)}},{key:"setDefaultValue",value:function(e){var t=this.stateInfo_[e].config;void 0!==t.value?this.set(e,t.value):this.set(e,this.callFunction_(t.valueFn))}},{key:"setInitialValue_",value:function(e){if(this.hasInitialValue_(e)){var t=this.stateInfo_[e];this.set(e,t.initialValue),t.initialValue=void 0}}},{key:"setKeysBlacklist_",value:function(e){this.keysBlacklist_=e}},{key:"setState",value:function(e,t){var n=this;Object.keys(e).forEach(function(t){return n.set(t,e[t])}),t&&this.scheduledBatchData_&&this.once("stateChanged",t)}},{key:"setStateKeyValue_",value:function(e,t){if(!this.warnIfDisposed_(e)&&this.canSetState(e)&&this.validateKeyValue_(e,t)){var n=this.stateInfo_[e];this.hasInitialValue_(e)||n.state!==a.KeyStates.UNINITIALIZED||(n.state=a.KeyStates.INITIALIZED);var o=this.get(e);n.value=this.callSetter_(e,t,o),this.assertGivenIfRequired_(e),n.written=!0,this.informChange_(e,o)}}},{key:"shouldInformChange_",value:function(e,t){var o=this.stateInfo_[e];return o.state===a.KeyStates.INITIALIZED&&(n.isObject(t)||t!==this.get(e))}},{key:"validateInitialValue_",value:function(e){var t=this.stateInfo_[e];this.hasInitialValue_(e)&&!this.callValidator_(e,t.initialValue)&&delete t.initialValue}},{key:"validateKeyValue_",value:function(e,t){var n=this.stateInfo_[e];return n.state===a.KeyStates.INITIALIZING||this.callValidator_(e,t)}},{key:"warnIfDisposed_",value:function(e){var t=this.isDisposed();return t}}],[{key:"mergeState",value:function(e){return o.mixin.apply(null,[{}].concat(e.reverse()))}},{key:"mergeStateStatic",value:function(e){return n.mergeSuperClassesProperty(e,"STATE",a.mergeState)}}]),a}(i);a.INVALID_KEYS=["state","stateKey"],a.KeyStates={UNINITIALIZED:0,INITIALIZING:1,INITIALIZED:2},this.metal.State=a}.call(this),function(){var e=this.metal.validators,t=this.metal.Config,n=this.metal.State;this.metal.state=n,this.metalNamed.state=this.metalNamed.state||{},this.metalNamed.state.validators=e,this.metalNamed.state.Config=t,this.metalNamed.state.State=n}.call(this),function(){var e=function(){function e(){babelHelpers.classCallCheck(this,e)}return babelHelpers.createClass(e,null,[{key:"intersectRect",value:function(e,t,n,o,i,a,r,s){return!(i>n||r<e||a>o||s<t)}}]),e}();this.metal.Geometry=e}.call(this),function(){var e=this.metal.metal,t=this.metal.Geometry,n=function(){function n(){babelHelpers.classCallCheck(this,n)}return babelHelpers.createClass(n,null,[{key:"getClientHeight",value:function(e){return this.getClientSize_(e,"Height")}},{key:"getClientSize_",value:function(t,n){var o=t;return e.isWindow(t)&&(o=t.document.documentElement),e.isDocument(t)&&(o=t.documentElement),o["client"+n]}},{key:"getClientWidth",value:function(e){return this.getClientSize_(e,"Width")}},{key:"getDocumentRegion_",value:function(e){var t=this.getHeight(e),n=this.getWidth(e);return this.makeRegion(t,t,0,n,0,n)}},{key:"getHeight",value:function(e){return this.getSize_(e,"Height")}},{key:"getOffsetLeft",value:function(e,t){return e.offsetLeft+(t?0:n.getTranslation(e).left)}},{key:"getOffsetTop",value:function(e,t){return e.offsetTop+(t?0:n.getTranslation(e).top)}},{key:"getRegion",value:function(t,n){return e.isDocument(t)||e.isWindow(t)?this.getDocumentRegion_(t):this.makeRegionFromBoundingRect_(t.getBoundingClientRect(),n)}},{key:"getScrollLeft",value:function(t){return e.isWindow(t)?t.pageXOffset:e.isDocument(t)?t.defaultView.pageXOffset:t.scrollLeft}},{key:"getScrollTop",value:function(t){return e.isWindow(t)?t.pageYOffset:e.isDocument(t)?t.defaultView.pageYOffset:t.scrollTop}},{key:"getSize_",value:function(t,n){if(e.isWindow(t))return this.getClientSize_(t,n);if(e.isDocument(t)){var o=t.documentElement;return Math.max(t.body["scroll"+n],o["scroll"+n],t.body["offset"+n],o["offset"+n],o["client"+n])}return Math.max(t["client"+n],t["scroll"+n],t["offset"+n])}},{key:"getTransformMatrixValues",value:function(e){var t=getComputedStyle(e),n=t.msTransform||t.transform||t.webkitTransform||t.mozTransform;if("none"!==n){for(var o=[],i=/([\d-\.\s]+)/g,a=i.exec(n);a;)o.push(a[1]),a=i.exec(n);return o}}},{key:"getTranslation",value:function(e){var t=n.getTransformMatrixValues(e),o={left:0,top:0};return t&&(o.left=parseFloat(6===t.length?t[4]:t[13]),o.top=parseFloat(6===t.length?t[5]:t[14])),o}},{key:"getWidth",value:function(e){return this.getSize_(e,"Width")}},{key:"intersectRegion",value:function(e,n){return t.intersectRect(e.top,e.left,e.bottom,e.right,n.top,n.left,n.bottom,n.right)}},{key:"insideRegion",value:function(e,t){return t.top>=e.top&&t.bottom<=e.bottom&&t.right<=e.right&&t.left>=e.left}},{key:"insideViewport",value:function(e){return this.insideRegion(this.getRegion(window),e)}},{key:"intersection",value:function(e,t){if(!this.intersectRegion(e,t))return null;var n=Math.min(e.bottom,t.bottom),o=Math.min(e.right,t.right),i=Math.max(e.left,t.left),a=Math.max(e.top,t.top);return this.makeRegion(n,n-a,i,o,a,o-i)}},{key:"makeRegion",value:function(e,t,n,o,i,a){return{bottom:e,height:t,left:n,right:o,top:i,width:a}}},{key:"makeRegionFromBoundingRect_",value:function(e,t){var o=t?n.getScrollLeft(document):0,i=t?n.getScrollTop(document):0;return this.makeRegion(e.bottom+i,e.height,e.left+o,e.right+o,e.top+i,e.width)}},{key:"pointInsideRegion",value:function(e,t,o){return n.insideRegion(o,n.makeRegion(t,0,e,e,t,0))}}]),n}();this.metal.Position=n}.call(this),function(){var e=this.metal.Position,t=function(){function t(){babelHelpers.classCallCheck(this,t)}return babelHelpers.createClass(t,null,[{key:"align",value:function(t,n,o){var i=this.suggestAlignBestRegion(t,n,o),a=i.region,r=window.getComputedStyle(t,null);if("fixed"!==r.getPropertyValue("position")){a.top+=window.pageYOffset,a.left+=window.pageXOffset;for(var s=t;s=s.offsetParent;)a.top-=e.getOffsetTop(s),a.left-=e.getOffsetLeft(s)}return t.style.top=a.top+"px",t.style.left=a.left+"px",i.position}},{key:"getAlignBestRegion",value:function(e,n,o){return t.suggestAlignBestRegion(e,n,o).region}},{key:"getAlignRegion",value:function(n,o,i){var a=e.getRegion(o),r=e.getRegion(n),s=0,l=0;switch(i){case t.TopCenter:s=a.top-r.height,l=a.left+a.width/2-r.width/2;break;case t.RightCenter:s=a.top+a.height/2-r.height/2,l=a.left+a.width;break;case t.BottomCenter:s=a.bottom,l=a.left+a.width/2-r.width/2;break;case t.LeftCenter:s=a.top+a.height/2-r.height/2,l=a.left-r.width;break;case t.TopRight:s=a.top-r.height,l=a.right-r.width;break;case t.BottomRight:s=a.bottom,l=a.right-r.width;break;case t.BottomLeft:s=a.bottom,l=a.left;break;case t.TopLeft:s=a.top-r.height,l=a.left}return{bottom:s+r.height,height:r.height,left:l,right:l+r.width,top:s,width:r.width}}},{key:"isValidPosition",value:function(e){return 0<=e&&e<=8}},{key:"suggestAlignBestRegion",value:function(t,n,o){for(var i=0,a=o,r=this.getAlignRegion(t,n,a),s=a,l=r,u=e.getRegion(window),c=0;c<8;){if(e.intersectRegion(u,l)){var d=e.intersection(u,l),h=d.width*d.height;if(h>i&&(i=h,r=l,a=s),e.insideViewport(l))break}s=(o+ ++c)%8,l=this.getAlignRegion(t,n,s)}return{position:a,region:r}}}]),t}();t.TopCenter=0,t.TopRight=1,t.RightCenter=2,t.BottomRight=3,t.BottomCenter=4,t.BottomLeft=5,t.LeftCenter=6,t.TopLeft=7,t.Top=t.TopCenter,t.Right=t.RightCenter,t.Bottom=t.BottomCenter,t.Left=t.LeftCenter,this.metal.Align=t}.call(this),function(){var e=this.metal.Align,t=this.metal.Geometry,n=this.metal.Position;this.metal.position=n,this.metalNamed.position=this.metalNamed.position||{},this.metalNamed.position.Align=e,this.metalNamed.position.Geometry=t,this.metalNamed.position.Position=n}.call(this),function(){var e=this.metal.metal,t=this.metalNamed.dom.dom,n=this.metalNamed.dom.DomEventEmitterProxy,o=this.metal.state,i=this.metal.events,a=this.metal.position,r=function(o){function r(e){babelHelpers.classCallCheck(this,r);var t=babelHelpers.possibleConstructorReturn(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e));return r.emitter_||(r.emitter_=new i,r.proxy_=new n(document,r.emitter_,null,{scroll:!0})),t.lastPosition_=null,t.scrollHandle_=r.emitter_.on("scroll",t.checkPosition.bind(t)),t.on("elementChanged",t.checkPosition),t.on("offsetTopChanged",t.checkPosition),t.on("offsetBottomChanged",t.checkPosition),t.checkPosition(),t}return babelHelpers.inherits(r,o),babelHelpers.createClass(r,[{key:"disposeInternal",value:function(){t.removeClasses(this.element,r.Position.Bottom+" "+r.Position.Default+" "+r.Position.Top),this.scrollHandle_.dispose(),babelHelpers.get(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"disposeInternal",this).call(this)}},{key:"checkPosition",value:function(){this.intersectTopRegion()?this.syncPosition(r.Position.Top):this.intersectBottomRegion()?this.syncPosition(r.Position.Bottom):this.syncPosition(r.Position.Default)}},{key:"intersectBottomRegion",value:function(){if(!e.isDef(this.offsetBottom))return!1;var t=a.getHeight(this.scrollElement),n=a.getClientHeight(this.scrollElement);return a.getScrollTop(this.scrollElement)+n>=t-this.offsetBottom}},{key:"intersectTopRegion",value:function(){return!!e.isDef(this.offsetTop)&&a.getScrollTop(this.scrollElement)<=this.offsetTop}},{key:"syncPosition",value:function(e){this.lastPosition_!==e&&(t.addClasses(this.element,e),t.removeClasses(this.element,this.lastPosition_),this.lastPosition_=e)}}]),r}(o);r.Position={Top:"affix-top",Bottom:"affix-bottom",Default:"affix"},r.STATE={scrollElement:{setter:t.toElement,value:document},offsetTop:{validator:e.isNumber},offsetBottom:{validator:e.isNumber},element:{setter:t.toElement}},this.metal.Affix=r}.call(this),function(){var e=this.metal.metal,t=this.metalNamed.dom.dom,n=this.metalNamed.dom.features,o=function(){function o(){babelHelpers.classCallCheck(this,o)}return babelHelpers.createClass(o,null,[{key:"emulateEnd",value:function(e,t){return this.getComputedDurationMs(e,"animation")>this.getComputedDurationMs(e,"transition")?this.emulateEnd_(e,"animation",t):this.emulateEnd_(e,"transition",t)}},{key:"emulateAnimationEnd",value:function(e,t){return this.emulateEnd_(e,"animation",t)}},{key:"emulateTransitionEnd",value:function(e,t){this.emulateEnd_(e,"transition",t)}},{key:"emulateEnd_",value:function(o,i,a){var r=a;e.isDef(a)||(r=this.getComputedDurationMs(o,i));var s=setTimeout(function(){t.triggerEvent(o,n.checkAnimationEventName()[i])},r),l=function(){clearTimeout(s),u.removeListener()},u=t.once(o,i+"end",l);return{abort:l}}},{key:"getComputedDurationMs",value:function(e,t){return 1e3*(parseFloat(window.getComputedStyle(e,null).getPropertyValue(t+"-duration"))||0)}}]),o}();this.metal.Anim=o}.call(this),function(){var e=this.metalNamed.metal.array,t=this.metalNamed.metal.core,n=this.metalNamed.metal.object,o=this.metalNamed.events.EventEmitter,i=this.metalNamed.events.EventEmitterProxy,a=this.metal.state,r=function(o){function r(n,o){babelHelpers.classCallCheck(this,r);var i=babelHelpers.possibleConstructorReturn(this,(r.__proto__||Object.getPrototypeOf(r)).call(this));return i.component_=n,t.mergeSuperClassesProperty(i.constructor,"BLACKLIST",e.firstDefinedValue),a.mergeStateStatic(i.component_.constructor),i.createState_(o,i.component_),i}return babelHelpers.inherits(r,o),babelHelpers.createClass(r,[{key:"add",value:function(){var e;(e=this.state_).addToState.apply(e,arguments)}},{key:"buildStateInstanceData_",value:function(e){return n.mixin({},e,this.component_.constructor.STATE_MERGED)}},{key:"createState_",value:function(e,t){var n=new a({},t,this.component_);n.setKeysBlacklist_(this.constructor.BLACKLIST_MERGED),n.addToState(this.buildStateInstanceData_(e),this.component_.getInitialConfig());var o=this.emit_.bind(this);n.on("stateChanged",o),n.on("stateKeyChanged",o),this.state_=n,this.proxy_=new i(n,this.component_)}},{key:"disposeInternal",value:function(){babelHelpers.get(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"disposeInternal",this).call(this),this.state_.dispose(),this.state_=null,this.proxy_.dispose(),this.proxy_=null}},{key:"emit_",value:function(e,t){var n=t.type,o="stateChanged"===n?"dataChanged":"dataPropChanged";this.emit(o,e)}},{key:"get",value:function(e){return this.state_.get(e)}},{key:"getSyncKeys",value:function(){return this.state_.getStateKeys()}},{key:"getStateKeys",value:function(){return this.state_.getStateKeys()}},{key:"getState",value:function(){return this.state_.getState()}},{key:"getStateInstance",value:function(){return this.state_}},{key:"replaceNonInternal",value:function(e){r.replaceNonInternal(e,this.state_)}},{key:"setState",value:function(e,t){this.state_.setState(e,t)}}],[{key:"replaceNonInternal",value:function(e,t){for(var n=t.getStateKeys(),o=0;o<n.length;o++){var i=n[o];t.getStateKeyConfig(i).internal||(e.hasOwnProperty(i)?t.set(i,e[i]):t.setDefaultValue(i))}}}]),r}(o);r.BLACKLIST={components:!0,context:!0,element:!0,refs:!0,wasRendered:!0},this.metal.ComponentDataManager=r}.call(this),function(){var e=this.metalNamed.events.EventEmitter,t=this.metalNamed.events.EventHandler,n=function(e){function n(e){babelHelpers.classCallCheck(this,n);var o=babelHelpers.possibleConstructorReturn(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return o.component_=e,o.componentRendererEvents_=new t,o.componentRendererEvents_.add(o.component_.once("render",o.render.bind(o))),o.on("rendered",o.handleRendered_),e.on("dataManagerCreated",o.handleDataManagerCreated_.bind(o)),o}return babelHelpers.inherits(n,e),babelHelpers.createClass(n,[{key:"disposeInternal",value:function(){this.componentRendererEvents_.removeAllListeners(),this.componentRendererEvents_=null}},{key:"handleDataManagerCreated_",value:function(){var e=this.component_.getDataManager();this.component_.constructor.SYNC_UPDATES_MERGED?this.componentRendererEvents_.add(e.on("dataPropChanged",this.handleManagerDataPropChanged_.bind(this))):this.componentRendererEvents_.add(e.on("dataChanged",this.handleManagerDataChanged_.bind(this)))}},{key:"handleManagerDataChanged_",value:function(e){this.shouldRerender_()&&this.update(e)}},{key:"handleManagerDataPropChanged_",value:function(e){this.shouldRerender_()&&this.update({changes:babelHelpers.defineProperty({},e.key,e)})}},{key:"handleRendered_",value:function(){this.isRendered_=!0}},{key:"render",value:function(){this.component_.element||(this.component_.element=document.createElement("div")),this.emit("rendered",!this.isRendered_)}},{key:"shouldRerender_",value:function(){return this.isRendered_&&!this.skipUpdates_}},{key:"startSkipUpdates",value:function(){this.skipUpdates_=!0}},{key:"stopSkipUpdates",value:function(){this.skipUpdates_=!1}},{key:"update",value:function(){}}]),n}(e);this.metal.ComponentRenderer=n}.call(this),function(){var e=this.metalNamed.metal.array,t=this.metalNamed.metal.core,n=this.metalNamed.metal.object,o=this.metalNamed.dom.dom,i=this.metalNamed.dom.DomEventEmitterProxy,a=this.metal.ComponentDataManager,r=this.metal.ComponentRenderer,s=this.metalNamed.events.EventEmitter,l=this.metalNamed.events.EventHandler,u=function(a){function r(n,o){babelHelpers.classCallCheck(this,r);var i=babelHelpers.possibleConstructorReturn(this,(r.__proto__||Object.getPrototypeOf(r)).call(this));return i.attachedListeners_={},i.components={},i.elementEventProxy_=null,i.eventsStateKeyHandler_=new l,i.inDocument=!1,i.initialConfig_=n||{},i.wasRendered=!1,i.DEFAULT_ELEMENT_PARENT=document.body,t.mergeSuperClassesProperty(i.constructor,"ELEMENT_CLASSES",i.mergeElementClasses_),t.mergeSuperClassesProperty(i.constructor,"SYNC_UPDATES",e.firstDefinedValue),i.element=i.initialConfig_.element,i.renderer_=i.createRenderer(),i.renderer_.on("rendered",i.handleRendererRendered_.bind(i)),i.dataManager_=i.createDataManager(),i.emit("dataManagerCreated"),i.on("stateChanged",i.handleStateChanged_),i.newListenerHandle_=i.on("newListener",i.handleNewListener_),i.on("eventsChanged",i.onEventsChanged_),i.addListenersFromObj_(i.dataManager_.get("events")),i.created(),i.componentCreated_=!0,o!==!1&&i.render_(o),i.on("elementChanged",i.onElementChanged_),i}return babelHelpers.inherits(r,a),babelHelpers.createClass(r,[{key:"addListenersFromObj_",value:function(e){for(var t=Object.keys(e||{}),n=0;n<t.length;n++){var o=this.extractListenerInfo_(e[t[n]]);if(o.fn){var i;i=o.selector?this.delegate(t[n],o.selector,o.fn):this.on(t[n],o.fn),this.eventsStateKeyHandler_.add(i)}}}},{key:"attach",value:function(e,t){return this.inDocument||(this.renderElement_(e,t),this.inDocument=!0,this.emit("attached",{parent:e,sibling:t}),this.attached()),this}},{key:"attached",value:function(){}},{key:"addSubComponent",value:function(e,t){this.components[e]=t}},{key:"created",value:function(){}},{key:"createDataManager",value:function(){return t.mergeSuperClassesProperty(this.constructor,"DATA_MANAGER",e.firstDefinedValue),new this.constructor.DATA_MANAGER_MERGED(this,r.DATA)}},{key:"createRenderer",value:function(){return t.mergeSuperClassesProperty(this.constructor,"RENDERER",e.firstDefinedValue),new this.constructor.RENDERER_MERGED(this)}},{key:"delegate",value:function(e,t,n){return this.on("delegate:"+e+":"+t,n)}},{key:"detach",value:function(){return this.inDocument&&(this.element&&this.element.parentNode&&this.element.parentNode.removeChild(this.element),this.inDocument=!1,this.detached()),this.emit("detached"),this}},{key:"detached",value:function(){}},{key:"disposed",value:function(){}},{key:"disposeInternal",value:function(){this.disposed(),this.detach(),this.elementEventProxy_&&(this.elementEventProxy_.dispose(),this.elementEventProxy_=null),this.disposeSubComponents(Object.keys(this.components)),this.components=null,this.dataManager_.dispose(),this.dataManager_=null,this.renderer_.dispose(),this.renderer_=null,babelHelpers.get(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"disposeInternal",this).call(this)}},{key:"disposeSubComponents",value:function(e){for(var t=0;t<e.length;t++){var n=this.components[e[t]];n&&!n.isDisposed()&&(n.element=null,n.dispose(),delete this.components[e[t]])}}},{key:"extractListenerInfo_",value:function(e){var n={fn:e};return t.isObject(e)&&!t.isFunction(e)&&(n.selector=e.selector,n.fn=e.fn),t.isString(n.fn)&&(n.fn=this.getListenerFn(n.fn)),n}},{key:"getDataManager",value:function(){return this.dataManager_}},{key:"getInitialConfig",value:function(){return this.initialConfig_}},{key:"getListenerFn",value:function(e){if(t.isFunction(this[e]))return this[e].bind(this)}},{key:"getState",value:function(){return this.dataManager_.getState()}},{key:"getStateKeys",value:function(){return this.dataManager_.getStateKeys()}},{key:"fireStateKeyChange_",value:function(e,n){var o=this["sync"+e.charAt(0).toUpperCase()+e.slice(1)];if(t.isFunction(o)){if(!n){var i=this.getDataManager();n={newVal:i.get(e),prevVal:void 0}}o.call(this,n.newVal,n.prevVal)}}},{key:"getRenderer",value:function(){return this.renderer_}},{key:"handleRendererRendered_",value:function(e){this.rendered(e),this.emit("rendered",e)}},{key:"handleStateChanged_",value:function(e){this.syncStateFromChanges_(e.changes),this.emit("stateSynced",e)}},{key:"handleNewListener_",value:function(e){this.attachedListeners_[e]=!0}},{key:"mergeElementClasses_",value:function(e){var t={};return e.filter(function(e){return!(!e||t[e])&&(t[e]=!0,!0)}).join(" ")}},{key:"onElementChanged_",value:function(e){this.setUpProxy_(),this.elementEventProxy_.setOriginEmitter(e.newVal),e.newVal&&this.syncVisible(this.dataManager_.get("visible"))}},{key:"onEventsChanged_",value:function(e){this.eventsStateKeyHandler_.removeAllListeners(),this.addListenersFromObj_(e.newVal)}},{key:"render_",value:function(e,t){t||this.emit("render"),this.setUpProxy_(),this.syncState_(),this.attach(e),this.wasRendered=!0}},{key:"renderAsSubComponent",value:function(){this.render_(null,!0)}},{key:"renderElement_",value:function(e,t){var n=this.element;if(n&&(t||!n.parentNode)){var i=o.toElement(e)||this.DEFAULT_ELEMENT_PARENT;i.insertBefore(n,o.toElement(t))}}},{key:"setState",value:function(e,t){this.dataManager_.setState(e,t)}},{key:"setterElementClassesFn_",value:function(e){return this.constructor.ELEMENT_CLASSES_MERGED&&(e+=" "+this.constructor.ELEMENT_CLASSES_MERGED),e.trim()}},{key:"setUpProxy_",value:function(){if(!this.elementEventProxy_){var e=new i(this.element,this);this.elementEventProxy_=e,n.map(this.attachedListeners_,e.proxyEvent.bind(e)),this.attachedListeners_=null,this.newListenerHandle_.removeListener(),this.newListenerHandle_=null}}},{key:"syncState_",value:function(){for(var e=this.dataManager_.getSyncKeys(),t=0;t<e.length;t++)this.fireStateKeyChange_(e[t])}},{key:"syncStateFromChanges_",value:function(e){for(var t in e)this.fireStateKeyChange_(t,e[t])}},{key:"syncVisible",value:function(e){this.element&&(this.element.style.display=e?"":"none")}},{key:"rendered",value:function(){}},{key:"validatorEventsFn_",value:function(e){return!t.isDefAndNotNull(e)||t.isObject(e)}},{key:"element",get:function(){return this.elementVal_},set:function(e){if((t.isElement(e)||t.isString(e)||!t.isDefAndNotNull(e))&&(e&&(e=o.toElement(e)||this.elementVal_),this.elementVal_!==e)){var n=this.elementVal_;this.elementVal_=e,this.componentCreated_&&this.emit("elementChanged",{prevVal:n,newVal:e})}}}],[{key:"isComponentCtor",value:function(e){return e.prototype&&e.prototype[r.COMPONENT_FLAG]}},{key:"render",value:function(e,n,o){var i=n,a=o;t.isElement(n)&&(i=null,a=n);var r=new e(i,(!1));return r.render_(a),r}}]),r}(s);u.DATA={elementClasses:{setter:"setterElementClassesFn_",validator:t.isString,value:""},events:{validator:"validatorEventsFn_",value:null},visible:{validator:t.isBoolean,value:!0}},u.COMPONENT_FLAG="__metal_component__",u.DATA_MANAGER=a,u.ELEMENT_CLASSES="",u.RENDERER=r,u.SYNC_UPDATES=!1,u.prototype[u.COMPONENT_FLAG]=!0,this.metal.Component=u}.call(this),function(){var e=this.metalNamed.metal.core,t=function(){function t(){babelHelpers.classCallCheck(this,t)}return babelHelpers.createClass(t,null,[{key:"getConstructor",value:function(e){var n=t.components_[e];return n}},{key:"register",value:function(n,o){var i=o;i||(i=n.hasOwnProperty("NAME")?n.NAME:e.getFunctionName(n)),n.NAME=i,t.components_[i]=n}}]),t}();t.components_={},this.metal.ComponentRegistry=t}.call(this),function(){var e=this.metal.Component,t=this.metal.ComponentDataManager,n=this.metal.ComponentRegistry,o=this.metal.ComponentRenderer;this.metal.component=e,this.metalNamed.component=this.metalNamed.component||{},this.metalNamed.component.Component=e,this.metalNamed.component.ComponentDataManager=t,this.metalNamed.component.ComponentRegistry=n,this.metalNamed.component.ComponentRenderer=o}.call(this),function(){/**
   * @license
   * Copyright 2015 The Incremental DOM Authors. All Rights Reserved.
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *      http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS-IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   */
!function(e,t){t(e.IncrementalDOM=e.IncrementalDOM||{})}(window,function(e){"use strict";function t(){}function n(e,t){this.attrs=r(),this.attrsArr=[],this.newAttrs=r(),this.staticsApplied=!1,this.key=t,this.keyMap=r(),this.keyMapValid=!0,this.focused=!1,this.nodeName=e,this.text=null}function o(){this.created=p.nodesCreated&&[],this.deleted=p.nodesDeleted&&[]}var i=Object.prototype.hasOwnProperty;t.prototype=Object.create(null);var a=function(e,t){return i.call(e,t)},r=function(){return new t},s="__incrementalDOMData",l=function(e,t,o){var i=new n(t,o);return e[s]=i,i},u=function(e){return c(e),e[s]},c=function le(e){if(!e[s]){var t=e instanceof Element,n=t?e.localName:e.nodeName,o=t?e.getAttribute("key"):null,i=l(e,n,o);if(o&&(u(e.parentNode).keyMap[o]=e),t)for(var a=e.attributes,r=i.attrs,c=i.newAttrs,d=i.attrsArr,h=0;h<a.length;h+=1){var g=a[h],p=g.name,m=g.value;r[p]=m,c[p]=void 0,d.push(p),d.push(m)}for(var f=e.firstChild;f;f=f.nextSibling)le(f)}},d=function(e,t){return"svg"===e?"http://www.w3.org/2000/svg":"foreignObject"===u(t).nodeName?null:t.namespaceURI},h=function(e,t,n,o){var i=d(n,t),a=void 0;return a=i?e.createElementNS(i,n):e.createElement(n),l(a,n,o),a},g=function(e){var t=e.createTextNode("");return l(t,"#text",null),t},p={nodesCreated:null,nodesDeleted:null};o.prototype.markCreated=function(e){this.created&&this.created.push(e)},o.prototype.markDeleted=function(e){this.deleted&&this.deleted.push(e)},o.prototype.notifyChanges=function(){this.created&&this.created.length>0&&p.nodesCreated(this.created),this.deleted&&this.deleted.length>0&&p.nodesDeleted(this.deleted)};var m=function(e){return e instanceof Document||e instanceof DocumentFragment},f=function(e,t){for(var n=[],o=e;o!==t;)n.push(o),o=o.parentNode;return n},v=function(e){for(var t=e,n=t;t;)n=t,t=t.parentNode;return n},_=function(e){var t=v(e);return m(t)?t.activeElement:null},y=function(e,t){var n=_(e);return n&&e.contains(n)?f(n,t):[]},b=function(e,t,n){for(var o=t.nextSibling,i=n;i!==t;){var a=i.nextSibling;e.insertBefore(i,o),i=a}},E=null,C=null,k=null,S=null,D=function(e,t){for(var n=0;n<e.length;n+=1)u(e[n]).focused=t},T=function(e){var t=function(t,n,i){var a=E,r=S,s=C,l=k;E=new o,S=t.ownerDocument,k=t.parentNode;var u=y(t,k);D(u,!0);var c=e(t,n,i);return D(u,!1),E.notifyChanges(),E=a,S=r,C=s,k=l,c};return t},N=T(function(e,t,n){return C=e,P(),t(n),w(),e}),O=T(function(e,t,n){var o={nextSibling:e};return C=o,t(n),e!==C&&e.parentNode&&I(k,e,u(k).keyMap),o===C?null:C}),R=function(e,t,n){var o=u(e);return t===o.nodeName&&n==o.key},A=function(e,t){if(!C||!R(C,e,t)){var n=u(k),o=C&&u(C),i=n.keyMap,a=void 0;if(t){var r=i[t];r&&(R(r,e,t)?a=r:r===C?E.markDeleted(r):I(k,r,i))}a||(a="#text"===e?g(S):h(S,k,e,t),t&&(i[t]=a),E.markCreated(a)),u(a).focused?b(k,a,C):o&&o.key&&!o.focused?(k.replaceChild(a,C),n.keyMapValid=!1):k.insertBefore(a,C),C=a}},I=function(e,t,n){e.removeChild(t),E.markDeleted(t);var o=u(t).key;o&&delete n[o]},L=function(){var e=k,t=u(e),n=t.keyMap,o=t.keyMapValid,i=e.lastChild,a=void 0;if(i!==C||!o){for(;i!==C;)I(e,i,n),i=e.lastChild;if(!o){for(a in n)i=n[a],i.parentNode!==e&&(E.markDeleted(i),delete n[a]);t.keyMapValid=!0}}},P=function(){k=C,C=null},H=function(){return C?C.nextSibling:k.firstChild},x=function(){C=H()},w=function(){L(),C=k,k=k.parentNode},F=function(e,t){return x(),A(e,t),P(),k},M=function(){return w(),C},j=function(){return x(),A("#text",null),C},U=function(){return k},B=function(){return H()},q=function(){C=k.lastChild},G=x,V={"default":"__default"},K=function(e){return 0===e.lastIndexOf("xml:",0)?"http://www.w3.org/XML/1998/namespace":0===e.lastIndexOf("xlink:",0)?"http://www.w3.org/1999/xlink":void 0},z=function(e,t,n){if(null==n)e.removeAttribute(t);else{var o=K(t);o?e.setAttributeNS(o,t,n):e.setAttribute(t,n)}},$=function(e,t,n){e[t]=n},W=function(e,t,n){t.indexOf("-")>=0?e.setProperty(t,n):e[t]=n},Y=function(e,t,n){if("string"==typeof n)e.style.cssText=n;else{e.style.cssText="";var o=e.style,i=n;for(var r in i)a(i,r)&&W(o,r,i[r])}},X=function(e,t,n){var o="undefined"==typeof n?"undefined":babelHelpers["typeof"](n);"object"===o||"function"===o?$(e,t,n):z(e,t,n)},J=function(e,t,n){var o=u(e),i=o.attrs;if(i[t]!==n){var a=Q[t]||Q[V["default"]];a(e,t,n),i[t]=n}},Q=r();Q[V["default"]]=X,Q.style=Y;var Z=3,ee=[],te=function(e,t,n,o){var i=F(e,t),a=u(i);if(!a.staticsApplied){if(n)for(var r=0;r<n.length;r+=2){var s=n[r],l=n[r+1];J(i,s,l)}a.staticsApplied=!0}for(var c=a.attrsArr,d=a.newAttrs,h=!c.length,g=Z,p=0;g<arguments.length;g+=2,p+=2){var m=arguments[g];if(h)c[p]=m,d[m]=void 0;else if(c[p]!==m)break;var l=arguments[g+1];(h||c[p+1]!==l)&&(c[p+1]=l,J(i,m,l))}if(g<arguments.length||p<c.length){for(;g<arguments.length;g+=1,p+=1)c[p]=arguments[g];for(p<c.length&&(c.length=p),g=0;g<c.length;g+=2){var s=c[g],l=c[g+1];d[s]=l}for(var f in d)J(i,f,d[f]),d[f]=void 0}return i},ne=function(e,t,n){ee[0]=e,ee[1]=t,ee[2]=n},oe=function(e,t){ee.push(e),ee.push(t)},ie=function(){var e=te.apply(null,ee);return ee.length=0,e},ae=function(e){var t=M();return t},re=function(e,t,n,o){return te.apply(null,arguments),ae(e)},se=function(e,t){var n=j(),o=u(n);if(o.text!==e){o.text=e;for(var i=e,a=1;a<arguments.length;a+=1){var r=arguments[a];i=r(i)}n.data=i}return n};e.patch=N,e.patchInner=N,e.patchOuter=O,e.currentElement=U,e.currentPointer=B,e.skip=q,e.skipNode=G,e.elementVoid=re,e.elementOpenStart=ne,e.elementOpenEnd=ie,e.elementOpen=te,e.elementClose=ae,e.text=se,e.attr=oe,e.symbols=V,e.attributes=Q,e.applyAttr=z,e.applyProp=$,e.notifications=p,e.importNode=c})}.call(this),function(){function e(e,t){c.push(e,t)}function t(e,t,n){c=[e,t,n]}function n(){return i("elementOpen").apply(null,c)}function o(e){return i("elementOpen").apply(null,arguments),i("elementClose")(e)}function i(e){return u[u.length-1][e]}function a(e){return i(e).apply(null,r.slice(arguments,1))}var r=this.metalNamed.metal.array,s=this.metalNamed.metal.object,l=function(){function i(){babelHelpers.classCallCheck(this,i)}return babelHelpers.createClass(i,null,[{key:"getOriginalFns",value:function(){return u[0]}},{key:"startInterception",value:function(a){var r=i.getOriginalFns();a=s.map(a,function(e,t){return t.bind(null,r[e])}),u.push(s.mixin({},r,a,{attr:e,elementOpenEnd:n,elementOpenStart:t,elementVoid:o}))}},{key:"stopInterception",value:function(){u.length>1&&u.pop()}}]),i}(),u=[{attr:IncrementalDOM.attr,attributes:IncrementalDOM.attributes[IncrementalDOM.symbols["default"]],elementClose:IncrementalDOM.elementClose,elementOpen:IncrementalDOM.elementOpen,elementOpenEnd:IncrementalDOM.elementOpenEnd,elementOpenStart:IncrementalDOM.elementOpenStart,elementVoid:IncrementalDOM.elementVoid,text:IncrementalDOM.text}],c=[];IncrementalDOM.attr=a.bind(null,"attr"),IncrementalDOM.elementClose=a.bind(null,"elementClose"),IncrementalDOM.elementOpen=a.bind(null,"elementOpen"),IncrementalDOM.elementOpenEnd=a.bind(null,"elementOpenEnd"),IncrementalDOM.elementOpenStart=a.bind(null,"elementOpenStart"),IncrementalDOM.elementVoid=a.bind(null,"elementVoid"),IncrementalDOM.text=a.bind(null,"text"),IncrementalDOM.attributes[IncrementalDOM.symbols["default"]]=a.bind(null,"attributes"),this.metal.IncrementalDomAop=l}.call(this),function(){var e=this.metal.metal,t=function(){function t(){babelHelpers.classCallCheck(this,t)}return babelHelpers.createClass(t,null,[{key:"buildConfigFromCall",value:function(e){var t={};e[1]&&(t.key=e[1]);for(var n=(e[2]||[]).concat(e.slice(3)),o=0;o<n.length;o+=2)t[n[o]]=n[o+1];return t}},{key:"buildCallFromConfig",value:function(e,t){for(var n=[e,t.key,[]],o=Object.keys(t),i=0;i<o.length;i++)"children"!==o[i]&&n.push(o[i],t[o[i]]);return n}},{key:"isComponentTag",value:function(t){return!e.isString(t)||t[0]===t[0].toUpperCase()}}]),t}();this.metal.IncrementalDomUtils=t}.call(this),function(){function e(e,n){var o=babelHelpers.defineProperty({parent:r},h.CHILD_OWNER,s);return n?(o.text=e[0],e.length>1&&(o.args=e)):(o.tag=e[0],o.props=d.buildConfigFromCall(e),o.props.children=[],o.config=o.props),t(o),o}function t(e){r.props.children.push(e)}function n(){r===l?(c.stopInterception(),g=!1,a(l),a=null,r=null,s=null,l=null):r=r.parent}function o(t){for(var n=arguments.length,o=Array(n>1?n-1:0),i=1;i<n;i++)o[i-1]=arguments[i];r=e(o)}function i(t){for(var n=arguments.length,o=Array(n>1?n-1:0),i=1;i<n;i++)o[i-1]=arguments[i];e(o,!0)}var a,r,s,l,u=this.metal.metal,c=this.metal.IncrementalDomAop,d=this.metal.IncrementalDomUtils,h=function(){function e(){babelHelpers.classCallCheck(this,e)}return babelHelpers.createClass(e,null,[{key:"capture",value:function(e,t){s=e,a=t,l={props:{children:[]}},l.config=l.props,r=l,g=!0,c.startInterception({elementClose:n,elementOpen:o,text:i})}},{key:"render",value:function(n,o){if(g)return void t(n);if(!o||!o(n))if(u.isDef(n.text)){var i=n.args?n.args:[];i[0]=n.text,IncrementalDOM.text.apply(null,i)}else{var a=d.buildCallFromConfig(n.tag,n.props);if(IncrementalDOM.elementOpen.apply(null,a),n.props.children)for(var r=0;r<n.props.children.length;r++)e.render(n.props.children[r],o);IncrementalDOM.elementClose(n.tag)}}}]),e}(),g=!1;h.CHILD_OWNER="__metalChildOwner",this.metal.IncrementalDomChildren=h}.call(this),function(){var e=[],t=!1,n=function(){function n(){babelHelpers.classCallCheck(this,n)}return babelHelpers.createClass(n,null,[{key:"disposeUnused",value:function(){if(!t){t=!0;for(var n=0;n<e.length;n++){var o=e[n];o.isDisposed()||o.getRenderer().getParent()||(o.element=null,o.dispose())}e=[],t=!1}}},{key:"schedule",value:function(t){for(var n=0;n<t.length;n++)t[n].isDisposed()||(t[n].getRenderer().parent_=null,e.push(t[n]))}}]),n}();this.metal.IncrementalDomUnusedComponents=n}.call(this),function(){var e=this.metalNamed.metal.core,t=this.metalNamed.metal.object,n=this.metal.dom,o=this.metalNamed.dom.domData,i=this.metalNamed.component.Component,a=this.metalNamed.component.ComponentRegistry,r=this.metalNamed.component.ComponentRenderer,s=this.metal.IncrementalDomAop,l=this.metal.IncrementalDomChildren,u=this.metal.IncrementalDomUnusedComponents,c=this.metal.IncrementalDomUtils,d=function(r){function d(e){babelHelpers.classCallCheck(this,d);var t=babelHelpers.possibleConstructorReturn(this,(d.__proto__||Object.getPrototypeOf(d)).call(this,e));return e.context={},e.refs={},t.config_=e.getInitialConfig(),t.childComponents_=[],t.clearChanges_(),e.on("attached",t.handleAttached_.bind(t)),t.handleInterceptedAttributesCall_=t.handleInterceptedAttributesCall_.bind(t),t.handleInterceptedCloseCall_=t.handleInterceptedCloseCall_.bind(t),t.handleInterceptedOpenCall_=t.handleInterceptedOpenCall_.bind(t),t.handleChildrenCaptured_=t.handleChildrenCaptured_.bind(t),t.handleChildRender_=t.handleChildRender_.bind(t),t.renderInsidePatchDontSkip_=t.renderInsidePatchDontSkip_.bind(t),t}return babelHelpers.inherits(d,r),babelHelpers.createClass(d,[{key:"addElementClasses_",value:function(e,t){for(var n=3;n<t.length;n+=2)if("class"===t[n])return void(t[n+1]=this.removeDuplicateClasses_(t[n+1]+" "+e));for(;t.length<3;)t.push(null);t.push("class",e)}},{key:"attachDecoratedListeners_",value:function(e,t){if(!this.component_.wasRendered)for(var n=(t[2]||[]).concat(t.slice(3)),o=0;o<n.length;o+=2){var i=this.getEventFromListenerAttr_(n[o]);i&&!e[i+"__handle__"]&&this.attachEvent_(e,n[o],i,n[o+1])}}},{key:"attachEvent_",value:function(t,o,i,a){var r=i+"__handle__";t[r]&&(t[r].removeListener(),t[r]=null),t[o]=a,a?(e.isString(a)&&("d"===o[0]&&t.setAttribute(o,a),a=this.component_.getListenerFn(a)),t[r]=n.delegate(document,i,t,a)):t.removeAttribute(o)}},{key:"buildChildren_",value:function(e){return 0===e.length?g:e}},{key:"buildShouldUpdateArgs_",value:function(){return[this.changes_]}},{key:"clearChanges_",value:function(){this.changes_={}}},{key:"disposeInternal",value:function(){babelHelpers.get(d.prototype.__proto__||Object.getPrototypeOf(d.prototype),"disposeInternal",this).call(this);var e=this.component_,t=this.config_.ref,n=this.getOwner();n&&n.components&&n.components[t]===e&&delete n.components[t];for(var o=0;o<this.childComponents_.length;o++){var i=this.childComponents_[o];i.isDisposed()||(i.element=null,i.dispose())}this.childComponents_=null}},{key:"getEventFromListenerAttr_",value:function(e){var t=d.LISTENER_REGEX.exec(e),n=t?t[1]?t[1]:t[2]:null;return n?n.toLowerCase():null}},{key:"getOwner",value:function(){return this.owner_}},{key:"getParent",value:function(){return this.parent_}},{key:"getSubComponent_",value:function(t,n){var o=t;e.isString(o)&&(o=a.getConstructor(t));var i,r=d.getCurrentData();if(e.isDef(n.ref))i=this.match_(this.component_.components[n.ref],o,n),this.component_.addSubComponent(n.ref,i),this.component_.refs[n.ref]=i;else if(e.isDef(n.key))i=this.match_(r.prevComps.keys[n.key],o,n),r.currComps.keys[n.key]=i;else{var s=e.getUid(o,!0);r.currComps.order[s]=r.currComps.order[s]||[];var l=r.currComps.order[s];i=this.match_((r.prevComps.order[s]||[])[l.length],o,n),l.push(i)}return i}},{key:"guaranteeParent_",value:function(){var e=this.component_.element;if(!e||!e.parentNode){var t=document.createElement("div");return e&&n.append(t,e),t}}},{key:"handleAttached_",value:function(e){this.attachData_=e}},{key:"handleChildrenCaptured_",value:function(e){var t=this.componentToRender_,n=t.props,o=t.tag;n.children=this.buildChildren_(e.props.children),this.componentToRender_=null,this.renderFromTag_(o,n)}},{key:"handleChildRender_",value:function(e){if(e.tag&&c.isComponentTag(e.tag))return e.props.children=this.buildChildren_(e.props.children),this.renderFromTag_(e.tag,e.props),!0}},{key:"handleDataManagerCreated_",value:function(){babelHelpers.get(d.prototype.__proto__||Object.getPrototypeOf(d.prototype),"handleDataManagerCreated_",this).call(this);var e=this.component_.getDataManager();this.component_.constructor.SYNC_UPDATES_MERGED||e.on("dataPropChanged",this.handleDataPropChanged_.bind(this)),e.add("children",{validator:Array.isArray,value:g},this.config_.children||g)}},{key:"handleDataPropChanged_",value:function(e){this.changes_[e.key]=e}},{key:"handleInterceptedAttributesCall_",value:function(t,n,o,i){var a=this.getEventFromListenerAttr_(o);return a?void this.attachEvent_(n,o,a,i):("checked"===o&&(i=e.isDefAndNotNull(i)&&i!==!1),"value"===o&&n.value!==i&&(n[o]=i),void(e.isBoolean(i)?(n[o]=i,i?n.setAttribute(o,""):n.removeAttribute(o)):t(n,o,i)))}},{key:"handleInterceptedCloseCall_",value:function(e,t){this.emit(d.ELEMENT_CLOSED,{tag:t});var n=e(t);return this.resetData_(o.get(n).incDomData_),n}},{key:"handleInterceptedOpenCall_",value:function(e,t){return c.isComponentTag(t)?this.handleSubComponentCall_.apply(this,arguments):this.handleRegularCall_.apply(this,arguments)}},{key:"handleManagerDataPropChanged_",value:function(e){this.handleDataPropChanged_(e),babelHelpers.get(d.prototype.__proto__||Object.getPrototypeOf(d.prototype),"handleManagerDataPropChanged_",this).call(this,e)}},{key:"handleRegularCall_",value:function(t){for(var n=arguments.length,o=Array(n>1?n-1:0),i=1;i<n;i++)o[i-1]=arguments[i];this.emit(d.ELEMENT_OPENED,{args:o});var a=d.getComponentBeingRendered(),r=a.getRenderer();if(!r.rootElementReached_){r.config_.key&&(o[1]=r.config_.key);var s=a.getDataManager().get("elementClasses");s&&this.addElementClasses_(s,o)}var l=t.apply(null,o);this.attachDecoratedListeners_(l,o),this.updateElementIfNotReached_(l);var u=c.buildConfigFromCall(o);return e.isDefAndNotNull(u.ref)&&(this.component_.refs[u.ref]=l),l}},{key:"handleSubComponentCall_",value:function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];var i=c.buildConfigFromCall(n);this.componentToRender_={props:i,tag:n[0]},l.capture(this,this.handleChildrenCaptured_)}},{key:"hasDataChanged_",value:function(){return Object.keys(this.changes_).length>0}},{key:"intercept_",value:function(){s.startInterception({attributes:this.handleInterceptedAttributesCall_,elementClose:this.handleInterceptedCloseCall_,elementOpen:this.handleInterceptedOpenCall_})}},{key:"match_",value:function(e,t,n){return e&&e.constructor===t||(e=new t(n,(!1))),e.wasRendered&&(e.getRenderer().startSkipUpdates(),e.getDataManager().replaceNonInternal(n),e.getRenderer().stopSkipUpdates()),e.getRenderer().config_=n,e}},{key:"patch",value:function(){if(!this.component_.element&&this.parent_)return void this.parent_.getRenderer().patch();var e=this.guaranteeParent_();if(e)IncrementalDOM.patch(e,this.renderInsidePatchDontSkip_),n.exitDocument(this.component_.element),this.component_.element&&this.component_.inDocument&&this.component_.renderElement_(this.attachData_.parent,this.attachData_.sibling);else{var t=this.component_.element;IncrementalDOM.patchOuter(t,this.renderInsidePatchDontSkip_),this.component_.element||n.exitDocument(t)}}},{key:"removeDuplicateClasses_",value:function(e){for(var t=[],n=e.split(/\s+/),o={},i=0;i<n.length;i++)o[n[i]]||(o[n[i]]=!0,t.push(n[i]));return t.join(" ")}},{key:"render",value:function(){this.patch()}},{key:"renderChild",value:function(e){this.intercept_(),l.render(e,this.handleChildRender_),s.stopInterception()}},{key:"renderFromTag_",value:function(t,n){if(e.isString(t)||t.prototype.getRenderer){var o=this.renderSubComponent_(t,n);return this.updateElementIfNotReached_(o.element),o.element}return t(n)}},{key:"renderIncDom",value:function(){this.component_.render?this.component_.render():IncrementalDOM.elementVoid("div")}},{key:"renderInsidePatch",value:function(){return this.component_.wasRendered&&!this.shouldUpdate()&&IncrementalDOM.currentPointer()===this.component_.element?void(this.component_.element&&IncrementalDOM.skipNode()):void this.renderInsidePatchDontSkip_()}},{key:"renderInsidePatchDontSkip_",value:function(){d.startedRenderingComponent(this.component_),this.clearChanges_(),this.rootElementReached_=!1,u.schedule(this.childComponents_),this.childComponents_=[],this.component_.refs={},this.intercept_(),this.renderIncDom(),s.stopInterception(),this.rootElementReached_||(this.component_.element=null),this.emit("rendered",!this.isRendered_),d.finishedRenderingComponent(),this.resetData_(this.incDomData_)}},{key:"renderSubComponent_",value:function(e,t){var n=this.getSubComponent_(e,t);this.updateContext_(n);var o=n.getRenderer();if(o instanceof d){var i=d.getComponentBeingRendered();i.getRenderer().childComponents_.push(n),o.parent_=i,o.owner_=this.component_,o.renderInsidePatch()}return n.wasRendered||n.renderAsSubComponent(),n}},{key:"resetData_",value:function(e){e&&(e.prevComps.keys=e.currComps.keys,e.prevComps.order=e.currComps.order,e.currComps.keys={},e.currComps.order={})}},{key:"shouldUpdate",value:function(){if(!this.hasDataChanged_())return!1;if(this.component_.shouldUpdate){var e;return(e=this.component_).shouldUpdate.apply(e,babelHelpers.toConsumableArray(this.buildShouldUpdateArgs_()))}return!0}},{key:"skipNextChildrenDisposal",value:function(){this.childComponents_=[]}},{key:"update",value:function(){this.shouldUpdate()&&this.patch()}},{key:"updateElementIfNotReached_",value:function(e){var t=d.getComponentBeingRendered(),n=t.getRenderer();n.rootElementReached_||(n.rootElementReached_=!0,t.element!==e&&(t.element=e))}},{key:"updateContext_",value:function(e){var n=e.context,o=d.getComponentBeingRendered(),i=o.getChildContext?o.getChildContext():{};t.mixin(n,o.context,i),e.context=n}}],[{key:"finishedRenderingComponent",value:function(){h.pop(),0===h.length&&u.disposeUnused()}},{key:"getComponentBeingRendered",value:function(){return h[h.length-1]}},{key:"getCurrentData",value:function(){var e=IncrementalDOM.currentElement(),t=d.getComponentBeingRendered(),n=t.getRenderer(),i=n;return n.rootElementReached_&&e!==t.element.parentNode&&(i=o.get(e)),i.incDomData_=i.incDomData_||{currComps:{keys:{},order:{}},prevComps:{keys:{},order:{}}},i.incDomData_}},{key:"isIncDomNode",value:function(e){return!!e[l.CHILD_OWNER]}},{key:"render",value:function(e,t,n){if(!i.isComponentCtor(e)){var o=e,a=function(e){function t(){return babelHelpers.classCallCheck(this,t),babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"created",value:function(){d.getComponentBeingRendered()&&this.getRenderer().updateContext_(this)}},{key:"render",value:function(){o(this.getRenderer().config_)}}]),t}(i);a.RENDERER=d,e=a}return i.render(e,t,n)}},{key:"renderChild",value:function(e){e[l.CHILD_OWNER].renderChild(e)}},{key:"startedRenderingComponent",value:function(e){h.push(e)}}]),d}(r),h=[],g=[];d.ELEMENT_OPENED="elementOpened",d.ELEMENT_CLOSED="elementClosed",d.LISTENER_REGEX=/^(?:on([A-Z]\w+))|(?:data-on(\w+))$/,this.metal.IncrementalDomRenderer=d}.call(this),function(){(function(){this.CLOSURE_NO_DEPS=!0,this.goog=this.goog||{};var COMPILED=!1,goog=this.goog||{};goog.global=this,goog.global.CLOSURE_UNCOMPILED_DEFINES,goog.global.CLOSURE_DEFINES,goog.isDef=function(e){return void 0!==e},goog.exportPath_=function(e,t,n){var o=e.split("."),i=n||goog.global;o[0]in i||!i.execScript||i.execScript("var "+o[0]);for(var a;o.length&&(a=o.shift());)!o.length&&goog.isDef(t)?i[a]=t:i=i[a]?i[a]:i[a]={}},goog.define=function(e,t){var n=t;COMPILED||(goog.global.CLOSURE_UNCOMPILED_DEFINES&&Object.prototype.hasOwnProperty.call(goog.global.CLOSURE_UNCOMPILED_DEFINES,e)?n=goog.global.CLOSURE_UNCOMPILED_DEFINES[e]:goog.global.CLOSURE_DEFINES&&Object.prototype.hasOwnProperty.call(goog.global.CLOSURE_DEFINES,e)&&(n=goog.global.CLOSURE_DEFINES[e])),goog.exportPath_(e,n)},goog.define("goog.DEBUG",!0),goog.define("goog.LOCALE","en"),goog.define("goog.TRUSTED_SITE",!0),goog.define("goog.STRICT_MODE_COMPATIBLE",!1),goog.define("goog.DISALLOW_TEST_ONLY_CODE",COMPILED&&!goog.DEBUG),goog.define("goog.ENABLE_CHROME_APP_SAFE_SCRIPT_LOADING",!1),goog.provide=function(e){if(!COMPILED&&goog.isProvided_(e))throw Error('Namespace "'+e+'" already declared.');goog.constructNamespace_(e)},goog.constructNamespace_=function(e,t){if(!COMPILED){delete goog.implicitNamespaces_[e];for(var n=e;(n=n.substring(0,n.lastIndexOf(".")))&&!goog.getObjectByName(n);)goog.implicitNamespaces_[n]=!0}goog.exportPath_(e,t)},goog.VALID_MODULE_RE_=/^[a-zA-Z_$][a-zA-Z0-9._$]*$/,goog.module=function(e){if(!goog.isString(e)||!e||e.search(goog.VALID_MODULE_RE_)==-1)throw Error("Invalid module identifier");if(!goog.isInModuleLoader_())throw Error("Module "+e+" has been loaded incorrectly.");if(goog.moduleLoaderState_.moduleName)throw Error("goog.module may only be called once per module.");if(goog.moduleLoaderState_.moduleName=e,!COMPILED){if(goog.isProvided_(e))throw Error('Namespace "'+e+'" already declared.');delete goog.implicitNamespaces_[e]}},goog.module.get=function(e){return goog.module.getInternal_(e)},goog.module.getInternal_=function(e){if(!COMPILED)return goog.isProvided_(e)?e in goog.loadedModules_?goog.loadedModules_[e]:goog.getObjectByName(e):null},goog.moduleLoaderState_=null,goog.isInModuleLoader_=function(){return null!=goog.moduleLoaderState_},goog.module.declareLegacyNamespace=function(){if(!COMPILED&&!goog.isInModuleLoader_())throw new Error("goog.module.declareLegacyNamespace must be called from within a goog.module");if(!COMPILED&&!goog.moduleLoaderState_.moduleName)throw Error("goog.module must be called prior to goog.module.declareLegacyNamespace.");goog.moduleLoaderState_.declareLegacyNamespace=!0},goog.setTestOnly=function(e){if(goog.DISALLOW_TEST_ONLY_CODE)throw e=e||"",Error("Importing test-only code into non-debug environment"+(e?": "+e:"."))},COMPILED||(goog.isProvided_=function(e){return e in goog.loadedModules_||!goog.implicitNamespaces_[e]&&goog.isDefAndNotNull(goog.getObjectByName(e))},goog.implicitNamespaces_={"goog.module":!0}),goog.getObjectByName=function(e,t){for(var n,o=e.split("."),i=t||goog.global;n=o.shift();){if(!goog.isDefAndNotNull(i[n]))return null;i=i[n]}return i},goog.globalize=function(e,t){var n=t||goog.global;for(var o in e)n[o]=e[o]},goog.addDependency=function(e,t,n,o){if(goog.DEPENDENCIES_ENABLED){var i,a,r=e.replace(/\\/g,"/"),s=goog.dependencies_;o&&"boolean"!=typeof o||(o=o?{module:"goog"}:{});for(var l=0;i=t[l];l++)s.nameToPath[i]=r,s.pathIsModule[r]="goog"==o.module;for(var u=0;a=n[u];u++)r in s.requires||(s.requires[r]={}),s.requires[r][a]=!0}},goog.define("goog.ENABLE_DEBUG_LOADER",!0),goog.logToConsole_=function(e){goog.global.console&&goog.global.console.error(e)},goog.require=function(e){if(!COMPILED){if(goog.ENABLE_DEBUG_LOADER&&goog.IS_OLD_IE_&&goog.maybeProcessDeferredDep_(e),goog.isProvided_(e))return goog.isInModuleLoader_()?goog.module.getInternal_(e):null;if(goog.ENABLE_DEBUG_LOADER){var t=goog.getPathFromDeps_(e);if(t)return goog.writeScripts_(t),null}var n="goog.require could not find: "+e;throw goog.logToConsole_(n),Error(n)}},goog.basePath="",goog.global.CLOSURE_BASE_PATH,goog.global.CLOSURE_NO_DEPS,goog.global.CLOSURE_IMPORT_SCRIPT,goog.nullFunction=function(){},goog.abstractMethod=function(){throw Error("unimplemented abstract method")},goog.addSingletonGetter=function(e){e.getInstance=function(){return e.instance_?e.instance_:(goog.DEBUG&&(goog.instantiatedSingletons_[goog.instantiatedSingletons_.length]=e),e.instance_=new e)}},goog.instantiatedSingletons_=[],goog.define("goog.LOAD_MODULE_USING_EVAL",!0),goog.define("goog.SEAL_MODULE_EXPORTS",goog.DEBUG),goog.loadedModules_={},goog.DEPENDENCIES_ENABLED=!COMPILED&&goog.ENABLE_DEBUG_LOADER,goog.DEPENDENCIES_ENABLED&&(goog.dependencies_={pathIsModule:{},nameToPath:{},requires:{},visited:{},written:{},deferred:{}},goog.inHtmlDocument_=function(){var e=goog.global.document;return null!=e&&"write"in e},goog.findBasePath_=function(){if(goog.isDef(goog.global.CLOSURE_BASE_PATH))return void(goog.basePath=goog.global.CLOSURE_BASE_PATH);if(goog.inHtmlDocument_())for(var e=goog.global.document,t=e.getElementsByTagName("SCRIPT"),n=t.length-1;n>=0;--n){var o=t[n],i=o.src,a=i.lastIndexOf("?"),r=a==-1?i.length:a;if("base.js"==i.substr(r-7,7))return void(goog.basePath=i.substr(0,r-7))}},goog.importScript_=function(e,t){var n=goog.global.CLOSURE_IMPORT_SCRIPT||goog.writeScriptTag_;n(e,t)&&(goog.dependencies_.written[e]=!0)},goog.IS_OLD_IE_=!(goog.global.atob||!goog.global.document||!goog.global.document.all),goog.importModule_=function(e){var t='goog.retrieveAndExecModule_("'+e+'");';goog.importScript_("",t)&&(goog.dependencies_.written[e]=!0)},goog.queuedModules_=[],goog.wrapModule_=function(e,t){return goog.LOAD_MODULE_USING_EVAL&&goog.isDef(goog.global.JSON)?"goog.loadModule("+goog.global.JSON.stringify(t+"\n//# sourceURL="+e+"\n")+");":'goog.loadModule(function(exports) {"use strict";'+t+"\n;return exports});\n//# sourceURL="+e+"\n"},goog.loadQueuedModules_=function(){var e=goog.queuedModules_.length;if(e>0){var t=goog.queuedModules_;goog.queuedModules_=[];for(var n=0;n<e;n++){var o=t[n];goog.maybeProcessDeferredPath_(o)}}},goog.maybeProcessDeferredDep_=function(e){if(goog.isDeferredModule_(e)&&goog.allDepsAreAvailable_(e)){var t=goog.getPathFromDeps_(e);goog.maybeProcessDeferredPath_(goog.basePath+t)}},goog.isDeferredModule_=function(e){var t=goog.getPathFromDeps_(e);if(t&&goog.dependencies_.pathIsModule[t]){var n=goog.basePath+t;return n in goog.dependencies_.deferred}return!1},goog.allDepsAreAvailable_=function(e){var t=goog.getPathFromDeps_(e);if(t&&t in goog.dependencies_.requires)for(var n in goog.dependencies_.requires[t])if(!goog.isProvided_(n)&&!goog.isDeferredModule_(n))return!1;return!0},goog.maybeProcessDeferredPath_=function(e){if(e in goog.dependencies_.deferred){var t=goog.dependencies_.deferred[e];delete goog.dependencies_.deferred[e],goog.globalEval(t)}},goog.loadModuleFromUrl=function(e){goog.retrieveAndExecModule_(e)},goog.loadModule=function(e){var t=goog.moduleLoaderState_;try{goog.moduleLoaderState_={moduleName:void 0,declareLegacyNamespace:!1};var n;if(goog.isFunction(e))n=e.call(goog.global,{});else{if(!goog.isString(e))throw Error("Invalid module definition");n=goog.loadModuleFromSource_.call(goog.global,e)}var o=goog.moduleLoaderState_.moduleName;if(!goog.isString(o)||!o)throw Error('Invalid module name "'+o+'"');goog.moduleLoaderState_.declareLegacyNamespace?goog.constructNamespace_(o,n):goog.SEAL_MODULE_EXPORTS&&Object.seal&&Object.seal(n),goog.loadedModules_[o]=n}finally{goog.moduleLoaderState_=t}},goog.loadModuleFromSource_=function(){"use strict";var exports={};return eval(arguments[0]),exports},goog.writeScriptSrcNode_=function(e){goog.global.document.write('<script type="text/javascript" src="'+e+'"></script>')},goog.appendScriptSrcNode_=function(e){var t=goog.global.document,n=t.createElement("script");n.type="text/javascript",n.src=e,n.defer=!1,n.async=!1,t.head.appendChild(n)},goog.writeScriptTag_=function(e,t){if(goog.inHtmlDocument_()){var n=goog.global.document;if(!goog.ENABLE_CHROME_APP_SAFE_SCRIPT_LOADING&&"complete"==n.readyState){var o=/\bdeps.js$/.test(e);if(o)return!1;throw Error('Cannot write "'+e+'" after document load')}var i=goog.IS_OLD_IE_;if(void 0===t)if(i){var a=" onreadystatechange='goog.onScriptLoad_(this, "+ ++goog.lastNonModuleScriptIndex_+")' ";n.write('<script type="text/javascript" src="'+e+'"'+a+"></script>")}else goog.ENABLE_CHROME_APP_SAFE_SCRIPT_LOADING?goog.appendScriptSrcNode_(e):goog.writeScriptSrcNode_(e);else n.write('<script type="text/javascript">'+t+"</script>");return!0}return!1},goog.lastNonModuleScriptIndex_=0,goog.onScriptLoad_=function(e,t){return"complete"==e.readyState&&goog.lastNonModuleScriptIndex_==t&&goog.loadQueuedModules_(),!0},goog.writeScripts_=function(e){function t(e){if(!(e in i.written||e in i.visited)){if(i.visited[e]=!0,e in i.requires)for(var a in i.requires[e])if(!goog.isProvided_(a)){if(!(a in i.nameToPath))throw Error("Undefined nameToPath for "+a);t(i.nameToPath[a])}e in o||(o[e]=!0,n.push(e))}}var n=[],o={},i=goog.dependencies_;t(e);for(var a=0;a<n.length;a++){var r=n[a];goog.dependencies_.written[r]=!0}var s=goog.moduleLoaderState_;goog.moduleLoaderState_=null;for(var a=0;a<n.length;a++){var r=n[a];if(!r)throw goog.moduleLoaderState_=s,Error("Undefined script input");i.pathIsModule[r]?goog.importModule_(goog.basePath+r):goog.importScript_(goog.basePath+r)}goog.moduleLoaderState_=s},goog.getPathFromDeps_=function(e){return e in goog.dependencies_.nameToPath?goog.dependencies_.nameToPath[e]:null},goog.findBasePath_(),goog.global.CLOSURE_NO_DEPS||goog.importScript_(goog.basePath+"deps.js")),goog.normalizePath_=function(e){for(var t=e.split("/"),n=0;n<t.length;)"."==t[n]?t.splice(n,1):n&&".."==t[n]&&t[n-1]&&".."!=t[n-1]?t.splice(--n,2):n++;return t.join("/")},goog.loadFileSync_=function(e){if(goog.global.CLOSURE_LOAD_FILE_SYNC)return goog.global.CLOSURE_LOAD_FILE_SYNC(e);var t=new goog.global.XMLHttpRequest;return t.open("get",e,!1),t.send(),t.responseText},goog.retrieveAndExecModule_=function(e){if(!COMPILED){var t=e;e=goog.normalizePath_(e);var n=goog.global.CLOSURE_IMPORT_SCRIPT||goog.writeScriptTag_,o=goog.loadFileSync_(e);if(null==o)throw new Error("load of "+e+"failed");var i=goog.wrapModule_(e,o),a=goog.IS_OLD_IE_;a?(goog.dependencies_.deferred[t]=i,goog.queuedModules_.push(t)):n(e,i)}},goog.typeOf=function(e){var t="undefined"==typeof e?"undefined":babelHelpers["typeof"](e);if("object"==t){if(!e)return"null";if(e instanceof Array)return"array";if(e instanceof Object)return t;var n=Object.prototype.toString.call(e);if("[object Window]"==n)return"object";if("[object Array]"==n||"number"==typeof e.length&&"undefined"!=typeof e.splice&&"undefined"!=typeof e.propertyIsEnumerable&&!e.propertyIsEnumerable("splice"))return"array";if("[object Function]"==n||"undefined"!=typeof e.call&&"undefined"!=typeof e.propertyIsEnumerable&&!e.propertyIsEnumerable("call"))return"function"}else if("function"==t&&"undefined"==typeof e.call)return"object";return t},goog.isNull=function(e){return null===e},goog.isDefAndNotNull=function(e){return null!=e},goog.isArray=function(e){return"array"==goog.typeOf(e)},goog.isArrayLike=function(e){var t=goog.typeOf(e);return"array"==t||"object"==t&&"number"==typeof e.length},goog.isDateLike=function(e){return goog.isObject(e)&&"function"==typeof e.getFullYear;
},goog.isString=function(e){return"string"==typeof e},goog.isBoolean=function(e){return"boolean"==typeof e},goog.isNumber=function(e){return"number"==typeof e},goog.isFunction=function(e){return"function"==goog.typeOf(e)},goog.isObject=function(e){var t="undefined"==typeof e?"undefined":babelHelpers["typeof"](e);return"object"==t&&null!=e||"function"==t},goog.getUid=function(e){return e[goog.UID_PROPERTY_]||(e[goog.UID_PROPERTY_]=++goog.uidCounter_)},goog.hasUid=function(e){return!!e[goog.UID_PROPERTY_]},goog.removeUid=function(e){null!==e&&"removeAttribute"in e&&e.removeAttribute(goog.UID_PROPERTY_);/** @preserveTry */
try{delete e[goog.UID_PROPERTY_]}catch(t){}},goog.UID_PROPERTY_="closure_uid_"+(1e9*Math.random()>>>0),goog.uidCounter_=0,goog.getHashCode=goog.getUid,goog.removeHashCode=goog.removeUid,goog.cloneObject=function(e){var t=goog.typeOf(e);if("object"==t||"array"==t){if(e.clone)return e.clone();var n="array"==t?[]:{};for(var o in e)n[o]=goog.cloneObject(e[o]);return n}return e},goog.bindNative_=function(e,t,n){return e.call.apply(e.bind,arguments)},goog.bindJs_=function(e,t,n){if(!e)throw new Error;if(arguments.length>2){var o=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,o),e.apply(t,n)}}return function(){return e.apply(t,arguments)}},goog.bind=function(e,t,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?goog.bind=goog.bindNative_:goog.bind=goog.bindJs_,goog.bind.apply(null,arguments)},goog.partial=function(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}},goog.mixin=function(e,t){for(var n in t)e[n]=t[n]},goog.now=goog.TRUSTED_SITE&&Date.now||function(){return+new Date},goog.globalEval=function(e){if(goog.global.execScript)goog.global.execScript(e,"JavaScript");else{if(!goog.global.eval)throw Error("goog.globalEval not available");if(null==goog.evalWorksForGlobals_)if(goog.global.eval("var _evalTest_ = 1;"),"undefined"!=typeof goog.global._evalTest_){try{delete goog.global._evalTest_}catch(t){}goog.evalWorksForGlobals_=!0}else goog.evalWorksForGlobals_=!1;if(goog.evalWorksForGlobals_)goog.global.eval(e);else{var n=goog.global.document,o=n.createElement("SCRIPT");o.type="text/javascript",o.defer=!1,o.appendChild(n.createTextNode(e)),n.body.appendChild(o),n.body.removeChild(o)}}},goog.evalWorksForGlobals_=null,goog.cssNameMapping_,goog.cssNameMappingStyle_,goog.getCssName=function(e,t){var n,o=function(e){return goog.cssNameMapping_[e]||e},i=function(e){for(var t=e.split("-"),n=[],i=0;i<t.length;i++)n.push(o(t[i]));return n.join("-")};return n=goog.cssNameMapping_?"BY_WHOLE"==goog.cssNameMappingStyle_?o:i:function(e){return e},t?e+"-"+n(t):n(e)},goog.setCssNameMapping=function(e,t){goog.cssNameMapping_=e,goog.cssNameMappingStyle_=t},goog.global.CLOSURE_CSS_NAME_MAPPING,!COMPILED&&goog.global.CLOSURE_CSS_NAME_MAPPING&&(goog.cssNameMapping_=goog.global.CLOSURE_CSS_NAME_MAPPING),goog.getMsg=function(e,t){return t&&(e=e.replace(/\{\$([^}]+)}/g,function(e,n){return null!=t&&n in t?t[n]:e})),e},goog.getMsgWithFallback=function(e,t){return e},goog.exportSymbol=function(e,t,n){goog.exportPath_(e,t,n)},goog.exportProperty=function(e,t,n){e[t]=n},goog.inherits=function(e,t){function n(){}n.prototype=t.prototype,e.superClass_=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.base=function(e,n,o){for(var i=new Array(arguments.length-2),a=2;a<arguments.length;a++)i[a-2]=arguments[a];return t.prototype[n].apply(e,i)}},goog.base=function(e,t,n){var o=arguments.callee.caller;if(goog.STRICT_MODE_COMPATIBLE||goog.DEBUG&&!o)throw Error("arguments.caller not defined.  goog.base() cannot be used with strict mode code. See http://www.ecma-international.org/ecma-262/5.1/#sec-C");if(o.superClass_){for(var i=new Array(arguments.length-1),a=1;a<arguments.length;a++)i[a-1]=arguments[a];return o.superClass_.constructor.apply(e,i)}for(var r=new Array(arguments.length-2),a=2;a<arguments.length;a++)r[a-2]=arguments[a];for(var s=!1,l=e.constructor;l;l=l.superClass_&&l.superClass_.constructor)if(l.prototype[t]===o)s=!0;else if(s)return l.prototype[t].apply(e,r);if(e[t]===o)return e.constructor.prototype[t].apply(e,r);throw Error("goog.base called from a method of one name to a method of a different name")},goog.scope=function(e){e.call(goog.global)},COMPILED||(goog.global.COMPILED=COMPILED),goog.provide("goog.string"),goog.string.subs=function(e,t){for(var n=e.split("%s"),o="",i=Array.prototype.slice.call(arguments,1);i.length&&n.length>1;)o+=n.shift()+i.shift();return o+n.join("%s")},goog.string.AMP_RE_=/&/g,goog.string.LT_RE_=/</g,goog.string.GT_RE_=/>/g,goog.string.QUOT_RE_=/"/g,goog.string.SINGLE_QUOTE_RE_=/'/g,goog.string.NULL_RE_=/\x00/g,goog.string.E_RE_=/e/g,goog.string.ALL_RE_=goog.string.DETECT_DOUBLE_ESCAPING?/[\x00&<>"'e]/:/[\x00&<>"']/,goog.string.htmlEscape=function(e,t){return t?(e=e.replace(goog.string.AMP_RE_,"&amp;").replace(goog.string.LT_RE_,"&lt;").replace(goog.string.GT_RE_,"&gt;").replace(goog.string.QUOT_RE_,"&quot;").replace(goog.string.SINGLE_QUOTE_RE_,"&#39;").replace(goog.string.NULL_RE_,"&#0;"),goog.string.DETECT_DOUBLE_ESCAPING&&(e=e.replace(goog.string.E_RE_,"&#101;")),e):goog.string.ALL_RE_.test(e)?(e.indexOf("&")!=-1&&(e=e.replace(goog.string.AMP_RE_,"&amp;")),e.indexOf("<")!=-1&&(e=e.replace(goog.string.LT_RE_,"&lt;")),e.indexOf(">")!=-1&&(e=e.replace(goog.string.GT_RE_,"&gt;")),e.indexOf('"')!=-1&&(e=e.replace(goog.string.QUOT_RE_,"&quot;")),e.indexOf("'")!=-1&&(e=e.replace(goog.string.SINGLE_QUOTE_RE_,"&#39;")),e.indexOf("\0")!=-1&&(e=e.replace(goog.string.NULL_RE_,"&#0;")),goog.string.DETECT_DOUBLE_ESCAPING&&e.indexOf("e")!=-1&&(e=e.replace(goog.string.E_RE_,"&#101;")),e):e},goog.debug={},goog.debug.runtimeType=function(e){return e instanceof Function?e.displayName||e.name||"unknown type name":e instanceof Object?e.constructor.displayName||e.constructor.name||Object.prototype.toString.call(e):null===e?"null":"undefined"==typeof e?"undefined":babelHelpers["typeof"](e)},goog.debug.Error=function(e){if(Error.captureStackTrace)Error.captureStackTrace(this,goog.debug.Error);else{var t=(new Error).stack;t&&(this.stack=t)}e&&(this.message=String(e)),this.reportErrorToServer=!0},goog.inherits(goog.debug.Error,Error),goog.debug.Error.prototype.name="CustomError",goog.dom={},goog.dom.NodeType={ELEMENT:1,ATTRIBUTE:2,TEXT:3,CDATA_SECTION:4,ENTITY_REFERENCE:5,ENTITY:6,PROCESSING_INSTRUCTION:7,COMMENT:8,DOCUMENT:9,DOCUMENT_TYPE:10,DOCUMENT_FRAGMENT:11,NOTATION:12},goog.provide("goog.i18n.bidi"),goog.provide("goog.i18n.bidi.Dir"),goog.provide("goog.i18n.bidi.DirectionalString"),goog.provide("goog.i18n.bidi.Format"),goog.define("goog.i18n.bidi.FORCE_RTL",!1),goog.i18n.bidi.IS_RTL=goog.i18n.bidi.FORCE_RTL||("ar"==goog.LOCALE.substring(0,2).toLowerCase()||"fa"==goog.LOCALE.substring(0,2).toLowerCase()||"he"==goog.LOCALE.substring(0,2).toLowerCase()||"iw"==goog.LOCALE.substring(0,2).toLowerCase()||"ps"==goog.LOCALE.substring(0,2).toLowerCase()||"sd"==goog.LOCALE.substring(0,2).toLowerCase()||"ug"==goog.LOCALE.substring(0,2).toLowerCase()||"ur"==goog.LOCALE.substring(0,2).toLowerCase()||"yi"==goog.LOCALE.substring(0,2).toLowerCase())&&(2==goog.LOCALE.length||"-"==goog.LOCALE.substring(2,3)||"_"==goog.LOCALE.substring(2,3))||goog.LOCALE.length>=3&&"ckb"==goog.LOCALE.substring(0,3).toLowerCase()&&(3==goog.LOCALE.length||"-"==goog.LOCALE.substring(3,4)||"_"==goog.LOCALE.substring(3,4)),goog.i18n.bidi.Format={LRE:"‪",RLE:"‫",PDF:"‬",LRM:"‎",RLM:"‏"},goog.i18n.bidi.Dir={LTR:1,RTL:-1,NEUTRAL:0},goog.i18n.bidi.RIGHT="right",goog.i18n.bidi.LEFT="left",goog.i18n.bidi.I18N_RIGHT=goog.i18n.bidi.IS_RTL?goog.i18n.bidi.LEFT:goog.i18n.bidi.RIGHT,goog.i18n.bidi.I18N_LEFT=goog.i18n.bidi.IS_RTL?goog.i18n.bidi.RIGHT:goog.i18n.bidi.LEFT,goog.i18n.bidi.toDir=function(e,t){return"number"==typeof e?e>0?goog.i18n.bidi.Dir.LTR:e<0?goog.i18n.bidi.Dir.RTL:t?null:goog.i18n.bidi.Dir.NEUTRAL:null==e?null:e?goog.i18n.bidi.Dir.RTL:goog.i18n.bidi.Dir.LTR},goog.i18n.bidi.ltrChars_="A-Za-zÀ-ÖØ-öø-ʸ̀-֐ࠀ-῿‎Ⰰ-﬜︀-﹯﻽-￿",goog.i18n.bidi.rtlChars_="֑-ۯۺ-߿‏יִ-﷿ﹰ-ﻼ",goog.i18n.bidi.htmlSkipReg_=/<[^>]*>|&[^;]+;/g,goog.i18n.bidi.stripHtmlIfNeeded_=function(e,t){return t?e.replace(goog.i18n.bidi.htmlSkipReg_,""):e},goog.i18n.bidi.rtlCharReg_=new RegExp("["+goog.i18n.bidi.rtlChars_+"]"),goog.i18n.bidi.ltrCharReg_=new RegExp("["+goog.i18n.bidi.ltrChars_+"]"),goog.i18n.bidi.hasAnyRtl=function(e,t){return goog.i18n.bidi.rtlCharReg_.test(goog.i18n.bidi.stripHtmlIfNeeded_(e,t))},goog.i18n.bidi.hasRtlChar=goog.i18n.bidi.hasAnyRtl,goog.i18n.bidi.hasAnyLtr=function(e,t){return goog.i18n.bidi.ltrCharReg_.test(goog.i18n.bidi.stripHtmlIfNeeded_(e,t))},goog.i18n.bidi.ltrRe_=new RegExp("^["+goog.i18n.bidi.ltrChars_+"]"),goog.i18n.bidi.rtlRe_=new RegExp("^["+goog.i18n.bidi.rtlChars_+"]"),goog.i18n.bidi.isRtlChar=function(e){return goog.i18n.bidi.rtlRe_.test(e)},goog.i18n.bidi.isLtrChar=function(e){return goog.i18n.bidi.ltrRe_.test(e)},goog.i18n.bidi.isNeutralChar=function(e){return!goog.i18n.bidi.isLtrChar(e)&&!goog.i18n.bidi.isRtlChar(e)},goog.i18n.bidi.ltrDirCheckRe_=new RegExp("^[^"+goog.i18n.bidi.rtlChars_+"]*["+goog.i18n.bidi.ltrChars_+"]"),goog.i18n.bidi.rtlDirCheckRe_=new RegExp("^[^"+goog.i18n.bidi.ltrChars_+"]*["+goog.i18n.bidi.rtlChars_+"]"),goog.i18n.bidi.startsWithRtl=function(e,t){return goog.i18n.bidi.rtlDirCheckRe_.test(goog.i18n.bidi.stripHtmlIfNeeded_(e,t))},goog.i18n.bidi.isRtlText=goog.i18n.bidi.startsWithRtl,goog.i18n.bidi.startsWithLtr=function(e,t){return goog.i18n.bidi.ltrDirCheckRe_.test(goog.i18n.bidi.stripHtmlIfNeeded_(e,t))},goog.i18n.bidi.isLtrText=goog.i18n.bidi.startsWithLtr,goog.i18n.bidi.isRequiredLtrRe_=/^http:\/\/.*/,goog.i18n.bidi.isNeutralText=function(e,t){return e=goog.i18n.bidi.stripHtmlIfNeeded_(e,t),goog.i18n.bidi.isRequiredLtrRe_.test(e)||!goog.i18n.bidi.hasAnyLtr(e)&&!goog.i18n.bidi.hasAnyRtl(e)},goog.i18n.bidi.ltrExitDirCheckRe_=new RegExp("["+goog.i18n.bidi.ltrChars_+"][^"+goog.i18n.bidi.rtlChars_+"]*$"),goog.i18n.bidi.rtlExitDirCheckRe_=new RegExp("["+goog.i18n.bidi.rtlChars_+"][^"+goog.i18n.bidi.ltrChars_+"]*$"),goog.i18n.bidi.endsWithLtr=function(e,t){return goog.i18n.bidi.ltrExitDirCheckRe_.test(goog.i18n.bidi.stripHtmlIfNeeded_(e,t))},goog.i18n.bidi.isLtrExitText=goog.i18n.bidi.endsWithLtr,goog.i18n.bidi.endsWithRtl=function(e,t){return goog.i18n.bidi.rtlExitDirCheckRe_.test(goog.i18n.bidi.stripHtmlIfNeeded_(e,t))},goog.i18n.bidi.isRtlExitText=goog.i18n.bidi.endsWithRtl,goog.i18n.bidi.rtlLocalesRe_=new RegExp("^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Arab|Hebr|Thaa|Nkoo|Tfng))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)","i"),goog.i18n.bidi.isRtlLanguage=function(e){return goog.i18n.bidi.rtlLocalesRe_.test(e)},goog.i18n.bidi.bracketGuardTextRe_=/(\(.*?\)+)|(\[.*?\]+)|(\{.*?\}+)|(<.*?>+)/g,goog.i18n.bidi.guardBracketInText=function(e,t){var n=void 0===t?goog.i18n.bidi.hasAnyRtl(e):t,o=n?goog.i18n.bidi.Format.RLM:goog.i18n.bidi.Format.LRM;return e.replace(goog.i18n.bidi.bracketGuardTextRe_,o+"$&"+o)},goog.i18n.bidi.enforceRtlInHtml=function(e){return"<"==e.charAt(0)?e.replace(/<\w+/,"$& dir=rtl"):"\n<span dir=rtl>"+e+"</span>"},goog.i18n.bidi.enforceRtlInText=function(e){return goog.i18n.bidi.Format.RLE+e+goog.i18n.bidi.Format.PDF},goog.i18n.bidi.enforceLtrInHtml=function(e){return"<"==e.charAt(0)?e.replace(/<\w+/,"$& dir=ltr"):"\n<span dir=ltr>"+e+"</span>"},goog.i18n.bidi.enforceLtrInText=function(e){return goog.i18n.bidi.Format.LRE+e+goog.i18n.bidi.Format.PDF},goog.i18n.bidi.dimensionsRe_=/:\s*([.\d][.\w]*)\s+([.\d][.\w]*)\s+([.\d][.\w]*)\s+([.\d][.\w]*)/g,goog.i18n.bidi.leftRe_=/left/gi,goog.i18n.bidi.rightRe_=/right/gi,goog.i18n.bidi.tempRe_=/%%%%/g,goog.i18n.bidi.mirrorCSS=function(e){return e.replace(goog.i18n.bidi.dimensionsRe_,":$1 $4 $3 $2").replace(goog.i18n.bidi.leftRe_,"%%%%").replace(goog.i18n.bidi.rightRe_,goog.i18n.bidi.LEFT).replace(goog.i18n.bidi.tempRe_,goog.i18n.bidi.RIGHT)},goog.i18n.bidi.doubleQuoteSubstituteRe_=/([\u0591-\u05f2])"/g,goog.i18n.bidi.singleQuoteSubstituteRe_=/([\u0591-\u05f2])'/g,goog.i18n.bidi.normalizeHebrewQuote=function(e){return e.replace(goog.i18n.bidi.doubleQuoteSubstituteRe_,"$1״").replace(goog.i18n.bidi.singleQuoteSubstituteRe_,"$1׳")},goog.i18n.bidi.wordSeparatorRe_=/\s+/,goog.i18n.bidi.hasNumeralsRe_=/[\d\u06f0-\u06f9]/,goog.i18n.bidi.rtlDetectionThreshold_=.4,goog.i18n.bidi.estimateDirection=function(e,t){for(var n=0,o=0,i=!1,a=goog.i18n.bidi.stripHtmlIfNeeded_(e,t).split(goog.i18n.bidi.wordSeparatorRe_),r=0;r<a.length;r++){var s=a[r];goog.i18n.bidi.startsWithRtl(s)?(n++,o++):goog.i18n.bidi.isRequiredLtrRe_.test(s)?i=!0:goog.i18n.bidi.hasAnyLtr(s)?o++:goog.i18n.bidi.hasNumeralsRe_.test(s)&&(i=!0)}return 0==o?i?goog.i18n.bidi.Dir.LTR:goog.i18n.bidi.Dir.NEUTRAL:n/o>goog.i18n.bidi.rtlDetectionThreshold_?goog.i18n.bidi.Dir.RTL:goog.i18n.bidi.Dir.LTR},goog.i18n.bidi.detectRtlDirectionality=function(e,t){return goog.i18n.bidi.estimateDirection(e,t)==goog.i18n.bidi.Dir.RTL},goog.i18n.bidi.setElementDirAndAlign=function(e,t){e&&(t=goog.i18n.bidi.toDir(t),t&&(e.style.textAlign=t==goog.i18n.bidi.Dir.RTL?goog.i18n.bidi.RIGHT:goog.i18n.bidi.LEFT,e.dir=t==goog.i18n.bidi.Dir.RTL?"rtl":"ltr"))},goog.i18n.bidi.setElementDirByTextDirectionality=function(e,t){switch(goog.i18n.bidi.estimateDirection(t)){case goog.i18n.bidi.Dir.LTR:e.dir="ltr";break;case goog.i18n.bidi.Dir.RTL:e.dir="rtl";break;default:e.removeAttribute("dir")}},goog.i18n.bidi.DirectionalString=function(){},goog.i18n.bidi.DirectionalString.prototype.implementsGoogI18nBidiDirectionalString,goog.i18n.bidi.DirectionalString.prototype.getDirection,goog.provide("goog.asserts"),goog.define("goog.asserts.ENABLE_ASSERTS",goog.DEBUG),goog.asserts.AssertionError=function(e,t){t.unshift(e),goog.debug.Error.call(this,goog.string.subs.apply(null,t)),t.shift(),this.messagePattern=e},goog.inherits(goog.asserts.AssertionError,goog.debug.Error),goog.asserts.AssertionError.prototype.name="AssertionError",goog.asserts.DEFAULT_ERROR_HANDLER=function(e){throw e},goog.asserts.errorHandler_=goog.asserts.DEFAULT_ERROR_HANDLER,goog.asserts.doAssertFailure_=function(e,t,n,o){var i="Assertion failed";if(n){i+=": "+n;var a=o}else e&&(i+=": "+e,a=t);var r=new goog.asserts.AssertionError(""+i,a||[]);goog.asserts.errorHandler_(r)},goog.asserts.setErrorHandler=function(e){goog.asserts.ENABLE_ASSERTS&&(goog.asserts.errorHandler_=e)},goog.asserts.assert=function(e,t,n){return goog.asserts.ENABLE_ASSERTS&&!e&&goog.asserts.doAssertFailure_("",null,t,Array.prototype.slice.call(arguments,2)),e},goog.asserts.fail=function(e,t){goog.asserts.ENABLE_ASSERTS&&goog.asserts.errorHandler_(new goog.asserts.AssertionError("Failure"+(e?": "+e:""),Array.prototype.slice.call(arguments,1)))},goog.asserts.assertNumber=function(e,t,n){return goog.asserts.ENABLE_ASSERTS&&!goog.isNumber(e)&&goog.asserts.doAssertFailure_("Expected number but got %s: %s.",[goog.typeOf(e),e],t,Array.prototype.slice.call(arguments,2)),e},goog.asserts.assertString=function(e,t,n){return goog.asserts.ENABLE_ASSERTS&&!goog.isString(e)&&goog.asserts.doAssertFailure_("Expected string but got %s: %s.",[goog.typeOf(e),e],t,Array.prototype.slice.call(arguments,2)),e},goog.asserts.assertFunction=function(e,t,n){return goog.asserts.ENABLE_ASSERTS&&!goog.isFunction(e)&&goog.asserts.doAssertFailure_("Expected function but got %s: %s.",[goog.typeOf(e),e],t,Array.prototype.slice.call(arguments,2)),e},goog.asserts.assertObject=function(e,t,n){return goog.asserts.ENABLE_ASSERTS&&!goog.isObject(e)&&goog.asserts.doAssertFailure_("Expected object but got %s: %s.",[goog.typeOf(e),e],t,Array.prototype.slice.call(arguments,2)),e},goog.asserts.assertArray=function(e,t,n){return goog.asserts.ENABLE_ASSERTS&&!goog.isArray(e)&&goog.asserts.doAssertFailure_("Expected array but got %s: %s.",[goog.typeOf(e),e],t,Array.prototype.slice.call(arguments,2)),e},goog.asserts.assertBoolean=function(e,t,n){return goog.asserts.ENABLE_ASSERTS&&!goog.isBoolean(e)&&goog.asserts.doAssertFailure_("Expected boolean but got %s: %s.",[goog.typeOf(e),e],t,Array.prototype.slice.call(arguments,2)),e},goog.asserts.assertElement=function(e,t,n){return!goog.asserts.ENABLE_ASSERTS||goog.isObject(e)&&e.nodeType==goog.dom.NodeType.ELEMENT||goog.asserts.doAssertFailure_("Expected Element but got %s: %s.",[goog.typeOf(e),e],t,Array.prototype.slice.call(arguments,2)),e},goog.asserts.assertInstanceof=function(e,t,n,o){return!goog.asserts.ENABLE_ASSERTS||e instanceof t||goog.asserts.doAssertFailure_("Expected instanceof %s but got %s.",[goog.asserts.getType_(t),goog.asserts.getType_(e)],n,Array.prototype.slice.call(arguments,3)),e},goog.asserts.assertObjectPrototypeIsIntact=function(){for(var e in Object.prototype)goog.asserts.fail(e+" should not be enumerable in Object.prototype.")},goog.asserts.getType_=function(e){return e instanceof Function?e.displayName||e.name||"unknown type name":e instanceof Object?e.constructor.displayName||e.constructor.name||Object.prototype.toString.call(e):null===e?"null":"undefined"==typeof e?"undefined":babelHelpers["typeof"](e)},goog.string.StringBuffer=function(e,t){null!=e&&this.append.apply(this,arguments)},goog.string.StringBuffer.prototype.buffer_="",goog.string.StringBuffer.prototype.set=function(e){this.buffer_=""+e},goog.string.StringBuffer.prototype.append=function(e,t,n){if(this.buffer_+=String(e),null!=t)for(var o=1;o<arguments.length;o++)this.buffer_+=arguments[o];return this},goog.string.StringBuffer.prototype.clear=function(){this.buffer_=""},goog.string.StringBuffer.prototype.getLength=function(){return this.buffer_.length},goog.string.StringBuffer.prototype.toString=function(){return this.buffer_},goog.soy={},goog.soy.data={},goog.soy.data.SanitizedContentKind={HTML:goog.DEBUG?{sanitizedContentKindHtml:!0}:{},JS:goog.DEBUG?{sanitizedContentJsChars:!0}:{},URI:goog.DEBUG?{sanitizedContentUri:!0}:{},TRUSTED_RESOURCE_URI:goog.DEBUG?{sanitizedContentTrustedResourceUri:!0}:{},ATTRIBUTES:goog.DEBUG?{sanitizedContentHtmlAttribute:!0}:{},CSS:goog.DEBUG?{sanitizedContentCss:!0}:{},TEXT:goog.DEBUG?{sanitizedContentKindText:!0}:{}},goog.soy.data.SanitizedContent=function(){throw Error("Do not instantiate directly")},goog.soy.data.SanitizedContent.prototype.contentKind,goog.soy.data.SanitizedContent.prototype.contentDir=null,goog.soy.data.SanitizedContent.prototype.content,goog.soy.data.SanitizedContent.prototype.getContent=function(){return this.content},goog.soy.data.SanitizedContent.prototype.toString=function(){return this.content},goog.soy.data.UnsanitizedText=function(){goog.soy.data.UnsanitizedText.base(this,"constructor")},goog.inherits(goog.soy.data.UnsanitizedText,goog.soy.data.SanitizedContent),function(){var e={};e.asserts={},e.esc={};var t={};e.StringBuilder=goog.string.StringBuffer,t.SanitizedContentKind=goog.soy.data.SanitizedContentKind,t.isContentKind=function(e,t){return null!=e&&e.contentKind===t},t.SanitizedUri=function(){goog.soy.data.SanitizedContent.call(this)},goog.inherits(t.SanitizedUri,goog.soy.data.SanitizedContent),t.SanitizedUri.prototype.contentKind=t.SanitizedContentKind.URI,t.SanitizedUri.prototype.contentDir=goog.i18n.bidi.Dir.LTR,t.UnsanitizedText=function(e,t){this.content=String(e),this.contentDir=null!=t?t:null},goog.inherits(t.UnsanitizedText,goog.soy.data.UnsanitizedText),t.UnsanitizedText.prototype.contentKind=t.SanitizedContentKind.TEXT,t.$$EMPTY_STRING_={VALUE:""},t.$$makeSanitizedContentFactory_=function(e){function t(e){this.content=e}function n(e,n){var o=new t(String(e));return void 0!==n&&(o.contentDir=n),o}return t.prototype=e.prototype,n},t.$$makeSanitizedContentFactoryWithDefaultDirOnly_=function(e){function t(e){this.content=e}function n(e){var n=new t(String(e));return n}return t.prototype=e.prototype,n},t.markUnsanitizedText=function(e,n){return new t.UnsanitizedText(e,n)},t.VERY_UNSAFE={},t.VERY_UNSAFE.ordainSanitizedUri=t.$$makeSanitizedContentFactoryWithDefaultDirOnly_(t.SanitizedUri),e.$$augmentMap=function(t,n){return e.$$assignDefaults(e.$$assignDefaults({},n),t)},e.$$assignDefaults=function(e,t){for(var n in t)n in e||(e[n]=t[n]);return e},e.$$checkMapKey=function(e){if("string"!=typeof e)throw Error("Map literal's key expression must evaluate to string (encountered type \""+("undefined"==typeof e?"undefined":babelHelpers["typeof"](e))+'").');return e},e.$$getMapKeys=function(e){var t=[];for(var n in e)t.push(n);return t},e.$$checkNotNull=function(e){if(null==e)throw Error("unexpected null value");return e},e.$$getDelTemplateId=function(e){return e},e.$$DELEGATE_REGISTRY_PRIORITIES_={},e.$$DELEGATE_REGISTRY_FUNCTIONS_={},e.$$registerDelegateFn=function(t,n,o,i){var a="key_"+t+":"+n,r=e.$$DELEGATE_REGISTRY_PRIORITIES_[a];if(void 0===r||o>r)e.$$DELEGATE_REGISTRY_PRIORITIES_[a]=o,e.$$DELEGATE_REGISTRY_FUNCTIONS_[a]=i;else if(o==r)throw Error('Encountered two active delegates with the same priority ("'+t+":"+n+'").')},e.$$getDelegateFn=function(t,n,o){var i=e.$$DELEGATE_REGISTRY_FUNCTIONS_["key_"+t+":"+n];if(i||""==n||(i=e.$$DELEGATE_REGISTRY_FUNCTIONS_["key_"+t+":"]),i)return i;if(o)return e.$$EMPTY_TEMPLATE_FN_;throw Error('Found no active impl for delegate call to "'+t+":"+n+'" (and not allowemptydefault="true").')},e.$$EMPTY_TEMPLATE_FN_=function(e,t,n){return""},e.$$truncate=function(t,n,o){return t=String(t),t.length<=n?t:(o&&(n>3?n-=3:o=!1),e.$$isHighSurrogate_(t.charAt(n-1))&&e.$$isLowSurrogate_(t.charAt(n))&&(n-=1),t=t.substring(0,n),o&&(t+="..."),t)},e.$$isHighSurrogate_=function(e){return 55296<=e&&e<=56319},e.$$isLowSurrogate_=function(e){return 56320<=e&&e<=57343},e.asserts.assertType=function(e,t,n,o,i){var a="expected param "+t+" of type "+o+(goog.DEBUG?", but got "+goog.debug.runtimeType(n):"")+".";return goog.asserts.assert(e,a,i)},e.esc.$$escapeHtmlHelper=function(e){return goog.string.htmlEscape(String(e))},e.$$filterImageDataUri=function(n){return t.VERY_UNSAFE.ordainSanitizedUri(e.esc.$$filterImageDataUriHelper(n))},e.esc.$$FILTER_FOR_FILTER_IMAGE_DATA_URI_=/^data:image\/(?:bmp|gif|jpe?g|png|tiff|webp);base64,[a-z0-9+\/]+=*$/i,e.esc.$$filterImageDataUriHelper=function(t){var n=String(t);return e.esc.$$FILTER_FOR_FILTER_IMAGE_DATA_URI_.test(n)?n:(goog.asserts.fail("Bad value `%s` for |filterImageDataUri",[n]),"data:image/gif;base64,zSoyz")},goog.loadModule(function(){return goog.module("soy"),e}),goog.loadModule(function(){return goog.module("soydata"),t}),goog.loadModule(function(){return goog.module("soy.asserts"),e})}(),goog.loadModule(function(){return goog.module("incrementaldom"),IncrementalDOM})}).call(window)}.call(this),function(){/*
  * HTML5 Parser By Sam Blowes
  *
  * Designed for HTML5 documents
  *
  * Original code by John Resig (ejohn.org)
  * http://ejohn.org/blog/pure-javascript-html-parser/
  * Original code by Erik Arvidsson, Mozilla Public License
  * http://erik.eae.net/simplehtmlparser/simplehtmlparser.js
  *
  * ----------------------------------------------------------------------------
  * License
  * ----------------------------------------------------------------------------
  *
  * This code is triple licensed using Apache Software License 2.0,
  * Mozilla Public License or GNU Public License
  *
  * ////////////////////////////////////////////////////////////////////////////
  *
  * Licensed under the Apache License, Version 2.0 (the "License"); you may not
  * use this file except in compliance with the License.  You may obtain a copy
  * of the License at http://www.apache.org/licenses/LICENSE-2.0
  *
  * ////////////////////////////////////////////////////////////////////////////
  *
  * The contents of this file are subject to the Mozilla Public License
  * Version 1.1 (the "License"); you may not use this file except in
  * compliance with the License. You may obtain a copy of the License at
  * http://www.mozilla.org/MPL/
  *
  * Software distributed under the License is distributed on an "AS IS"
  * basis, WITHOUT WARRANTY OF ANY KIND, either express or implied. See the
  * License for the specific language governing rights and limitations
  * under the License.
  *
  * The Original Code is Simple HTML Parser.
  *
  * The Initial Developer of the Original Code is Erik Arvidsson.
  * Portions created by Erik Arvidssson are Copyright (C) 2004. All Rights
  * Reserved.
  *
  * ////////////////////////////////////////////////////////////////////////////
  *
  * This program is free software; you can redistribute it and/or
  * modify it under the terms of the GNU General Public License
  * as published by the Free Software Foundation; either version 2
  * of the License, or (at your option) any later version.
  *
  * This program is distributed in the hope that it will be useful,
  * but WITHOUT ANY WARRANTY; without even the implied warranty of
  * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
  * GNU General Public License for more details.
  *
  * You should have received a copy of the GNU General Public License
  * along with this program; if not, write to the Free Software
  * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.
  * @license
  */
(function(){function e(e){for(var t={},n=e.split(","),o=0;o<n.length;o++)t[n[o]]=!0;return t}var t=/^<([-A-Za-z0-9_]+)((?:\s+[a-zA-Z_:][-a-zA-Z0-9_:.]*(?:\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)>/,n=/^<\/([-A-Za-z0-9_]+)[^>]*>/,o=/([a-zA-Z_:][-a-zA-Z0-9_:.]*)(?:\s*=\s*(?:(?:"((?:\\.|[^"])*)")|(?:'((?:\\.|[^'])*)')|([^>\s]+)))?/g,i=e("area,base,basefont,br,col,frame,hr,img,input,link,meta,param,embed,command,keygen,source,track,wbr"),a=e("a,address,article,applet,aside,audio,blockquote,button,canvas,center,dd,del,dir,div,dl,dt,fieldset,figcaption,figure,footer,form,frameset,h1,h2,h3,h4,h5,h6,header,hgroup,hr,iframe,ins,isindex,li,map,menu,noframes,noscript,object,ol,output,p,pre,section,script,table,tbody,td,tfoot,th,thead,tr,ul,video"),r=e("abbr,acronym,applet,b,basefont,bdo,big,br,button,cite,code,del,dfn,em,font,i,iframe,img,input,ins,kbd,label,map,object,q,s,samp,script,select,small,span,strike,strong,sub,sup,textarea,tt,u,var"),s=e("colgroup,dd,dt,li,options,p,td,tfoot,th,thead,tr"),l=e("checked,compact,declare,defer,disabled,ismap,multiple,nohref,noresize,noshade,nowrap,readonly,selected"),u=e("script,style");window.HTMLParser=function(e,c){function d(e,t,n,u){if(t=t.toLowerCase(),a[t])for(;f.last()&&r[f.last()];)h("",f.last());if(s[t]&&f.last()==t&&h("",t),u=i[t]||!!u,u||f.push(t),c.start){var d=[];n.replace(o,function(e,t){var n=arguments[2]?arguments[2]:arguments[3]?arguments[3]:arguments[4]?arguments[4]:l[t]?t:"";d.push({name:t,value:n,escaped:n.replace(/(^|[^\\])"/g,'$1\\"')})}),c.start&&c.start(t,d,u)}}function h(e,t){if(t)for(var n=f.length-1;n>=0&&f[n]!=t;n--);else var n=0;if(n>=0){for(var o=f.length-1;o>=n;o--)c.end&&c.end(f[o]);f.length=n}}var g,p,m,f=[],v=e;for(f.last=function(){return this[this.length-1]};e;){if(p=!0,f.last()&&u[f.last()])e=e.replace(new RegExp("([\\s\\S]*?)</"+f.last()+"[^>]*>"),function(e,t){return t=t.replace(/<!--([\s\S]*?)-->|<!\[CDATA\[([\s\S]*?)]]>/g,"$1$2"),c.chars&&c.chars(t),""}),h("",f.last());else if(0==e.indexOf("<!--")?(g=e.indexOf("-->"),g>=0&&(c.comment&&c.comment(e.substring(4,g)),e=e.substring(g+3),p=!1)):0==e.indexOf("</")?(m=e.match(n),m&&(e=e.substring(m[0].length),m[0].replace(n,h),p=!1)):0==e.indexOf("<")&&(m=e.match(t),m&&(e=e.substring(m[0].length),m[0].replace(t,d),p=!1)),p){g=e.indexOf("<");var _=g<0?e:e.substring(0,g);e=g<0?"":e.substring(g),c.chars&&c.chars(_)}if(e==v)throw"Parse Error: "+e;v=e}h()}}).call(this)}.call(this),function(){function e(e){var n={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"'},o=document.createElement("div");return e.replace(t,function(e,t){var i=n[e];if(i)return i;if("#"===t.charAt(0)){var a=Number("0"+t.substr(1));isNaN(a)||(i=String.fromCharCode(a))}return i||(o.innerHTML=e+" ",i=o.firstChild.nodeValue.slice(0,-1)),n[e]=i,i})}this.metal.unescape=e;var t=/&([^;\s<&]+);?/g}.call(this),function(){var e,t=this.metal.unescape,n=function(){function n(){babelHelpers.classCallCheck(this,n)}return babelHelpers.createClass(n,null,[{key:"buildFn",value:function(e){return function(){return n.run(e)}}},{key:"getParser",value:function(){return e||window.HTMLParser}},{key:"run",value:function(e){n.getParser()(e,{start:function(e,t,n){for(var o=n?IncrementalDOM.elementVoid:IncrementalDOM.elementOpen,i=[e,null,[]],a=0;a<t.length;a++)i.push(t[a].name,t[a].value);o.apply(null,i)},end:function(e){IncrementalDOM.elementClose(e)},chars:function(e){IncrementalDOM.text(e,t)}})}},{key:"setParser",value:function(t){e=t}}]),n}();this.metal.HTML2IncDom=n}.call(this),function(){var e=this.metal.HTML2IncDom;this.metal.withParser=e}.call(this),function(){var e={interceptFns_:[],getOriginalFn:function(e){return e.originalFn?e.originalFn:e},handleTemplateCall_:function(t,n,o,i){var a=e.interceptFns_[e.interceptFns_.length-1];return a?a.call(null,t,n,o,i):t.call(null,n,o,i)},registerForInterception:function(t,n){var o=t[n];o.originalFn||(t[n]=e.handleTemplateCall_.bind(null,o),t[n].originalFn=o)},startInterception:function(t){e.interceptFns_.push(t)},stopAllInterceptions:function(){e.interceptFns_=[]},stopInterception:function(){e.interceptFns_.pop()}};this.metal.SoyAop=e}.call(this),function(){var e=this.metalNamed.metal.core,t=this.metalNamed.metal.object,n=this.metalNamed.component.ComponentRegistry,o=this.metal.withParser,i=this.metal.IncrementalDomRenderer,a=this.metal.SoyAop,r={},s=function(i){function s(){return babelHelpers.classCallCheck(this,s),babelHelpers.possibleConstructorReturn(this,(s.__proto__||Object.getPrototypeOf(s)).apply(this,arguments))}return babelHelpers.inherits(s,i),babelHelpers.createClass(s,[{key:"addMissingStateKeys_",value:function(){var t=this.component_.constructor.TEMPLATE;if(e.isFunction(t)){t=a.getOriginalFn(t),this.soyParamTypes_=t.types||{};for(var n=t.params||[],o=this.component_,i=o.getDataManager().getStateInstance(),r=0;r<n.length;r++)i.hasStateKey(n[r])||o[n[r]]||i.addToState(n[r],{},o.getInitialConfig()[n[r]])}}},{key:"buildTemplateData_",value:function(n){var o=this,i=this.component_,a=t.mixin({},this.config_);i.getStateKeys().forEach(function(e){var t=i[e];o.isHtmlParam_(e)&&(t=s.toIncDom(t)),a[e]=t});for(var r=0;r<n.length;r++)!a[n[r]]&&e.isFunction(i[n[r]])&&(a[n[r]]=i[n[r]].bind(i));return a}},{key:"handleDataManagerCreated_",value:function(){babelHelpers.get(s.prototype.__proto__||Object.getPrototypeOf(s.prototype),"handleDataManagerCreated_",this).call(this),this.addMissingStateKeys_()}},{key:"isHtmlParam_",value:function(e){var t=this.component_.getDataManager().getStateInstance();if(t.getStateKeyConfig(e).isHtml)return!0;var n=this.soyParamTypes_[e]||"";return n.split("|").indexOf("html")!==-1}},{key:"renderIncDom",value:function(){var t=this.component_.constructor.TEMPLATE;e.isFunction(t)&&!this.component_.render?(t=a.getOriginalFn(t),a.startInterception(s.handleInterceptedCall_),t(this.buildTemplateData_(t.params||[]),null,r),a.stopInterception()):babelHelpers.get(s.prototype.__proto__||Object.getPrototypeOf(s.prototype),"renderIncDom",this).call(this)}},{key:"shouldUpdate",value:function(){var e=babelHelpers.get(s.prototype.__proto__||Object.getPrototypeOf(s.prototype),"shouldUpdate",this).call(this);if(!e||this.component_.shouldUpdate)return e;for(var t=this.component_.constructor.TEMPLATE,n=t?a.getOriginalFn(t).params:[],o=0;o<n.length;o++)if(this.changes_[n[o]])return!0;return!1}}],[{key:"getTemplate",value:function(e,t){return function(n,o,i){if(!goog.loadedModules_[e])throw new Error('No template with namespace "'+e+'" has been loaded yet.');return goog.loadedModules_[e][t](n,o,i)}}},{key:"handleInterceptedCall_",value:function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],n=[e.componentCtor,null,[]];for(var o in t)n.push(o,t[o]);IncrementalDOM.elementVoid.apply(null,n)}},{key:"register",value:function(e,t){var o=arguments.length<=2||void 0===arguments[2]?"render":arguments[2];e.RENDERER=s,e.TEMPLATE=a.getOriginalFn(t[o]),e.TEMPLATE.componentCtor=e,a.registerForInterception(t,o),n.register(e)}},{key:"setInjectedData",value:function(e){r=e||{}}},{key:"toHtmlString",value:function(e){var t=document.createElement("div");return IncrementalDOM.patch(t,e),t.innerHTML}},{key:"toIncDom",value:function(t){return e.isObject(t)&&e.isString(t.content)&&"HTML"===t.contentKind&&(t=t.content),e.isString(t)&&(t=o.buildFn(t)),t}}]),s}(i);this.metal.Soy=s,this.metalNamed.Soy=this.metalNamed.Soy||{},this.metalNamed.Soy.Soy=s,this.metalNamed.Soy.SoyAop=a}.call(this),function(){var e,t=this.metal.component,n=this.metal.Soy;goog.loadModule(function(t){function n(e,t,n){e=e||{},o.asserts.assertType(null==e.body||e.body instanceof Function||e.body instanceof goog.soy.data.SanitizedContent||e.body instanceof i.UnsanitizedText||goog.isString(e.body),"body",e.body,"?soydata.SanitizedHtml|string|undefined");var a=e.body;if(r("div",null,null,"class","alert"+(e.dismissible?" alert-dismissible":"")+(e.elementClasses?" "+e.elementClasses:""),"role","alert"),a){var u=a;"function"==typeof u?u():null!=u&&l(u)}e.dismissible&&(r("button",null,null,"type","button","class","close","aria-label","Close","data-onclick","toggle"),r("span",null,null,"aria-hidden","true"),l("×"),s("span"),s("button")),s("div")}goog.module("Alert.incrementaldom");var o=goog.require("soy"),i=goog.require("soydata");goog.require("goog.asserts"),goog.require("soy.asserts"),goog.require("goog.i18n.bidi"),goog.require("goog.string");var a=goog.require("incrementaldom"),r=a.elementOpen,s=a.elementClose,l=(a.elementVoid,a.elementOpenStart,a.elementOpenEnd,a.text);a.attr;return t.render=n,goog.DEBUG&&(n.soyTemplateName="Alert.render"),t.render.params=["body","dismissible","elementClasses"],t.render.types={body:"html|string",dismissible:"any",elementClasses:"any"},e=t,t});var o=function(e){function t(){return babelHelpers.classCallCheck(this,t),babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return babelHelpers.inherits(t,e),t}(t);n.register(o,e),this.metalNamed.Alert=this.metalNamed.Alert||{},this.metalNamed.Alert.Alert=o,this.metalNamed.Alert.templates=e,this.metal.Alert=e}.call(this),function(){var e=this.metalNamed.metal.core,t=this.metal.dom,n=this.metal.Anim,o=this.metal.component,i=this.metalNamed.events.EventHandler,a=this.metal.Soy,r=this.metal.Alert,s=function(o){function a(){return babelHelpers.classCallCheck(this,a),babelHelpers.possibleConstructorReturn(this,(a.__proto__||Object.getPrototypeOf(a)).apply(this,arguments))}return babelHelpers.inherits(a,o),babelHelpers.createClass(a,[{key:"created",value:function(){this.eventHandler_=new i}},{key:"detached",value:function(){babelHelpers.get(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"detached",this).call(this),this.eventHandler_.removeAllListeners(),clearTimeout(this.delay_)}},{key:"close",value:function(){t.once(this.element,"animationend",this.dispose.bind(this)),t.once(this.element,"transitionend",this.dispose.bind(this)),this.eventHandler_.removeAllListeners(),this.syncVisible(!1)}},{key:"handleDocClick_",value:function(e){this.element.contains(e.target)||this.hide()}},{key:"hide",value:function(){this.visible=!1}},{key:"hideCompletely_",value:function(){this.isDisposed()||this.visible||babelHelpers.get(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"syncVisible",this).call(this,!1)}},{key:"toggle",value:function(){this.visible=!this.visible}},{key:"show",value:function(){this.visible=!0}},{key:"syncDismissible",value:function(e){e?this.eventHandler_.add(t.on(document,"click",this.handleDocClick_.bind(this))):this.eventHandler_.removeAllListeners()}},{key:"syncHideDelay",value:function(t){e.isNumber(t)&&this.visible&&(clearTimeout(this.delay_),this.delay_=setTimeout(this.hide.bind(this),t))}},{key:"syncVisible",value:function(o,i){var r=this,s=!1;o?e.isDef(i)&&(s=!0,babelHelpers.get(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"syncVisible",this).call(this,!0)):(t.once(this.element,"animationend",this.hideCompletely_.bind(this)),t.once(this.element,"transitionend",this.hideCompletely_.bind(this)));var l=function(){r.isDisposed()||(t.removeClasses(r.element,r.animClasses[o?"hide":"show"]),t.addClasses(r.element,r.animClasses[o?"show":"hide"]),n.emulateEnd(r.element),o&&e.isNumber(r.hideDelay)&&r.syncHideDelay(r.hideDelay))};s?setTimeout(l,0):l()}}]),a}(o);a.register(s,r),s.STATE={animClasses:{validator:e.isObject,value:{show:"fade in",hide:"fade"}},body:{},dismissible:{validator:e.isBoolean,value:!0},elementClasses:{value:"alert-success"},hideDelay:{},visible:{value:!1}},this.metal.Alert=s}.call(this),function(){function e(e,n){return function o(){var i=arguments;t(o),o.id=setTimeout(function(){e.apply(null,i)},n)}}function t(e){clearTimeout(e.id)}this.metal.debounce=e,this.metalNamed.debounce=this.metalNamed.debounce||{},this.metalNamed.debounce.cancelDebounce=t,this.metalNamed.debounce.debounce=e}.call(this),function(){var e=this.metalNamed.metal.core,t=this.metalNamed.metal.async,n=function(){};n.prototype.then=function(){},n.IMPLEMENTED_BY_PROP="$goog_Thenable",n.addImplementation=function(e){e.prototype.then=e.prototype.then,e.prototype.$goog_Thenable=!0},n.isImplementedBy=function(e){if(!e)return!1;try{return!!e.$goog_Thenable}catch(t){return!1}};var o=function(e){var t=Array.prototype.slice.call(arguments,1);return function(){var n=t.slice();return n.push.apply(n,arguments),e.apply(this,n)}},i=function a(e,t){this.state_=a.State_.PENDING,this.result_=void 0,this.parent_=null,this.callbackEntries_=null,this.executing_=!1,a.UNHANDLED_REJECTION_DELAY>0?this.unhandledRejectionId_=0:0===a.UNHANDLED_REJECTION_DELAY&&(this.hadUnhandledRejection_=!1);try{var n=this;e.call(t,function(e){n.resolve_(a.State_.FULFILLED,e)},function(e){n.resolve_(a.State_.REJECTED,e)})}catch(o){this.resolve_(a.State_.REJECTED,o)}};i.UNHANDLED_REJECTION_DELAY=0,i.State_={PENDING:0,BLOCKED:1,FULFILLED:2,REJECTED:3},i.CallbackEntry_=null,i.resolve=function(e){return new i(function(t){t(e)})},i.reject=function(e){return new i(function(t,n){n(e)})},i.race=function(e){return new i(function(t,n){e.length||t(void 0);for(var o,i=0;o=e[i];i++)o.then(t,n)})},i.all=function(e){return new i(function(t,n){var i=e.length,a=[];if(!i)return void t(a);for(var r,s=function(e,n){i--,a[e]=n,0===i&&t(a)},l=function(e){n(e)},u=0;r=e[u];u++)r.then(o(s,u),l)})},i.firstFulfilled=function(e){return new i(function(t,n){var i=e.length,a=[];if(!i)return void t(void 0);for(var r,s=function(e){t(e)},l=function(e,t){i--,a[e]=t,0===i&&n(a)},u=0;r=e[u];u++)r.then(s,o(l,u))})},i.prototype.then=function(t,n,o){return this.addChildPromise_(e.isFunction(t)?t:null,e.isFunction(n)?n:null,o)},n.addImplementation(i),i.prototype.thenAlways=function(e,t){var n=function(){try{e.call(t)}catch(n){i.handleRejection_.call(null,n)}};return this.addCallbackEntry_({child:null,onRejected:n,onFulfilled:n}),this},i.prototype.thenCatch=function(e,t){return this.addChildPromise_(null,e,t)},i.prototype["catch"]=i.prototype.thenCatch,i.prototype.cancel=function(e){this.state_===i.State_.PENDING&&t.run(function(){var t=new i.CancellationError(e);t.IS_CANCELLATION_ERROR=!0,this.cancelInternal_(t)},this)},i.prototype.cancelInternal_=function(e){this.state_===i.State_.PENDING&&(this.parent_?this.parent_.cancelChild_(this,e):this.resolve_(i.State_.REJECTED,e))},i.prototype.cancelChild_=function(e,t){if(this.callbackEntries_){for(var n,o=0,a=-1,r=0;n=this.callbackEntries_[r];r++){var s=n.child;if(s&&(o++,s===e&&(a=r),a>=0&&o>1))break}if(a>=0)if(this.state_===i.State_.PENDING&&1===o)this.cancelInternal_(t);else{var l=this.callbackEntries_.splice(a,1)[0];this.executeCallback_(l,i.State_.REJECTED,t)}}},i.prototype.addCallbackEntry_=function(e){this.callbackEntries_&&this.callbackEntries_.length||this.state_!==i.State_.FULFILLED&&this.state_!==i.State_.REJECTED||this.scheduleCallbacks_(),this.callbackEntries_||(this.callbackEntries_=[]),this.callbackEntries_.push(e)},i.prototype.addChildPromise_=function(t,n,o){var a={child:null,onFulfilled:null,onRejected:null};return a.child=new i(function(i,r){a.onFulfilled=t?function(e){try{var n=t.call(o,e);i(n)}catch(a){r(a)}}:i,a.onRejected=n?function(t){try{var a=n.call(o,t);!e.isDef(a)&&t.IS_CANCELLATION_ERROR?r(t):i(a)}catch(s){r(s)}}:r}),a.child.parent_=this,this.addCallbackEntry_(a),a.child},i.prototype.unblockAndFulfill_=function(e){if(this.state_!==i.State_.BLOCKED)throw new Error("CancellablePromise is not blocked.");this.state_=i.State_.PENDING,this.resolve_(i.State_.FULFILLED,e)},i.prototype.unblockAndReject_=function(e){if(this.state_!==i.State_.BLOCKED)throw new Error("CancellablePromise is not blocked.");this.state_=i.State_.PENDING,this.resolve_(i.State_.REJECTED,e)},i.prototype.resolve_=function(t,o){if(this.state_===i.State_.PENDING){if(this===o)t=i.State_.REJECTED,o=new TypeError("CancellablePromise cannot resolve to itself");else{if(n.isImplementedBy(o))return o=o,this.state_=i.State_.BLOCKED,void o.then(this.unblockAndFulfill_,this.unblockAndReject_,this);if(e.isObject(o))try{var a=o.then;if(e.isFunction(a))return void this.tryThen_(o,a)}catch(r){t=i.State_.REJECTED,o=r}}this.result_=o,this.state_=t,this.scheduleCallbacks_(),t!==i.State_.REJECTED||o.IS_CANCELLATION_ERROR||i.addUnhandledRejection_(this,o)}},i.prototype.tryThen_=function(e,t){this.state_=i.State_.BLOCKED;var n=this,o=!1,a=function(e){o||(o=!0,n.unblockAndFulfill_(e))},r=function(e){o||(o=!0,n.unblockAndReject_(e))};try{t.call(e,a,r)}catch(s){r(s)}},i.prototype.scheduleCallbacks_=function(){this.executing_||(this.executing_=!0,t.run(this.executeCallbacks_,this))},i.prototype.executeCallbacks_=function(){for(;this.callbackEntries_&&this.callbackEntries_.length;){var e=this.callbackEntries_;this.callbackEntries_=[];for(var t=0;t<e.length;t++)this.executeCallback_(e[t],this.state_,this.result_)}this.executing_=!1},i.prototype.executeCallback_=function(e,t,n){t===i.State_.FULFILLED?e.onFulfilled(n):(this.removeUnhandledRejection_(),e.onRejected(n))},i.prototype.removeUnhandledRejection_=function(){var e;if(i.UNHANDLED_REJECTION_DELAY>0)for(e=this;e&&e.unhandledRejectionId_;e=e.parent_)clearTimeout(e.unhandledRejectionId_),e.unhandledRejectionId_=0;else if(0===i.UNHANDLED_REJECTION_DELAY)for(e=this;e&&e.hadUnhandledRejection_;e=e.parent_)e.hadUnhandledRejection_=!1},i.addUnhandledRejection_=function(e,n){i.UNHANDLED_REJECTION_DELAY>0?e.unhandledRejectionId_=setTimeout(function(){i.handleRejection_.call(null,n)},i.UNHANDLED_REJECTION_DELAY):0===i.UNHANDLED_REJECTION_DELAY&&(e.hadUnhandledRejection_=!0,t.run(function(){e.hadUnhandledRejection_&&i.handleRejection_.call(null,n)}))},i.handleRejection_=t.throwException,i.setUnhandledRejectionHandler=function(e){i.handleRejection_=e},i.CancellationError=function(e){function t(e){babelHelpers.classCallCheck(this,t);var n=babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return e&&(n.message=e),n}return babelHelpers.inherits(t,e),t}(Error),i.CancellationError.prototype.name="cancel",this.metalNamed.Promise=this.metalNamed.Promise||{},this.metalNamed.Promise.CancellablePromise=i,this.metal.Promise=i}.call(this),function(){var e=this.metal.metal,t=this.metal.dom,n=this.metal.Promise,o=this.metal.component,i=this.metalNamed.events.EventHandler,a=function(o){function a(){return babelHelpers.classCallCheck(this,a),babelHelpers.possibleConstructorReturn(this,(a.__proto__||Object.getPrototypeOf(a)).apply(this,arguments))}return babelHelpers.inherits(a,o),babelHelpers.createClass(a,[{key:"created",value:function(){this.eventHandler_=new i,this.on("select",this.select)}},{key:"attached",value:function(){this.inputElement&&this.eventHandler_.add(t.on(this.inputElement,"input",this.handleUserInput_.bind(this)))}},{key:"detached",value:function(){this.eventHandler_.removeAllListeners()}},{key:"handleUserInput_",value:function(){this.request(this.inputElement.value)}},{key:"request",value:function(t){var o=this;this.pendingRequest&&this.pendingRequest.cancel("Cancelled by another request");var i=o.data(t);return e.isPromise(i)||(i=n.resolve(i)),this.pendingRequest=i.then(function(t){if(Array.isArray(t))return t.map(o.format.bind(o)).filter(function(t){return e.isDefAndNotNull(t)})}),this.pendingRequest}},{key:"setData_",value:function(t){return e.isFunction(t)?t:function(){return t}}}]),a}(o);a.STATE={data:{setter:"setData_"},format:{value:e.identityFunction,validator:e.isFunction},inputElement:{setter:t.toElement},select:{value:function(e){this.inputElement.value=e.text,this.inputElement.focus()},validator:e.isFunction},visible:{validator:e.isBoolean,value:!1}},this.metal.AutocompleteBase=a}.call(this),function(){var e,t=this.metal.component,n=this.metal.Soy;goog.loadModule(function(t){function n(e,t,n){if(i("li",null,null,"class","listitem list-group-item "+(e.elementClasses?" "+e.elementClasses:"")+" clearfix","data-index",e.index),e.item.avatar){i("span",null,null,"class","list-image pull-left "+e.item.avatar["class"]);var o=e.item.avatar.content;"function"==typeof o?o():null!=o&&s(o),a("span")}i("div",null,null,"class","list-main-content pull-left"),i("div",null,null,"class","list-text-primary");var l=e.item.textPrimary;if("function"==typeof l?l():null!=l&&s(l),a("div"),e.item.textSecondary){i("div",null,null,"class","list-text-secondary");var u=e.item.textSecondary;"function"==typeof u?u():null!=u&&s(u),a("div")}if(a("div"),e.item.icons)for(var c=e.item.icons,d=c.length,h=0;h<d;h++){var g=c[h];r("span",null,null,"class","btn-icon "+g+" pull-right")}if(e.item.iconsHtml){i("div",null,null,"class","pull-right");for(var p=e.item.iconsHtml,m=p.length,f=0;f<m;f++){var v=p[f],_=v;"function"==typeof _?_():null!=_&&s(_)}a("div")}if(e.item.label){i("span",null,null,"class","label list-label pull-right "+e.item.label["class"]);var y=e.item.label.content;"function"==typeof y?y():null!=y&&s(y),a("span")}a("li")}goog.module("ListItem.incrementaldom");goog.require("soy"),goog.require("soydata");goog.require("goog.i18n.bidi"),goog.require("goog.asserts"),goog.require("goog.string");var o=goog.require("incrementaldom"),i=o.elementOpen,a=o.elementClose,r=o.elementVoid,s=(o.elementOpenStart,o.elementOpenEnd,o.text);o.attr;return t.render=n,goog.DEBUG&&(n.soyTemplateName="ListItem.render"),t.render.params=["index","item","elementClasses"],t.render.types={index:"any",item:"any",elementClasses:"any"},e=t,t});var o=function(e){function t(){return babelHelpers.classCallCheck(this,t),babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return babelHelpers.inherits(t,e),t}(t);n.register(o,e),this.metalNamed.ListItem=this.metalNamed.ListItem||{},this.metalNamed.ListItem.ListItem=o,this.metalNamed.ListItem.templates=e,this.metal.ListItem=e}.call(this),function(){var e=this.metal.metal,t=this.metal.component,n=this.metal.Soy,o=this.metal.ListItem,i=function(t){function o(){return babelHelpers.classCallCheck(this,o),babelHelpers.possibleConstructorReturn(this,(o.__proto__||Object.getPrototypeOf(o)).apply(this,arguments))}return babelHelpers.inherits(o,t),babelHelpers.createClass(o,[{key:"setterItemFn_",value:function(t){return t.textPrimary&&e.isString(t.textPrimary)&&(t.textPrimary=n.toIncDom(t.textPrimary)),t.textSecondary&&e.isString(t.textSecondary)&&(t.textSecondary=n.toIncDom(t.textSecondary)),t.avatar&&t.avatar.content&&e.isString(t.avatar.content)&&(t.avatar.content=n.toIncDom(t.avatar.content)),Array.isArray(t.iconsHtml)&&(t.iconsHtml=t.iconsHtml.map(n.toIncDom)),t}}]),o}(t);n.register(i,o),i.STATE={item:{validator:e.isObject,setter:"setterItemFn_"},index:{value:-1}},this.metal.ListItem=i}.call(this),function(){var e,t=this.metal.component,n=this.metal.Soy;goog.loadModule(function(t){function o(e,t,n){e=e||{},i.asserts.assertType(null==e.itemsHtml||e.itemsHtml instanceof Function||e.itemsHtml instanceof a.UnsanitizedText||goog.isString(e.itemsHtml),"itemsHtml",e.itemsHtml,"?soydata.SanitizedHtml|string|undefined");var o=e.itemsHtml;if(s("div",null,null,"class","list"+(e.elementClasses?" "+e.elementClasses:"")),s("ul",null,null,"class","list-group","data-onclick","handleClick"),null!=o)o();else for(var r=e.items,c=r.length,d=0;d<c;d++){var h=r[d];u({index:d,item:h,key:"-items-"+d},null,n)}l("ul"),l("div")}goog.module("List.incrementaldom");var i=goog.require("soy"),a=goog.require("soydata");goog.require("goog.asserts"),goog.require("soy.asserts"),goog.require("goog.i18n.bidi"),goog.require("goog.string");var r=goog.require("incrementaldom"),s=r.elementOpen,l=r.elementClose,u=(r.elementVoid,r.elementOpenStart,r.elementOpenEnd,r.text,r.attr,n.getTemplate("ListItem.incrementaldom","render"));return t.render=o,goog.DEBUG&&(o.soyTemplateName="List.render"),t.render.params=["itemsHtml","elementClasses","items"],t.render.types={itemsHtml:"html",elementClasses:"any",items:"any"},e=t,t});var o=function(e){function t(){return babelHelpers.classCallCheck(this,t),babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return babelHelpers.inherits(t,e),t}(t);n.register(o,e),this.metalNamed.List=this.metalNamed.List||{},this.metalNamed.List.List=o,this.metalNamed.List.templates=e,this.metal.List=e}.call(this),function(){var e=this.metal.dom,t=this.metal.component,n=this.metal.Soy,o=this.metal.List,i=function(t){function n(){return babelHelpers.classCallCheck(this,n),babelHelpers.possibleConstructorReturn(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return babelHelpers.inherits(n,t),babelHelpers.createClass(n,[{key:"handleClick",value:function(t){for(var n=t.target;n&&!e.match(n,".listitem");)n=n.parentNode;this.emit("itemSelected",n)}}]),n}(t);n.register(i,o),i.STATE={items:{validator:Array.isArray,valueFn:function(){return[]}},itemsHtml:{isHtml:!0}},this.metal.List=i}.call(this),function(){var e,t=this.metal.component,n=this.metal.Soy;goog.loadModule(function(t){function o(e,t,n){e=e||{},a("div",null,null,"class","autocomplete autocomplete-list component "+(e.elementClasses?" "+e.elementClasses:""),"data-onclick","handleClick_"),s({events:{itemSelected:e.onListItemSelected_},ref:"list"},null,n),r("div")}goog.module("Autocomplete.incrementaldom");goog.require("soy"),goog.require("soydata");goog.require("goog.i18n.bidi"),goog.require("goog.asserts");var i=goog.require("incrementaldom"),a=i.elementOpen,r=i.elementClose,s=(i.elementVoid,i.elementOpenStart,i.elementOpenEnd,i.text,i.attr,n.getTemplate("List.incrementaldom","render"));return t.render=o,goog.DEBUG&&(o.soyTemplateName="Autocomplete.render"),t.render.params=["elementClasses","onListItemSelected_"],t.render.types={elementClasses:"any",onListItemSelected_:"any"},e=t,t});var o=function(e){function t(){return babelHelpers.classCallCheck(this,t),babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return babelHelpers.inherits(t,e),t}(t);n.register(o,e),this.metalNamed.Autocomplete=this.metalNamed.Autocomplete||{},this.metalNamed.Autocomplete.Autocomplete=o,this.metalNamed.Autocomplete.templates=e,this.metal.Autocomplete=e}.call(this),function(){var e=this.metal.metal,t=this.metal.debounce,n=this.metal.dom,o=this.metalNamed.Promise.CancellablePromise,i=this.metalNamed.position.Align,a=this.metal.AutocompleteBase,r=this.metal.Soy,s=this.metal.Autocomplete,l=function(a){function r(){return babelHelpers.classCallCheck(this,r),babelHelpers.possibleConstructorReturn(this,(r.__proto__||Object.getPrototypeOf(r)).apply(this,arguments))}return babelHelpers.inherits(r,a),babelHelpers.createClass(r,[{key:"attached",value:function(){babelHelpers.get(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"attached",this).call(this),this.eventHandler_.add(n.on(this.inputElement,"focus",this.handleInputFocus_.bind(this))),this.eventHandler_.add(n.on(document,"click",this.handleDocClick_.bind(this))),this.eventHandler_.add(n.on(window,"resize",t(this.handleWindowResize_.bind(this),100))),this.visible&&this.align()}},{key:"align",value:function(){this.element.style.width=this.inputElement.offsetWidth+"px";var e=i.align(this.element,this.inputElement,i.Bottom);switch(n.removeClasses(this.element,this.positionCss_),e){case i.Top:case i.TopLeft:case i.TopRight:this.positionCss_="autocomplete-top";break;case i.Bottom:case i.BottomLeft:case i.BottomRight:this.positionCss_="autocomplete-bottom";break;default:this.positionCss_=null}n.addClasses(this.element,this.positionCss_)}},{key:"getList",value:function(){return this.components.list}},{key:"handleClick_",value:function(e){e.stopPropagation()}},{key:"handleDocClick_",value:function(){document.activeElement!==this.inputElement&&(this.visible=!1)}},{key:"handleInputFocus_",value:function(){this.request(this.inputElement.value)}},{key:"handleWindowResize_",value:function(){this.visible&&this.align()}},{key:"request",value:function(e){if(!this.autocompleteClosing_){var t=this;return babelHelpers.get(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"request",this).call(this,e).then(function(e){e&&(e.forEach(t.assertItemObjectStructure_),t.getList().items=e),t.visible=!!(e&&e.length>0)})}}},{key:"onListItemSelected_",value:function(e){var t=parseInt(e.getAttribute("data-index"),10);this.autocompleteClosing_=!0,this.emit("select",this.getList().items[t]),this.visible=!1,this.autocompleteClosing_=!1}},{key:"syncVisible",value:function(e){babelHelpers.get(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"syncVisible",this).call(this,e),e&&this.align()}},{key:"assertItemObjectStructure_",value:function(t){if(!e.isObject(t))throw new o.CancellationError("Autocomplete item must be an object");if(!t.hasOwnProperty("textPrimary"))throw new o.CancellationError("Autocomplete item must be an object with 'textPrimary' key")}}]),r}(a);r.register(l,s),l.STATE={format:{value:function(t){return e.isString(t)&&(t={textPrimary:t}),e.isObject(t)&&!t.text&&(t.text=t.textPrimary),t}}},this.metal.Autocomplete=l}.call(this),function(){var e=this.metal.Autocomplete,t=this.metal.AutocompleteBase;this.metal.autocomplete=e,this.metalNamed.autocomplete=this.metalNamed.autocomplete||{},this.metalNamed.autocomplete.Autocomplete=e,this.metalNamed.autocomplete.AutocompleteBase=t}.call(this),function(){var e,t=this.metal.component,n=this.metal.Soy;goog.loadModule(function(t){function n(e,t,n){a("div",null,null,"class","btn-group component"+(e.elementClasses?" "+e.elementClasses:""));for(var i=e.buttons,u=i.length,c=0;c<u;c++){var d=i[c],h=d.type?d.type:"button",g=d.cssClass?d.cssClass:"btn btn-default",p="";p+=o({label:d.label,selected:e.selected},null,n),a("button",null,null,"type",h,"class",g+p,"data-index",c,"data-onclick","handleClick_","role","checkbox","aria-checked",p?"true":"false"),a("span",null,null,"class","btn-group-label"),l((goog.asserts.assert(null!=(d.label?d.label:"")),d.label?d.label:"")),r("span"),d.icon&&s("span",null,null,"class",d.icon),r("button")}r("div")}function o(e,t,n){var o="";if(e.selected)for(var i=e.selected,a=i.length,r=0;r<a;r++){var s=i[r];o+=s==e.label?" btn-group-selected":""}return o}goog.module("ButtonGroup.incrementaldom");goog.require("soy"),goog.require("soydata");goog.require("goog.i18n.bidi"),goog.require("goog.asserts");var i=goog.require("incrementaldom"),a=i.elementOpen,r=i.elementClose,s=i.elementVoid,l=(i.elementOpenStart,i.elementOpenEnd,i.text);i.attr;return t.render=n,goog.DEBUG&&(n.soyTemplateName="ButtonGroup.render"),t.selectedClass=o,goog.DEBUG&&(o.soyTemplateName="ButtonGroup.selectedClass"),t.render.params=["buttons","elementClasses","selected"],t.render.types={buttons:"any",elementClasses:"any",selected:"any"},t.selectedClass.params=["label","selected"],t.selectedClass.types={label:"any",selected:"any"},e=t,t});var o=function(e){function t(){return babelHelpers.classCallCheck(this,t),babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return babelHelpers.inherits(t,e),t}(t);n.register(o,e),this.metalNamed.ButtonGroup=this.metalNamed.ButtonGroup||{},this.metalNamed.ButtonGroup.ButtonGroup=o,this.metalNamed.ButtonGroup.templates=e,this.metal.ButtonGroup=e}.call(this),function(){var e=this.metal.metal,t=this.metal.component,n=this.metal.Soy,o=this.metal.ButtonGroup,i=function(e){function t(){return babelHelpers.classCallCheck(this,t),babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"handleClick_",value:function(e){var t=e.delegateTarget,n=t.getAttribute("data-index"),o=this.selected.indexOf(this.buttons[n].label);o===-1?(this.selected.push(this.buttons[n].label),this.selected=this.selected):this.selected.length>this.minSelected&&(this.selected.splice(o,1),this.selected=this.selected)}},{key:"setterSelectedFn_",value:function(e){for(var t=Math.min(this.minSelected,this.buttons.length),n=0;e.length<t;)e.indexOf(this.buttons[n].label)===-1&&e.push(this.buttons[n].label),n++;return e}}]),t}(t);n.register(i,o),
i.STATE={buttons:{validator:function(e){return e instanceof Array},valueFn:function(){return[]}},minSelected:{validator:e.isNumber,value:0,writeOnce:!0},selected:{setter:"setterSelectedFn_",validator:Array.isArray,valueFn:function(){return[]}}},i.SELECTED_CLASS="btn-group-selected",this.metal.ButtonGroup=i}.call(this),function(){var e=this.metal.metal,t=this.metal.dom,n=this.metal.state,o=function(e){function n(e){babelHelpers.classCallCheck(this,n);var o=babelHelpers.possibleConstructorReturn(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return o.listener_=t.on(o.selector,"click",function(e){return o.initialize(e)}),o}return babelHelpers.inherits(n,e),babelHelpers.createClass(n,[{key:"disposeInternal",value:function(){this.listener_.dispose(),this.listener_=null,this.clipboardAction_&&(this.clipboardAction_.dispose(),this.clipboardAction_=null)}},{key:"initialize",value:function(e){this.clipboardAction_&&(this.clipboardAction_=null),this.clipboardAction_=new i({host:this,action:this.action(e.delegateTarget),target:this.target(e.delegateTarget),text:this.text(e.delegateTarget),trigger:e.delegateTarget})}}]),n}(n);o.STATE={action:{validator:e.isFunction,value:function(e){return e.getAttribute("data-action")}},selector:{value:"[data-clipboard]",validator:e.isString},target:{validator:e.isFunction,value:function(e){return document.querySelector(e.getAttribute("data-target"))}},text:{validator:e.isFunction,value:function(e){return e.getAttribute("data-text")}}};var i=function(e){function n(e){babelHelpers.classCallCheck(this,n);var t=babelHelpers.possibleConstructorReturn(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return t.text?t.selectValue():t.target&&t.selectTarget(),t}return babelHelpers.inherits(n,e),babelHelpers.createClass(n,[{key:"clearSelection",value:function(){this.target&&this.target.blur(),window.getSelection().removeAllRanges()}},{key:"copyText",value:function(){var e=void 0;try{e=document.execCommand(this.action)}catch(t){e=!1}this.handleResult(e)}},{key:"disposeInternal",value:function(){this.removeFakeElement(),babelHelpers.get(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"disposeInternal",this).call(this)}},{key:"handleResult",value:function(e){e?this.host.emit("success",{action:this.action,text:this.selectedText,trigger:this.trigger,clearSelection:this.clearSelection.bind(this)}):this.host.emit("error",{action:this.action,trigger:this.trigger,clearSelection:this.clearSelection.bind(this)})}},{key:"removeFakeElement",value:function(){this.fake&&t.exitDocument(this.fake),this.removeFakeHandler&&this.removeFakeHandler.removeListener()}},{key:"selectTarget",value:function(){if("INPUT"===this.target.nodeName||"TEXTAREA"===this.target.nodeName)this.target.select(),this.selectedText=this.target.value;else{var e=document.createRange(),t=window.getSelection();e.selectNodeContents(this.target),t.addRange(e),this.selectedText=t.toString()}this.copyText()}},{key:"selectValue",value:function(){this.removeFakeElement(),this.removeFakeHandler=t.once(document,"click",this.removeFakeElement.bind(this)),this.fake=document.createElement("textarea"),this.fake.style.position="fixed",this.fake.style.left="-9999px",this.fake.setAttribute("readonly",""),this.fake.value=this.text,this.selectedText=this.text,t.enterDocument(this.fake),this.fake.select(),this.copyText()}}]),n}(n);i.STATE={action:{value:"copy",validator:function(e){return"copy"===e||"cut"===e}},host:{validator:function(e){return e instanceof o}},selectedText:{validator:e.isString},target:{validator:e.isElement},text:{validator:e.isString},trigger:{validator:e.isElement}},this.metal.Clipboard=o}.call(this),function(){var e,t=this.metal.component,n=this.metal.Soy;goog.loadModule(function(t){function n(e,t,n){_("div",null,null,"class","datatable"+(e.elementClasses?" "+e.elementClasses:"")),o(m.$$assignDefaults({displayColumnsType:e.displayColumnsType,path:"table",tableClasses:e.tableClasses},e.data),null,n),y("div")}function o(e,t,n){var o;switch(goog.isObject(o=e.type)?o.toString():o){case"array":e.columns?a(e,null,n):i(e,null,n);break;case"boolean":r(e,null,n);break;case"null":s(e,null,n);break;case"number":l(e,null,n);break;case"object":u(e,null,n);break;case"string":g(e,null,n);break;case"undefined":h(e,null,n)}}function i(e,t,n){_("span",null,null,"class","datatable-array"),p({number:e.value.length,path:e.path,type:"Array"},null,n),_("table",null,null,"class",(e.tableClasses?e.tableClasses+"":"")+" hidden","role","grid"),_("tbody");for(var o=e.value,i=o.length,a=0;a<i;a++){var r=o[a];d({columns:[0],displayColumnsType:e.displayColumnsType,path:e.path+"-"+a,rowIndex:a,rowLength:e.value.length,tableClasses:e.tableClasses,value:[r]},null,n)}y("tbody"),y("table"),y("span")}function a(e,t,n){_("span",null,null,"class","datatable-array-object"),_("table",null,null,"class",e.tableClasses?e.tableClasses:"","role","grid"),c({columns:e.columns,columnsType:e.columnsType,displayColumnsType:e.displayColumnsType,path:e.path+"-0",rowLength:e.value.length+1},null,n),_("tbody");for(var o=e.value,i=o.length,a=0;a<i;a++){var r=o[a];d({columns:e.columns,displayColumnsType:e.displayColumnsType,path:e.path+"-"+(a+1),rowIndex:a+1,rowLength:e.value.length+1,tableClasses:e.tableClasses,value:r.value},null,n)}y("tbody"),y("table"),y("span")}function r(e,t,n){_("span",null,null,"class","datatable-boolean");var o=e.value;"function"==typeof o?o():null!=o&&b(o),y("span")}function s(e,t,n){_("span",null,null,"class","datatable-null"),b("null"),y("span")}function l(e,t,n){_("span",null,null,"class","datatable-number");var o=e.value;"function"==typeof o?o():null!=o&&b(o),y("span")}function u(e,t,n){_("span",null,null,"class","datatable-object"),p({number:m.$$getMapKeys(e.value).length,path:e.path,type:"Object"},null,n),_("table",null,null,"class",(e.tableClasses?e.tableClasses:"")+" hidden","role","grid"),c({columns:e.columns,columnsType:e.columnsType,displayColumnsType:e.displayColumnsType,path:e.path+"-0",rowLength:2},null,n),_("tbody"),d({columns:e.columns,displayColumnsType:e.displayColumnsType,path:e.path+"-1",rowIndex:1,rowLength:2,tableClasses:e.tableClasses,value:e.value},null,n),y("tbody"),y("table"),y("span")}function c(e,t,n){_("thead"),_("tr",null,null,"data-rows",e.rowLength);for(var o=e.columns,i=o.length,a=0;a<i;a++){var r=o[a],s=e.path+"-"+a;_("th",null,null,"role","columnheader","scope","col","ref",s,"tabindex",0==a?"0":"-1","data-cols",e.columns.length);var l=r;if("function"==typeof l?l():null!=l&&b(l),e.displayColumnsType&&e.columnsType){_("span",null,null,"class","datatable-type");var u=e.columnsType[r];"function"==typeof u?u():null!=u&&b(u),y("span")}y("th")}y("tr"),y("thead")}function d(e,t,n){_("tr",null,null,"data-rows",e.rowLength);for(var i=e.columns,a=i.length,r=0;r<a;r++){var s=i[r],l=e.path+"-"+r;_("td",null,null,"role","gridcell","ref",l,"tabindex",0==e.rowIndex&&0==r?"0":"-1","data-cols",e.columns.length),o(m.$$assignDefaults({displayColumnsType:e.displayColumnsType,path:l,tableClasses:e.tableClasses},e.value[s]),null,n),y("td")}y("tr")}function h(e,t,n){_("span",null,null,"class","datatable-undefined"),b("undefined"),y("span")}function g(e,t,n){m.asserts.assertType(e.value instanceof Function||e.value instanceof f.UnsanitizedText||goog.isString(e.value),"value",e.value,"Function");var o=e.value;_("span",null,null,"class","datatable-string"),o(),y("span")}function p(e,t,n){_("span",null,null,"class","datatable-label collapsed","data-onkeydown","handleKeydownToggle_","data-onclick","handleClickToggle_","ref",e.path+"-label","tabindex","table"==e.path?0:-1);var o=e.type;"function"==typeof o?o():null!=o&&b(o),b(", ");var i=e.number;"function"==typeof i?i():null!=i&&b(i),b(" items"),y("span")}goog.module("Datatable.incrementaldom");var m=goog.require("soy"),f=goog.require("soydata");goog.require("goog.asserts"),goog.require("soy.asserts"),goog.require("goog.i18n.bidi"),goog.require("goog.string");var v=goog.require("incrementaldom"),_=v.elementOpen,y=v.elementClose,b=(v.elementVoid,v.elementOpenStart,v.elementOpenEnd,v.text);v.attr;return t.render=n,goog.DEBUG&&(n.soyTemplateName="Datatable.render"),t.render_=o,goog.DEBUG&&(o.soyTemplateName="Datatable.render_"),t.renderArray_=i,goog.DEBUG&&(i.soyTemplateName="Datatable.renderArray_"),t.renderArrayOfObjects_=a,goog.DEBUG&&(a.soyTemplateName="Datatable.renderArrayOfObjects_"),t.renderBoolean_=r,goog.DEBUG&&(r.soyTemplateName="Datatable.renderBoolean_"),t.renderNull_=s,goog.DEBUG&&(s.soyTemplateName="Datatable.renderNull_"),t.renderNumber_=l,goog.DEBUG&&(l.soyTemplateName="Datatable.renderNumber_"),t.renderObject_=u,goog.DEBUG&&(u.soyTemplateName="Datatable.renderObject_"),t.renderObjectHeaders_=c,goog.DEBUG&&(c.soyTemplateName="Datatable.renderObjectHeaders_"),t.renderObjectRow_=d,goog.DEBUG&&(d.soyTemplateName="Datatable.renderObjectRow_"),t.renderUndefined_=h,goog.DEBUG&&(h.soyTemplateName="Datatable.renderUndefined_"),t.renderString_=g,goog.DEBUG&&(g.soyTemplateName="Datatable.renderString_"),t.tableLabel=p,goog.DEBUG&&(p.soyTemplateName="Datatable.tableLabel"),t.render.params=["data","displayColumnsType","elementClasses","tableClasses"],t.render.types={data:"any",displayColumnsType:"any",elementClasses:"any",tableClasses:"any"},t.render_.params=["path","type","columns"],t.render_.types={path:"any",type:"any",columns:"any"},t.renderArray_.params=["path","value","displayColumnsType","tableClasses"],t.renderArray_.types={path:"any",value:"any",displayColumnsType:"any",tableClasses:"any"},t.renderArrayOfObjects_.params=["columns","value","columnsType","displayColumnsType","path","tableClasses"],t.renderArrayOfObjects_.types={columns:"any",value:"any",columnsType:"any",displayColumnsType:"any",path:"any",tableClasses:"any"},t.renderBoolean_.params=["value"],t.renderBoolean_.types={value:"any"},t.renderNull_.params=[],t.renderNull_.types={},t.renderNumber_.params=["value"],t.renderNumber_.types={value:"any"},t.renderObject_.params=["columns","value","columnsType","displayColumnsType","path","tableClasses"],t.renderObject_.types={columns:"any",value:"any",columnsType:"any",displayColumnsType:"any",path:"any",tableClasses:"any"},t.renderObjectHeaders_.params=["columns","columnsType","displayColumnsType","path","rowLength"],t.renderObjectHeaders_.types={columns:"any",columnsType:"any",displayColumnsType:"any",path:"any",rowLength:"any"},t.renderObjectRow_.params=["columns","value","displayColumnsType","path","rowIndex","rowLength","tableClasses"],t.renderObjectRow_.types={columns:"any",value:"any",displayColumnsType:"any",path:"any",rowIndex:"any",rowLength:"any",tableClasses:"any"},t.renderUndefined_.params=[],t.renderUndefined_.types={},t.renderString_.params=["value"],t.renderString_.types={value:"html"},t.tableLabel.params=["number","path","type"],t.tableLabel.types={number:"any",path:"any",type:"any"},e=t,t});var o=function(e){function t(){return babelHelpers.classCallCheck(this,t),babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return babelHelpers.inherits(t,e),t}(t);n.register(o,e),this.metalNamed.Datatable=this.metalNamed.Datatable||{},this.metalNamed.Datatable.Datatable=o,this.metalNamed.Datatable.templates=e,this.metal.Datatable=e}.call(this),function(){var e=this.metal.metal,t=this.metal.events,n=function(t){function n(e,t){babelHelpers.classCallCheck(this,n);var o=babelHelpers.possibleConstructorReturn(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return o.component_=e,o.selector_=t||"*",o.handleKey_=o.handleKey_.bind(o),o}return babelHelpers.inherits(n,t),babelHelpers.createClass(n,[{key:"buildRef_",value:function(e,t){return e+t}},{key:"disposeInternal",value:function(){babelHelpers.get(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"disposeInternal",this).call(this),this.stop(),this.component_=null,this.selector_=null}},{key:"getNextFocusable_",value:function(e,t,n){var o=t,i=void 0,a=void 0;do t=this.increment_(t,n),a=this.buildRef_(e,t),i=this.component_.refs[a];while(this.isFocusable_(i)&&t!==o);return i?a:null}},{key:"handleKey_",value:function(t){var o=this.focusHandler_&&this.focusHandler_(t);this.focusHandler_&&o!==!0||(o=this.handleKeyDefault_(t));var i=o;e.isElement(o)||(o=this.component_.refs[o]),o&&(o.focus(),this.emit(n.EVENT_FOCUSED,{element:o,ref:e.isString(i)?i:null}))}},{key:"handleKeyDefault_",value:function(e){var t=e.delegateTarget.getAttribute("ref"),o=n.REF_REGEX.exec(t);if(o){var i=parseInt(o[1],10),a=t.substr(0,t.length-o[1].length);switch(e.keyCode){case 37:case 38:return this.getNextFocusable_(a,i,-1);case 39:case 40:return this.getNextFocusable_(a,i,1)}}}},{key:"increment_",value:function(t,n){var o=this.circularLength_;return t+=n,e.isNumber(o)&&(t<0?t=o-1:t>=o&&(t=0)),t}},{key:"isFocusable_",value:function(e){return e&&"true"===e.getAttribute("data-unfocusable")}},{key:"setCircularLength",value:function(e){return this.circularLength_=e,this}},{key:"setFocusHandler",value:function(e){return this.focusHandler_=e,this}},{key:"start",value:function(){return this.handle_||(this.handle_=this.component_.delegate("keydown",this.selector_,this.handleKey_)),this}},{key:"stop",value:function(){return this.handle_&&(this.handle_.removeListener(),this.handle_=null),this}}]),n}(t);n.EVENT_FOCUSED="focused",n.REF_REGEX=/.+-(\d+)$/,this.metal.KeyboardFocusManager=n}.call(this),function(){var e=function(){function e(){babelHelpers.classCallCheck(this,e)}return babelHelpers.createClass(e,null,[{key:"getNativeUserAgent",value:function(){var t=e.globals.window.navigator;if(t){var n=t.userAgent;if(n)return n}return""}},{key:"getNativePlatform",value:function(){var t=e.globals.window.navigator;if(t){var n=t.platform;if(n)return n}return""}},{key:"matchPlatform",value:function(t){return e.platform.indexOf(t)!==-1}},{key:"matchUserAgent",value:function(t){return e.userAgent.indexOf(t)!==-1}},{key:"testUserAgent",value:function(t,n){e.userAgent=t,e.platform=n,e.isMac=e.matchPlatform("Mac"),e.isWin=e.matchPlatform("Win"),e.isOpera=e.matchUserAgent("Opera")||e.matchUserAgent("OPR"),e.isIe=e.matchUserAgent("Trident")||e.matchUserAgent("MSIE"),e.isEdge=e.matchUserAgent("Edge"),e.isIeOrEdge=e.isIe||e.isEdge,e.isChrome=(e.matchUserAgent("Chrome")||e.matchUserAgent("CriOS"))&&!e.isOpera&&!e.isEdge,e.isSafari=e.matchUserAgent("Safari")&&!(e.isChrome||e.isOpera||e.isEdge),e.isFirefox=e.matchUserAgent("Firefox")}}]),e}();e.globals={window:window},e.testUserAgent(e.getNativeUserAgent(),e.getNativePlatform()),this.metal.UA=e}.call(this),function(){var e=this.metal.metal,t=this.metal.dom,n=this.metal.Datatable,o=this.metal.component,i=this.metal.KeyboardFocusManager,a=this.metal.Soy,r=this.metal.UA,s=function(n){function o(){return babelHelpers.classCallCheck(this,o),babelHelpers.possibleConstructorReturn(this,(o.__proto__||Object.getPrototypeOf(o)).apply(this,arguments))}return babelHelpers.inherits(o,n),babelHelpers.createClass(o,[{key:"assertNoMixedTypesInArrays_",value:function(e){var t,n=this,o=function(e){var o=n.getValueType_(e);n.assertSameTypes_(t,o),t=o,n.assertNoMixedTypesInArrays_(e)},i=function(e){return n.assertNoMixedTypesInArrays_(e)};this.visit_(e,o,i)}},{key:"assertSameTypes_",value:function(e,t){if(e&&t&&e!==t)throw new Error("Datatable does not support mixed types in arrays.")}},{key:"attached",value:function(){this.keyboardFocusManager_=new i(this,"td,th").setFocusHandler(this.handleNextFocus_.bind(this)).start()}},{key:"buildRef_",value:function(e,t,n){return e+t+"-"+n}},{key:"buildRefLastColumn_",value:function(e,t){var n=e.delegateTarget,o=parseInt(n.getAttribute("data-cols"),10);return this.buildRef_(t.prefix,t.row,o-1)}},{key:"buildRefLastRow_",value:function(e,t){var n=e.delegateTarget.parentNode,o=parseInt(n.getAttribute("data-rows"),10);return this.buildRef_(t.prefix,o-1,t.col)}},{key:"collectColumnsFromArrayValues_",value:function(e){var t=this,n=e.value,i=n[0]&&n[0].type===o.TYPES.OBJECT;i&&!function(){var o={},i={};n.forEach(function(e){return Object.keys(e.value).forEach(function(t){o[t]=!0,i[t]=e.value[t].type})}),e.columns=t.formatColumns(Object.keys(o)),e.columnsType=t.formatColumnsType(i)}()}},{key:"collectColumnsFromObjectKeys_",value:function(e){var t=e.value,n={},o={};Object.keys(t).forEach(function(e){n[e]=!0,o[e]=t[e].type}),e.columns=this.formatColumns(Object.keys(n)),e.columnsType=this.formatColumnsType(o)}},{key:"collectColumnsFromValues_",value:function(e){switch(e.type){case o.TYPES.ARRAY:this.collectColumnsFromArrayValues_(e);break;case o.TYPES.OBJECT:this.collectColumnsFromObjectKeys_(e)}}},{key:"disposed",value:function(){this.keyboardFocusManager_&&(this.keyboardFocusManager_.dispose(),this.keyboardFocusManager_=null)}},{key:"extractDataFromRef_",value:function(e){var t=o.REF_REGEX.exec(e);return{col:parseInt(t[2],10),prefix:e.substr(0,e.length-t[0].length),row:parseInt(t[1],10)}}},{key:"getValueType_",value:function(t){return null===t?o.TYPES.NULL:void 0===t?o.TYPES.UNDEFINED:Array.isArray(t)?o.TYPES.ARRAY:e.isObject(t)&&"HTML"===t.contentKind?o.TYPES.STRING:"undefined"==typeof t?"undefined":babelHelpers["typeof"](t)}},{key:"handleClickToggle_",value:function(e){this.toggleTableContents(e.delegateTarget)}},{key:"handleDownArrowKey_",value:function(e,t){return e.metaKey&&r.isMac?this.buildRefLastRow_(e,t):this.buildRef_(t.prefix,t.row+1,t.col)}},{key:"handleEnterKey_",value:function(e,t){var n=this.buildRef_(t.prefix,t.row,t.col)+"-label";this.refs[n]&&this.toggleTableContents(this.refs[n]),e.stopPropagation()}},{key:"handleKeydownToggle_",value:function(e){13!==e.keyCode&&32!==e.keyCode||this.toggleTableContents(e.delegateTarget)}},{key:"handleLeftArrowKey_",value:function(e,t){return!e.metaKey||!r.isMac||this.buildRef_(t.prefix,t.row,0)}},{key:"handleRightArrowKey_",value:function(e,t){return!e.metaKey||!r.isMac||this.buildRefLastColumn_(e,t)}},{key:"handleUpArrowKey_",value:function(e,t){return e.metaKey&&r.isMac?this.buildRef_(t.prefix,0,t.col):this.buildRef_(t.prefix,t.row-1,t.col)}},{key:"handleNextFocusData_",value:function(e,t){switch(e.keyCode){case 13:case 32:return this.handleEnterKey_(e,t);case 33:return this.buildRef_(t.prefix,0,t.col);case 34:return this.buildRefLastRow_(e,t);case 35:return this.buildRefLastColumn_(e,t);case 36:return this.buildRef_(t.prefix,t.row,0);case 37:return this.handleLeftArrowKey_(e,t);case 38:return this.handleUpArrowKey_(e,t);case 39:return this.handleRightArrowKey_(e,t);case 40:return this.handleDownArrowKey_(e,t)}}},{key:"handleNextFocus_",value:function(e){var t=e.delegateTarget.getAttribute("ref"),n=this.extractDataFromRef_(t),o=this.handleNextFocusData_(e,n);return o&&(e.preventDefault(),e.stopPropagation()),o}},{key:"isAlreadyExpanded",value:function(t){return e.isObject(t)&&"columns"in t&&"type"in t}},{key:"setData_",value:function(e){return this.isAlreadyExpanded(e)||(this.assertNoMixedTypesInArrays_(e),e=this.visitValuesAndExpandType_(e)),this.visitValuesAndWrapStringValues_(e)}},{key:"toggleTableContents",value:function(e){t.toggleClasses(e,this.labelClasses),t.toggleClasses(t.next(e,"table"),this.hiddenClasses)}},{key:"visit_",value:function(e,t,n){switch(this.getValueType_(e)){case o.TYPES.ARRAY:e.forEach(function(n,o){return t(n,o,e)});break;case o.TYPES.OBJECT:Object.keys(e).forEach(function(t){return n(e[t],t,e)})}}},{key:"visitValuesAndExpandType_",value:function(e){var t=this,n=function(e,n,o){return o[n]=t.visitValuesAndExpandType_(e)},o=function(e,n,o){return o[n]=t.visitValuesAndExpandType_(e)};this.visit_(e,n,o);var i=this.getValueType_(e),a={type:i,value:e};return this.collectColumnsFromValues_(a),a}},{key:"visitValuesAndWrapStringValues_",value:function(t){var n=this,i=function(e,t,o){return o[t]=n.visitValuesAndWrapStringValues_(e)},r=function(e,t,o){return o[t]=n.visitValuesAndWrapStringValues_(e)};if(this.visit_(t,i,r),e.isObject(t)){var s=this.getValueType_(t.value);s===o.TYPES.STRING&&(t.value=a.toIncDom(t.value))}return t}}]),o}(o);a.register(s,n),s.STATE={data:{setter:"setData_"},displayColumnsType:{validator:e.isBoolean,value:!0},formatColumns:{validator:e.isFunction,value:function(e){return e.sort()}},formatColumnsType:{validator:e.isFunction,value:function(e){return e}},hiddenClasses:{validator:e.isString,value:"hidden"},labelClasses:{validator:e.isString,value:"collapsed expanded"},tableClasses:{validator:e.isString,value:"table table-bordered table-condensed table-hover"}},s.REF_REGEX=/(\d+)-(\d+)$/,s.TYPES={ARRAY:"array",BOOLEAN:"boolean",NULL:"null",NUMBER:"number",OBJECT:"object",STRING:"string",UNDEFINED:"undefined"},this.metal.Datatable=s}.call(this),function(){var e,t=this.metal.component,n=this.metal.Soy;goog.loadModule(function(t){function n(e,t,n){e=e||{},o.asserts.assertType(null==e.body||e.body instanceof Function||e.body instanceof i.UnsanitizedText||goog.isString(e.body),"body",e.body,"?soydata.SanitizedHtml|string|undefined");var a=e.body;o.asserts.assertType(null==e.header||e.header instanceof Function||e.header instanceof i.UnsanitizedText||goog.isString(e.header),"header",e.header,"?soydata.SanitizedHtml|string|undefined");var l=e.header,u=e.classMap?e.classMap:["dropup","dropup","dropright","dropdown","dropdown","dropdown","dropleft","dropup"],c=null!=e.alignedPosition?e.alignedPosition:e.position,d=null!=c?u[c]:"dropdown";r("div",null,null,"class",(e.positionClassOnMenu?"dropdown":d)+(e.elementClasses?" "+e.elementClasses:"")+(e.expanded?" open":"")),l&&l(),r("ul",null,null,"class","dropdown-menu"+(e.positionClassOnMenu?" "+d:"")),a&&a(),s("ul"),s("div")}goog.module("Dropdown.incrementaldom");var o=goog.require("soy"),i=goog.require("soydata");goog.require("goog.asserts"),goog.require("soy.asserts"),goog.require("goog.i18n.bidi");var a=goog.require("incrementaldom"),r=a.elementOpen,s=a.elementClose;a.elementVoid,a.elementOpenStart,a.elementOpenEnd,a.text,a.attr;return t.render=n,goog.DEBUG&&(n.soyTemplateName="Dropdown.render"),t.render.params=["body","header","alignedPosition","classMap","elementClasses","expanded","position","positionClassOnMenu"],t.render.types={body:"html",header:"html",alignedPosition:"any",classMap:"any",elementClasses:"any",expanded:"any",position:"any",positionClassOnMenu:"any"},e=t,t});var o=function(e){function t(){return babelHelpers.classCallCheck(this,t),babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return babelHelpers.inherits(t,e),t}(t);n.register(o,e),this.metalNamed.Dropdown=this.metalNamed.Dropdown||{},this.metalNamed.Dropdown.Dropdown=o,this.metalNamed.Dropdown.templates=e,this.metal.Dropdown=e}.call(this),function(){var e=this.metalNamed.metal.core,t=this.metalNamed.metal.object,n=this.metal.dom,o=this.metalNamed.position.Align,i=this.metal.component,a=this.metalNamed.events.EventHandler,r=this.metal.Soy,s=this.metal.Dropdown,l=function(i){function r(){return babelHelpers.classCallCheck(this,r),babelHelpers.possibleConstructorReturn(this,(r.__proto__||Object.getPrototypeOf(r)).apply(this,arguments))}return babelHelpers.inherits(r,i),babelHelpers.createClass(r,[{key:"attached",value:function(){babelHelpers.get(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"attached",this).call(this),this.eventHandler_.add(n.on(document,"click",this.handleDocClick_.bind(this)))}},{key:"created",value:function(){this.eventHandler_=new a}},{key:"detached",value:function(){babelHelpers.get(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"detached",this).call(this),this.eventHandler_.removeAllListeners()}},{key:"close",value:function(){this.expanded=!1}},{key:"isOpen",value:function(){return this.expanded}},{key:"handleDocClick_",value:function(e){this.element.contains(e.target)||this.close()}},{key:"open",value:function(){this.expanded=!0}},{key:"setterClassMapFn_",value:function(e){return t.mixin(this.valueClassMapFn_(),e)}},{key:"setterPositionFn_",value:function(t){return e.isNumber(t)?t:"up"===t.toLowerCase()?o.TopLeft:o.BottomLeft}},{key:"syncExpanded",value:function(e){if(e&&this.alignElementSelector){var t=this.element.querySelector(this.alignElementSelector);if(t){var n=this.element.querySelector(".dropdown-menu");this.alignedPosition=o.align(n,t,this.position)}}}},{key:"toggle",value:function(){this.expanded=!this.expanded}},{key:"validatePosition_",value:function(e){if(o.isValidPosition(e))return!0;switch(e.toLowerCase()){case"up":case"down":return!0;default:return!1}}},{key:"valueBodyFn_",value:function(){var e=this.element&&this.element.querySelector(".dropdown-menu");return e?e.innerHTML:""}},{key:"valueClassMapFn_",value:function(){var e;return e={},babelHelpers.defineProperty(e,o.TopLeft,"dropup"),babelHelpers.defineProperty(e,o.TopCenter,"dropup"),babelHelpers.defineProperty(e,o.TopRight,"dropup"),babelHelpers.defineProperty(e,o.BottomLeft,"dropdown"),babelHelpers.defineProperty(e,o.BottomCenter,"dropdown"),babelHelpers.defineProperty(e,o.BottomRight,"dropdown"),babelHelpers.defineProperty(e,o.RightCenter,"dropright"),babelHelpers.defineProperty(e,o.LeftCenter,"dropleft"),e}},{key:"valueHeaderFn_",value:function(){if(this.element){for(var e=document.createElement("div"),t=0;t<this.element.childNodes.length&&!n.hasClass(this.element.childNodes[t],"dropdown-menu");t++)e.appendChild(this.element.childNodes[t].cloneNode(!0));return e.innerHTML}return""}}]),r}(i);r.register(l,s),l.STATE={alignedPosition:{validator:o.isValidPosition},alignElementSelector:{validator:e.isString},body:{isHtml:!0,valueFn:"valueBodyFn_"},classMap:{setter:"setterClassMapFn_",validator:e.isObject,valueFn:"valueClassMapFn_"},header:{isHtml:!0,valueFn:"valueHeaderFn_"},expanded:{value:!1},position:{setter:"setterPositionFn_",value:o.BottomLeft,validator:"validatePosition_"},positionClassOnMenu:{value:!1}},this.metal.Dropdown=l}.call(this),function(){var e,t=this.metal.component,n=this.metal.Soy;goog.loadModule(function(t){function n(e,t,n){e=e||{},o.asserts.assertType(null==e.body||e.body instanceof Function||e.body instanceof i.UnsanitizedText||goog.isString(e.body),"body",e.body,"?soydata.SanitizedHtml|string|undefined");var a=e.body;o.asserts.assertType(null==e.bodyId||e.bodyId instanceof goog.soy.data.SanitizedContent||goog.isString(e.bodyId),"bodyId",e.bodyId,"null|string|undefined");var u=e.bodyId;o.asserts.assertType(null==e.elementClasses||e.elementClasses instanceof goog.soy.data.SanitizedContent||goog.isString(e.elementClasses),"elementClasses",e.elementClasses,"null|string|undefined");var c=e.elementClasses;o.asserts.assertType(null==e.footer||e.footer instanceof Function||e.footer instanceof i.UnsanitizedText||goog.isString(e.footer),"footer",e.footer,"?soydata.SanitizedHtml|string|undefined");var d=e.footer;o.asserts.assertType(null==e.header||e.header instanceof Function||e.header instanceof i.UnsanitizedText||goog.isString(e.header),"header",e.header,"?soydata.SanitizedHtml|string|undefined");var h=e.header;o.asserts.assertType(null==e.headerId||e.headerId instanceof goog.soy.data.SanitizedContent||goog.isString(e.headerId),"headerId",e.headerId,"null|string|undefined");var g=e.headerId;o.asserts.assertType(null==e.noCloseButton||goog.isBoolean(e.noCloseButton)||1===e.noCloseButton||0===e.noCloseButton,"noCloseButton",e.noCloseButton,"boolean|null|undefined");var p=e.noCloseButton;o.asserts.assertType(null==e.role||e.role instanceof goog.soy.data.SanitizedContent||goog.isString(e.role),"role",e.role,"null|string|undefined");var m=e.role;r("div",null,null,"class","modal"+(c?" "+c:"")),r("div",null,null,"class","modal-dialog","tabindex","0","role",m?m:"dialog","aria-labelledby",g,"aria-describedby",u),r("div",null,null,"class","modal-content"),r("header",null,null,"class","modal-header"),h&&(p||(r("button",null,null,"type","button","class","close","data-onclick","hide","aria-label","Close"),r("span",null,null,"aria-hidden","true"),l("×"),s("span"),s("button")),r("div",null,null,"id",g),h(),s("div")),s("header"),r("section",null,null,"class","modal-body","id",u,"role","document","tabindex","0"),a&&a(),s("section"),r("footer",null,null,"class","modal-footer"),d&&d(),s("footer"),s("div"),s("div"),s("div")}goog.module("Modal.incrementaldom");var o=goog.require("soy"),i=goog.require("soydata");goog.require("goog.asserts"),goog.require("soy.asserts"),goog.require("goog.i18n.bidi");var a=goog.require("incrementaldom"),r=a.elementOpen,s=a.elementClose,l=(a.elementVoid,a.elementOpenStart,a.elementOpenEnd,a.text);a.attr;return t.render=n,goog.DEBUG&&(n.soyTemplateName="Modal.render"),t.render.params=["body","bodyId","elementClasses","footer","header","headerId","noCloseButton","role"],t.render.types={body:"html",bodyId:"string",elementClasses:"string",footer:"html",header:"html",headerId:"string",noCloseButton:"bool",role:"string"},e=t,t});var o=function(e){function t(){return babelHelpers.classCallCheck(this,t),babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return babelHelpers.inherits(t,e),t}(t);n.register(o,e),this.metalNamed.Modal=this.metalNamed.Modal||{},this.metalNamed.Modal.Modal=o,this.metalNamed.Modal.templates=e,this.metal.Modal=e}.call(this),function(){var e=this.metal.metal,t=this.metal.dom,n=this.metalNamed.events.EventHandler,o=this.metal.Modal,i=this.metal.component,a=this.metal.Soy,r=function(e){function o(){return babelHelpers.classCallCheck(this,o),babelHelpers.possibleConstructorReturn(this,(o.__proto__||Object.getPrototypeOf(o)).apply(this,arguments))}return babelHelpers.inherits(o,e),babelHelpers.createClass(o,[{key:"created",value:function(){this.eventHandler_=new n}},{key:"attached",value:function(){this.autoFocus_(this.autoFocus)}},{key:"autoFocus_",value:function(e){if(this.inDocument&&this.visible&&e){var t=this.element.querySelector(e);t&&t.focus()}}},{key:"detached",value:function(){babelHelpers.get(o.prototype.__proto__||Object.getPrototypeOf(o.prototype),"detached",this).call(this),this.eventHandler_.removeAllListeners()}},{key:"disposeInternal",value:function(){t.exitDocument(this.overlayElement),this.unrestrictFocus_(),babelHelpers.get(o.prototype.__proto__||Object.getPrototypeOf(o.prototype),"disposeInternal",this).call(this)}},{key:"handleDocumentFocus_",value:function(e){this.overlay&&!this.element.contains(e.target)&&this.autoFocus_(".modal-dialog")}},{key:"handleKeyup_",value:function(e){27===e.keyCode&&this.hide()}},{key:"hide",value:function(){this.visible=!1}},{key:"restrictFocus_",value:function(){this.restrictFocusHandle_||(this.restrictFocusHandle_=t.on(document,"focus",this.handleDocumentFocus_.bind(this),!0))}},{key:"shiftFocusBack_",value:function(){this.lastFocusedElement_&&(this.lastFocusedElement_.focus(),this.lastFocusedElement_=null)}},{key:"show",value:function(){this.visible=!0}},{key:"syncHideOnEscape",value:function(e){e?this.eventHandler_.add(t.on(document,"keyup",this.handleKeyup_.bind(this))):this.eventHandler_.removeAllListeners()}},{key:"syncOverlay",value:function(e){var n=e&&this.visible;t[n?"enterDocument":"exitDocument"](this.overlayElement)}},{key:"syncVisible",value:function(e){this.element.style.display=e?"block":"",this.syncOverlay(this.overlay),this.visible?(this.lastFocusedElement_=this.lastFocusedElement_||document.activeElement,this.autoFocus_(this.autoFocus),this.restrictFocus_()):(this.unrestrictFocus_(),this.shiftFocusBack_())}},{key:"unrestrictFocus_",value:function(){this.restrictFocusHandle_&&(this.restrictFocusHandle_.removeListener(),this.restrictFocusHandle_=null)}},{key:"valueOverlayElementFn_",value:function(){return t.buildFragment('<div class="modal-backdrop fade in"></div>').firstChild}}]),o}(i);r.STATE={autoFocus:{validator:function(t){return t===!1||e.isString(t)},value:".close"},body:{},bodyId:{valueFn:function(){return"modal-body-"+e.getUid()}},footer:{},headerId:{valueFn:function(){return"modal-header-"+e.getUid()}},header:{},hideOnEscape:{validator:e.isBoolean,value:!0},noCloseButton:{value:!1},overlay:{validator:e.isBoolean,value:!0},overlayElement:{initOnly:!0,valueFn:"valueOverlayElementFn_"
},role:{validator:e.isString,value:"dialog"}},a.register(r,o),this.metal.Modal=r}.call(this),function(){var e,t=this.metal.component,n=this.metal.Soy;goog.loadModule(function(t){function n(e,t,n){if(r("ul",null,null,"class","pagination"+(e.elementClasses?" "+e.elementClasses:"")),1==e.showControls){var a=!e.circular&&0==e.page;i({ariaLabel:e.strings.prevAriaLabel,content:e.strings.prev,disabled:a,index:0},null,n)}for(var l=e.total,u=0;u<l;u++){var c=e.page==u;o({active:c,content:e.offset+u,index:u},null,n)}if(1==e.showControls){var d=!e.circular&&e.page==e.total-1;i({ariaLabel:e.strings.nextAriaLabel,content:e.strings.next,disabled:d,index:1},null,n)}s("ul")}function o(e,t,n){l("li"),d("class","pagination-item"+(e.active?" active":"")),e.active||d("data-onclick","onClickItem"),d("data-index",e.index),u(),r("a",null,null,"href","#"),c((goog.asserts.assert(null!=e.content),e.content)),s("a"),s("li")}function i(e,t,n){l("li"),d("class","pagination-control"+(e.disabled?" disabled":"")),e.disabled||d("data-onclick","onClickControls"),d("data-control-index",e.index),u(),r("a",null,null,"href","#","aria-label",e.ariaLabel),c((goog.asserts.assert(null!=e.content),e.content)),s("a"),s("li")}goog.module("Pagination.incrementaldom");goog.require("soy"),goog.require("soydata");goog.require("goog.i18n.bidi"),goog.require("goog.asserts");var a=goog.require("incrementaldom"),r=a.elementOpen,s=a.elementClose,l=(a.elementVoid,a.elementOpenStart),u=a.elementOpenEnd,c=a.text,d=a.attr;return t.render=n,goog.DEBUG&&(n.soyTemplateName="Pagination.render"),t.renderElement_=o,goog.DEBUG&&(o.soyTemplateName="Pagination.renderElement_"),t.renderControlElement_=i,goog.DEBUG&&(i.soyTemplateName="Pagination.renderControlElement_"),t.render.params=["circular","elementClasses","offset","page","strings","showControls","total"],t.render.types={circular:"any",elementClasses:"any",offset:"any",page:"any",strings:"any",showControls:"any",total:"any"},t.renderElement_.params=["active","content","index"],t.renderElement_.types={active:"any",content:"any",index:"any"},t.renderControlElement_.params=["ariaLabel","content","disabled","index"],t.renderControlElement_.types={ariaLabel:"any",content:"any",disabled:"any",index:"any"},e=t,t});var o=function(e){function t(){return babelHelpers.classCallCheck(this,t),babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return babelHelpers.inherits(t,e),t}(t);n.register(o,e),this.metalNamed.Pagination=this.metalNamed.Pagination||{},this.metalNamed.Pagination.Pagination=o,this.metalNamed.Pagination.templates=e,this.metal.Pagination=e}.call(this),function(){var e=this.metalNamed.metal.core,t=this.metalNamed.metal.object,n=this.metal.Pagination,o=this.metal.component,i=this.metal.Soy,a=function(e){function t(){return babelHelpers.classCallCheck(this,t),babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"created",value:function(){this.lastState_={page:this.page},this.on(t.Events.CHANGE_REQUEST,this.defaultChangeRequestFn_,!0)}},{key:"defaultChangeRequestFn_",value:function(e){this.setState_(e.state)}},{key:"dispatchRequest_",value:function(e){this.emit(t.Events.CHANGE_REQUEST,{lastState:this.lastState_,offset:this.offset,state:e,total:this.total})}},{key:"getOffsetPageNumber",value:function(){return this.offset+this.page}},{key:"getOffsetTotalPages",value:function(){return this.offset+this.total}},{key:"next",value:function(){var e=this.page,t=this.total;this.dispatchRequest_({page:this.circular&&e===t-1?0:Math.min(t,++e)})}},{key:"onClickItem",value:function(e){var t=e.delegateTarget;e.preventDefault();var n=parseInt(t.getAttribute("data-index"));this.dispatchRequest_({page:n})}},{key:"onClickControls",value:function(e){var t=e.delegateTarget;e.preventDefault();var n=parseInt(t.getAttribute("data-control-index"));switch(n){case 0:this.prev();break;case 1:this.next()}}},{key:"prev",value:function(){var e=this.page,t=this.total;this.dispatchRequest_({page:this.circular&&0===e?t-1:Math.max(0,--e)})}},{key:"setState_",value:function(e){this.page=e.page,this.lastState_=e}}]),t}(o);i.register(a,n),a.STATE={circular:{validator:e.isBoolean,value:!0},offset:{validator:e.isNumber,value:1},page:{validator:e.isNumber,value:0},showControls:{validator:e.isBoolean,value:!0},strings:{validator:e.isObject,setter:function(e){return t.mixin({next:"Next",nextAriaLabel:"Next",prev:"Prev",prevAriaLabel:"Previous"},e)},valueFn:function(){}},total:{validator:e.isNumber,value:0}},a.Events={CHANGE_REQUEST:"changeRequest"},this.metal.Pagination=a}.call(this),function(){var e=this.metal.metal,t=this.metal.dom,n=this.metalNamed.position.Align,o=this.metal.component,i=this.metalNamed.events.EventHandler,a=function(e){function n(){return babelHelpers.classCallCheck(this,n),babelHelpers.possibleConstructorReturn(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return babelHelpers.inherits(n,e),babelHelpers.createClass(n,[{key:"attached",value:function(){this.align(),this.syncTriggerEvents(this.triggerEvents)}},{key:"created",value:function(){this.eventHandler_=new i}},{key:"detached",value:function(){this.eventHandler_.removeAllListeners()}},{key:"disposeInternal",value:function(){babelHelpers.get(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"disposeInternal",this).call(this),clearTimeout(this.delay_)}},{key:"align",value:function(e){this.syncAlignElement(e||this.alignElement)}},{key:"callAsync_",value:function(e,t){clearTimeout(this.delay_),this.delay_=setTimeout(e.bind(this),t)}},{key:"handleHide",value:function(e){var t=e.delegateTarget,n=t&&t!==this.alignElement;this.callAsync_(function(){this.locked_||(n?this.alignElement=t:(this.visible=!1,this.syncVisible(!1)))},this.delay[1])}},{key:"handleShow",value:function(e){var t=e.delegateTarget;babelHelpers.get(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"syncVisible",this).call(this,!0),this.callAsync_(function(){this.alignElement=t,this.visible=!0},this.delay[0])}},{key:"handleToggle",value:function(e){this.visible?this.handleHide(e):this.handleShow(e)}},{key:"lock",value:function(){this.locked_=!0}},{key:"unlock",value:function(e){this.locked_=!1,this.handleHide(e)}},{key:"syncAlignElement",value:function(e,t){if(t&&e.removeAttribute("aria-describedby"),e){var o=e.getAttribute("data-title");o&&(this.title=o),this.inDocument&&(this.alignedPosition=n.Align.align(this.element,e,this.position))}}},{key:"syncPosition",value:function(){this.syncAlignElement(this.alignElement)}},{key:"syncSelector",value:function(){this.syncTriggerEvents(this.triggerEvents)}},{key:"syncTriggerEvents",value:function(e){if(this.inDocument){this.eventHandler_.removeAllListeners();var n=this.selector;n&&(this.eventHandler_.add(this.on("mouseenter",this.lock),this.on("mouseleave",this.unlock)),e[0]===e[1]?this.eventHandler_.add(t.delegate(document,e[0],n,this.handleToggle.bind(this))):this.eventHandler_.add(t.delegate(document,e[0],n,this.handleShow.bind(this)),t.delegate(document,e[1],n,this.handleHide.bind(this))))}}},{key:"syncVisible",value:function(){this.align()}}]),n}(o);a.Align=n,a.STATE={alignedPosition:{validator:a.Align.isValidPosition},alignElement:{setter:t.toElement},delay:{validator:Array.isArray,value:[500,250]},triggerEvents:{validator:Array.isArray,value:["mouseenter","mouseleave"]},selector:{validator:e.isString},position:{validator:a.Align.isValidPosition,value:a.Align.Bottom},title:{}},a.PositionClasses=["top","right","bottom","left"],this.metal.TooltipBase=a}.call(this),function(){var e,t=this.metal.component,n=this.metal.Soy;goog.loadModule(function(t){function n(e,t,n){e=e||{},o.asserts.assertType(null==e.title||e.title instanceof Function||e.title instanceof goog.soy.data.SanitizedContent||e.title instanceof i.UnsanitizedText||goog.isString(e.title),"title",e.title,"?soydata.SanitizedHtml|string|undefined");var a=e.title,c=["top","top","right","bottom","bottom","bottom","left","top"],d=null!=e.alignedPosition?e.alignedPosition:e.position,h=null!=d?c[d]:"bottom";if(r("div",null,null,"class","tooltip "+h+(e.elementClasses?" "+e.elementClasses:""),"role","tooltip"),l("div",null,null,"class","tooltip-arrow"),r("section",null,null,"class","tooltip-inner"),a){var g=a;"function"==typeof g?g():null!=g&&u(g)}s("section"),s("div")}goog.module("Tooltip.incrementaldom");var o=goog.require("soy"),i=goog.require("soydata");goog.require("goog.asserts"),goog.require("soy.asserts"),goog.require("goog.i18n.bidi"),goog.require("goog.string");var a=goog.require("incrementaldom"),r=a.elementOpen,s=a.elementClose,l=a.elementVoid,u=(a.elementOpenStart,a.elementOpenEnd,a.text);a.attr;return t.render=n,goog.DEBUG&&(n.soyTemplateName="Tooltip.render"),t.render.params=["title","alignedPosition","elementClasses","position"],t.render.types={title:"html|string",alignedPosition:"any",elementClasses:"any",position:"any"},e=t,t});var o=function(e){function t(){return babelHelpers.classCallCheck(this,t),babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return babelHelpers.inherits(t,e),t}(t);n.register(o,e),this.metalNamed.Tooltip=this.metalNamed.Tooltip||{},this.metalNamed.Tooltip.Tooltip=o,this.metalNamed.Tooltip.templates=e,this.metal.Tooltip=e}.call(this),function(){var e=this.metal.dom,t=this.metal.Soy,n=this.metal.TooltipBase,o=this.metal.Tooltip,i=function(t){function n(){return babelHelpers.classCallCheck(this,n),babelHelpers.possibleConstructorReturn(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return babelHelpers.inherits(n,t),babelHelpers.createClass(n,[{key:"hideCompletely_",value:function(){this.visible||(this.element.style.display="none")}},{key:"syncVisible",value:function(t){t?this.element.style.display="":(e.once(this.element,"animationend",this.hideCompletely_.bind(this)),e.once(this.element,"transitionend",this.hideCompletely_.bind(this))),this.element.style.opacity=t?1:"",babelHelpers.get(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"syncVisible",this).call(this,t)}}]),n}(n);t.register(i,o),i.Align=n.Align,this.metal.Tooltip=i,this.metalNamed.Tooltip=this.metalNamed.Tooltip||{},this.metalNamed.Tooltip.Tooltip=i,this.metalNamed.Tooltip.TooltipBase=n}.call(this),function(){var e,t=this.metal.component,n=this.metal.Soy;goog.loadModule(function(t){function n(e,t,n){e=e||{},o.asserts.assertType(null==e.content||e.content instanceof Function||e.content instanceof goog.soy.data.SanitizedContent||e.content instanceof i.UnsanitizedText||goog.isString(e.content),"content",e.content,"?soydata.SanitizedHtml|string|undefined");var a=e.content;o.asserts.assertType(null==e.title||e.title instanceof Function||e.title instanceof goog.soy.data.SanitizedContent||e.title instanceof i.UnsanitizedText||goog.isString(e.title),"title",e.title,"?soydata.SanitizedHtml|string|undefined");var c=e.title,d=["top","top","right","bottom","bottom","bottom","left","top"],h=null!=e.alignedPosition?e.alignedPosition:e.position,g=null!=h?d[h]:"bottom";if(r("div",null,null,"class","popover "+g+(e.elementClasses?" "+e.elementClasses:""),"role","tooltip"),(e.withArrow||null==e.withArrow)&&l("div",null,null,"class","arrow"),r("h3",null,null,"class","popover-title"+(c?"":" hidden")),c){var p=c;"function"==typeof p?p():null!=p&&u(p)}if(s("h3"),r("div",null,null,"class","popover-content"),r("p"),a){var m=a;"function"==typeof m?m():null!=m&&u(m)}s("p"),s("div"),s("div")}goog.module("Popover.incrementaldom");var o=goog.require("soy"),i=goog.require("soydata");goog.require("goog.asserts"),goog.require("soy.asserts"),goog.require("goog.i18n.bidi"),goog.require("goog.string");var a=goog.require("incrementaldom"),r=a.elementOpen,s=a.elementClose,l=a.elementVoid,u=(a.elementOpenStart,a.elementOpenEnd,a.text);a.attr;return t.render=n,goog.DEBUG&&(n.soyTemplateName="Popover.render"),t.render.params=["content","title","alignedPosition","elementClasses","position","withArrow"],t.render.types={content:"html|string",title:"html|string",alignedPosition:"any",elementClasses:"any",position:"any",withArrow:"any"},e=t,t});var o=function(e){function t(){return babelHelpers.classCallCheck(this,t),babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return babelHelpers.inherits(t,e),t}(t);n.register(o,e),this.metalNamed.Popover=this.metalNamed.Popover||{},this.metalNamed.Popover.Popover=o,this.metalNamed.Popover.templates=e,this.metal.Popover=e}.call(this),function(){var e=this.metal.metal,t=this.metal.Soy,n=this.metalNamed.Tooltip.TooltipBase,o=this.metal.Popover,i=function(e){function t(){return babelHelpers.classCallCheck(this,t),babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"syncAlignElement",value:function(e){if(babelHelpers.get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"syncAlignElement",this).call(this,e),e){var n=e.getAttribute("data-content");n&&(this.content=n)}}},{key:"syncVisible",value:function(e){this.element.style.display=e?"block":"",babelHelpers.get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"syncVisible",this).call(this,e)}}]),t}(n);t.register(i,o),i.STATE={content:{validator:function(t){return e.isString(t)||e.isFunction(t)}},triggerEvents:{validator:Array.isArray,value:["click","click"]},withArrow:{value:!0}},i.Align=n.Align,this.metal.Popover=i}.call(this),function(){var e,t=this.metal.component,n=this.metal.Soy;goog.loadModule(function(t){function n(e,t,n){e=e||{};var o=e.max?e.max:100,s=e.min?e.min:0,l=e.value?e.value:0;i("div",null,null,"class","progress "+(e.elementClasses?" "+e.elementClasses:""),"role","progressbar","aria-valuemax",o,"aria-valuemin",s,"aria-valuenow",l,"tabindex","0");var u=Math.floor(100*(l-s)/(o-s));i("div",null,null,"class","progress-bar"+(e.barClass?" "+e.barClass:""),"style","width: "+u+"%"),r((goog.asserts.assert(null!=(e.label?e.label:"")),e.label?e.label:"")),a("div"),a("div")}goog.module("ProgressBar.incrementaldom");goog.require("soy"),goog.require("soydata");goog.require("goog.i18n.bidi"),goog.require("goog.asserts");var o=goog.require("incrementaldom"),i=o.elementOpen,a=o.elementClose,r=(o.elementVoid,o.elementOpenStart,o.elementOpenEnd,o.text);o.attr;return t.render=n,goog.DEBUG&&(n.soyTemplateName="ProgressBar.render"),t.render.params=["barClass","elementClasses","label","max","min","value"],t.render.types={barClass:"any",elementClasses:"any",label:"any",max:"any",min:"any",value:"any"},e=t,t});var o=function(e){function t(){return babelHelpers.classCallCheck(this,t),babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return babelHelpers.inherits(t,e),t}(t);n.register(o,e),this.metalNamed.ProgressBar=this.metalNamed.ProgressBar||{},this.metalNamed.ProgressBar.ProgressBar=o,this.metalNamed.ProgressBar.templates=e,this.metal.ProgressBar=e}.call(this),function(){var e=this.metal.metal,t=this.metal.component,n=this.metal.Soy,o=this.metal.ProgressBar,i=function(e){function t(){return babelHelpers.classCallCheck(this,t),babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"setterValueFn_",value:function(e){return e<this.min&&(e=this.min),e>this.max&&(e=this.max),e}},{key:"syncMax",value:function(e){e<this.value&&(this.value=e)}},{key:"syncMin",value:function(e){e>this.value&&(this.value=e)}}]),t}(t);i.STATE={barClass:{validator:e.isString},label:{validator:function(t){return!e.isDefAndNotNull(t)||e.isString(t)}},max:{validator:e.isNumber,value:100},min:{validator:e.isNumber,value:0},value:{setter:"setterValueFn_",validator:e.isNumber,value:0}},n.register(i,o),this.metal.ProgressBar=i}.call(this),function(){var e,t=this.metal.component,n=this.metal.Soy;goog.loadModule(function(t){function n(e,t,n){i("div",null,null,"aria-valuemin",e.options[0].value,"aria-valuemax",e.options[e.options.length-1].value,"aria-valuenow",e.options[e.value]?e.options[e.value].value:"","aria-valuetext",e.options[e.value]?e.options[e.value].title:"","class","rating","data-onmouseleave","handleMouseLeaveEvent"),e.label&&(i("label",null,null,"class","rate-label"),s((goog.asserts.assert(null!=e.label),e.label)),a("label")),i("div",null,null,"class","rating-items");for(var o=e.options.length,l=0;l<o;l++)r("button",null,null,"aria-disabled",e.disabled,"aria-pressed",l<=e.value,"aria-label",e.options[l].title?e.options[l].title:l,"class","btn rating-item "+(l<=e.value?e.cssClasses.on:e.cssClasses.off),"data-index",l,"data-onclick","handleClickEvent","data-onmouseover","handleMouseOverEvent","disabled",e.disabled,"title",e.options[l].title,"type","button");a("div"),i("input",null,null,"type","hidden","aria-hidden","true","name",e.inputHiddenName,"value",e.options[e.value]?e.options[e.value].value:e.value),a("input"),a("div")}goog.module("Rating.incrementaldom");goog.require("soy"),goog.require("soydata");goog.require("goog.i18n.bidi"),goog.require("goog.asserts");var o=goog.require("incrementaldom"),i=o.elementOpen,a=o.elementClose,r=o.elementVoid,s=(o.elementOpenStart,o.elementOpenEnd,o.text);o.attr;return t.render=n,goog.DEBUG&&(n.soyTemplateName="Rating.render"),t.render.params=["label","cssClasses","disabled","inputHiddenName","options","value"],t.render.types={label:"any",cssClasses:"any",disabled:"any",inputHiddenName:"any",options:"any",value:"any"},e=t,t});var o=function(e){function t(){return babelHelpers.classCallCheck(this,t),babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return babelHelpers.inherits(t,e),t}(t);n.register(o,e),this.metalNamed.Rating=this.metalNamed.Rating||{},this.metalNamed.Rating.Rating=o,this.metalNamed.Rating.templates=e,this.metal.Rating=e}.call(this),function(){var e=this.metal.metal,t=this.metal.component,n=this.metal.Soy,o=this.metal.Rating,i=function(e){function t(){return babelHelpers.classCallCheck(this,t),babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"created",value:function(){this.ratingClicked_=this.value}},{key:"handleClickEvent",value:function(e){if(!this.disabled){var t=parseInt(e.delegateTarget.getAttribute("data-index"),10);t===this.ratingClicked_&&this.canReset?this.reset():this.value=t,this.ratingClicked_=this.value}}},{key:"handleMouseLeaveEvent",value:function(){this.setPreviousRate_()}},{key:"handleMouseOverEvent",value:function(e){if(!this.disabled){var t=Number.parseInt(e.delegateTarget.getAttribute("data-index"),10);this.value=t}}},{key:"reset",value:function(){this.value=-1,this.ratingClicked_=-1}},{key:"setPreviousRate_",value:function(){this.value=this.ratingClicked_}}]),t}(t);i.STATE={canReset:{value:!0,validator:e.isBoolean},cssClasses:{value:{off:"glyphicon glyphicon-star-empty",on:"glyphicon glyphicon-star"}},disabled:{value:!1,validator:e.isBoolean},inputHiddenName:{value:"rate",validator:e.isString},label:{value:"",validator:e.isString},options:{validator:Array.isArray,value:[{value:1,title:""},{value:2,title:""},{value:3,title:""},{value:4,title:""},{value:5,title:""}]},value:{validator:e.isNumber,value:-1}},n.register(i,o),this.metal.Rating=i}.call(this),function(){var e=this.metal.metal,t=this.metal.dom,n=this.metal.position,o=this.metal.state,i=function(e){function o(e){babelHelpers.classCallCheck(this,o);var n=babelHelpers.possibleConstructorReturn(this,(o.__proto__||Object.getPrototypeOf(o)).call(this,e));return n.regions=[],n.scrollHandle_=t.on(n.scrollElement,"scroll",n.checkPosition.bind(n)),n.init(),n}return babelHelpers.inherits(o,e),babelHelpers.createClass(o,[{key:"disposeInternal",value:function(){this.deactivateAll(),this.scrollHandle_.dispose(),babelHelpers.get(o.prototype.__proto__||Object.getPrototypeOf(o.prototype),"disposeInternal",this).call(this)}},{key:"activate",value:function(e){this.activeIndex>=0&&this.deactivate(this.activeIndex),this.activeIndex=e,t.addClasses(this.getElementForIndex(e),this.activeClass)}},{key:"checkPosition",value:function(){var e=this.getScrollHeight_(),t=n.getScrollTop(this.scrollElement);if(e<t+this.offset)return void this.activate(this.regions.length-1);var o=this.findBestRegionAt_();o!==this.activeIndex&&(o===-1?this.deactivateAll():this.activate(o))}},{key:"deactivate",value:function(e){t.removeClasses(this.getElementForIndex(e),this.activeClass)}},{key:"deactivateAll",value:function(){for(var e=0;e<this.regions.length;e++)this.deactivate(e);this.activeIndex=-1}},{key:"findBestRegionAt_",value:function(){var e=-1,t=this.getCurrentPosition();if(this.regions.length>0&&t>=this.regions[0].top)for(var n=0;n<this.regions.length;n++){var o=this.regions[n],i=n===this.regions.length-1;if(t>=o.top&&(i||t<this.regions[n+1].top)){e=n;break}}return e}},{key:"getCurrentPosition",value:function(){var e=n.getScrollTop(this.scrollElement);return e+this.offset+this.scrollElementRegion_.top}},{key:"getElementForIndex",value:function(e){return this.resolveElement(this.regions[e].link)}},{key:"getScrollHeight_",value:function(){var e=n.getHeight(this.scrollElement);return e+=this.scrollElementRegion_.top,e-=n.getClientHeight(this.scrollElement)}},{key:"init",value:function(){this.refresh(),this.on("elementChanged",this.refresh),this.on("offsetChanged",this.checkPosition),this.on("scrollElementChanged",this.onScrollElementChanged_),this.on("selectorChanged",this.refresh)}},{key:"onScrollElementChanged_",value:function(e){this.refresh(),this.scrollHandle_.dispose(),this.scrollHandle_=t.on(e.newVal,"scroll",this.checkPosition.bind(this))}},{key:"refresh",value:function(){this.deactivateAll(),this.scrollElementRegion_=n.getRegion(this.scrollElement),this.scrollHeight_=this.getScrollHeight_(),this.regions=[];for(var e=this.element.querySelectorAll(this.selector),t=n.getScrollTop(this.scrollElement),o=0;o<e.length;++o){var i=e[o];if(i.hash&&i.hash.length>1){var a=document.getElementById(i.hash.substring(1));if(a){var r=n.getRegion(a);this.regions.push({link:i,top:r.top+t,bottom:r.bottom+t})}}}this.sortRegions_(),this.deactivateAll(),this.checkPosition()}},{key:"sortRegions_",value:function(){this.regions.sort(function(e,t){return e.top-t.top})}}]),o}(o);i.STATE={activeClass:{validator:e.isString,value:"active"},activeIndex:{validator:e.isNumber,value:-1},resolveElement:{validator:e.isFunction,value:e.identityFunction},scrollElement:{setter:t.toElement,value:document},offset:{validator:e.isNumber,value:0},element:{setter:t.toElement},selector:{validator:e.isString,value:"a"}},this.metal.Scrollspy=i}.call(this),function(){var e,t=this.metal.component,n=this.metal.Soy;goog.loadModule(function(t){function o(e,t,n){var o;i.asserts.assertType(null==e.label||e.label instanceof Function||e.label instanceof goog.soy.data.SanitizedContent||e.label instanceof a.UnsanitizedText||goog.isString(e.label),"label",e.label,"?soydata.SanitizedHtml|string|undefined");var r=e.label;s("div",null,null,"class","select"+(e.elementClasses?" "+e.elementClasses:""),"data-onkeydown","handleKeyDown_");var h=null!=e.selectedIndex?e.selectedIndex:r||0==e.items.length?-1:0;s("input",null,null,"type","hidden","name",e.hiddenInputName?e.hiddenInputName:"","value",h==-1?"":e.values?e.values[h]:""),l("input");var g=function(){for(var t=e.items,n=t.length,i=0;i<n;i++){var a=t[i];s("li",null,null,"data-onclick",null==(o=e.handleItemClick_)?"":o,"data-onkeydown",null==(o=e.handleItemKeyDown_)?"":o,"class","select-option"+(h==i?" selected":"")),s("a",null,null,"href","javascript:;");var r=a;"function"==typeof r?r():null!=r&&c(r),l("a"),l("li")}},p=function(){if(s("button",null,null,"class",(e.buttonClass?e.buttonClass:"")+" dropdown-select","type","button","data-onclick","toggle","aria-haspopup","true","aria-expanded",e.expanded_?"true":"false"),h==-1){var t=r;"function"==typeof t?t():null!=t&&c(t)}else{var n=e.items[h];"function"==typeof n?n():null!=n&&c(n)}c(" "),u("span",null,null,"class",e.arrowClass?e.arrowClass:"caret"),l("button")};d({body:g,events:{stateSynced:e.handleDropdownStateSynced_},expanded:e.expanded_,header:p,ref:"dropdown"},null,n),l("div")}goog.module("Select.incrementaldom");var i=goog.require("soy"),a=goog.require("soydata");goog.require("goog.asserts"),goog.require("soy.asserts"),goog.require("goog.i18n.bidi"),goog.require("goog.string");var r=goog.require("incrementaldom"),s=r.elementOpen,l=r.elementClose,u=r.elementVoid,c=(r.elementOpenStart,r.elementOpenEnd,r.text),d=(r.attr,n.getTemplate("Dropdown.incrementaldom","render"));return t.render=o,goog.DEBUG&&(o.soyTemplateName="Select.render"),t.render.params=["label","arrowClass","buttonClass","elementClasses","expanded_","handleDropdownStateSynced_","handleItemClick_","handleItemKeyDown_","hiddenInputName","items","values","selectedIndex"],t.render.types={label:"html|string",arrowClass:"any",buttonClass:"any",elementClasses:"any",expanded_:"any",handleDropdownStateSynced_:"any",handleItemClick_:"any",handleItemKeyDown_:"any",hiddenInputName:"any",items:"any",values:"any",selectedIndex:"any"},e=t,t});var o=function(e){function t(){return babelHelpers.classCallCheck(this,t),babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return babelHelpers.inherits(t,e),t}(t);n.register(o,e),this.metalNamed.Select=this.metalNamed.Select||{},this.metalNamed.Select.Select=o,this.metalNamed.Select.templates=e,this.metal.Select=e}.call(this),function(){var e=this.metal.metal,t=this.metal.dom,n=this.metal.component,o=this.metal.Soy,i=this.metal.Select,a=function(n){function i(){return babelHelpers.classCallCheck(this,i),babelHelpers.possibleConstructorReturn(this,(i.__proto__||Object.getPrototypeOf(i)).apply(this,arguments))}return babelHelpers.inherits(i,n),babelHelpers.createClass(i,[{key:"findItemIndex_",value:function(e){for(var t=this.element.querySelectorAll("li"),n=0;n<t.length;n++)if(t.item(n)===e)return n}},{key:"focusIndex_",value:function(e){var t=this.element.querySelector(".select-option:nth-child("+(e+1)+") a");t&&(this.focusedIndex_=e,t.focus())}},{key:"getDropdown",value:function(){return this.components.dropdown}},{key:"handleDropdownStateSynced_",value:function(e){this.openedWithKeyboard_?(this.focusIndex_(0),this.openedWithKeyboard_=!1):this.closedWithKeyboard_?(this.element.querySelector(".dropdown-select").focus(),this.closedWithKeyboard_=!1):e.changes.expanded&&(this.focusedIndex_=null),this.expanded_=this.getDropdown().expanded}},{key:"handleItemClick_",value:function(e){this.selectItem_(e.delegateTarget),e.preventDefault()}},{key:"handleItemKeyDown_",value:function(e){13!==e.keyCode&&32!==e.keyCode||(this.closedWithKeyboard_=!0,this.selectItem_(e.delegateTarget),e.preventDefault())}},{key:"handleKeyDown_",value:function(n){if(this.expanded_)switch(n.keyCode){case 27:this.closedWithKeyboard_=!0,this.expanded_=!1;break;case 38:this.focusedIndex_=e.isDefAndNotNull(this.focusedIndex_)?this.focusedIndex_:1,this.focusIndex_(0===this.focusedIndex_?this.items.length-1:this.focusedIndex_-1),n.preventDefault();break;case 40:this.focusedIndex_=e.isDefAndNotNull(this.focusedIndex_)?this.focusedIndex_:-1,this.focusIndex_(this.focusedIndex_===this.items.length-1?0:this.focusedIndex_+1),n.preventDefault()}else if((13===n.keyCode||32===n.keyCode)&&t.hasClass(n.target,"dropdown-select"))return this.openedWithKeyboard_=!0,this.expanded_=!0,void n.preventDefault()}},{key:"selectItem_",value:function(e){this.selectedIndex=this.findItemIndex_(e),this.expanded_=!1}},{key:"setItems_",value:function(e){return e.map(function(e){return o.toIncDom(e)})}}]),i}(n);o.register(a,i),a.STATE={arrowClass:{value:"caret"},buttonClass:{validator:e.isString,value:"btn btn-default"},expanded_:{validator:e.isBoolean,value:!1,internal:!0},hiddenInputName:{validator:e.isString},items:{setter:"setItems_",validator:function(e){return e instanceof Array},valueFn:function(){return[]}},label:{validator:e.isString},selectedIndex:{validator:e.isNumber,valueFn:function(){return this.label||!this.items.length?-1:0}},values:{validator:function(e){return e instanceof Array}}},a.ELEMENT_CLASSES="select",this.metal.Select=a}.call(this),function(){var e=this.metal.metal,t=this.metal.state,n=this.metal.position,o=function(t){function o(e){babelHelpers.classCallCheck(this,o);var t=babelHelpers.possibleConstructorReturn(this,(o.__proto__||Object.getPrototypeOf(o)).call(this,e));return t.scrollTimeout_=null,t}return babelHelpers.inherits(o,t),babelHelpers.createClass(o,[{key:"disposeInternal",value:function(){babelHelpers.get(o.prototype.__proto__||Object.getPrototypeOf(o.prototype),"disposeInternal",this).call(this),this.stop()}},{key:"getRegionWithoutScroll_",value:function(t){if(e.isDocument(t)){var o=window.innerHeight,i=window.innerWidth;return n.makeRegion(o,o,0,i,0,i)}return n.getRegion(t)}},{key:"scroll",value:function(e,t,n){this.stop(),this.scrollTimeout_=setTimeout(this.scrollInternal_.bind(this,e,t,n),this.delay)}},{key:"scrollElement_",value:function(t,n,o){e.isDocument(t)?window.scrollBy(n,o):(t.scrollTop+=o,t.scrollLeft+=n)}},{key:"scrollInternal_",value:function(e,t,o){for(var i=0;i<e.length;i++){var a=this.getRegionWithoutScroll_(e[i]);if(n.pointInsideRegion(t,o,a)){var r=0,s=0,l=n.getScrollTop(e[i]),u=n.getScrollLeft(e[i]);if(u>0&&Math.abs(t-a.left)<=this.maxDistance?r-=this.speed:Math.abs(t-a.right)<=this.maxDistance&&(r+=this.speed),l>0&&Math.abs(o-a.top)<=this.maxDistance?s-=this.speed:Math.abs(o-a.bottom)<=this.maxDistance&&(s+=this.speed),r||s){this.scrollElement_(e[i],r,s),this.scroll(e,t,o);break}}}}},{key:"stop",value:function(){clearTimeout(this.scrollTimeout_)}}]),o}(t);o.STATE={delay:{validator:e.isNumber,value:50},maxDistance:{validator:e.isNumber,value:20},speed:{validator:e.isNumber,value:20}},this.metal.DragAutoScroll=o}.call(this),function(){var e=this.metal.dom,t=this.metalNamed.events.EventEmitter,n=this.metalNamed.events.EventHandler,o=this.metal.position,i=function(t){function i(){babelHelpers.classCallCheck(this,i);var e=babelHelpers.possibleConstructorReturn(this,(i.__proto__||Object.getPrototypeOf(i)).call(this));return e.handler_=new n,e.scrollPositions_=[],e}return babelHelpers.inherits(i,t),babelHelpers.createClass(i,[{key:"disposeInternal",value:function(){babelHelpers.get(i.prototype.__proto__||Object.getPrototypeOf(i.prototype),"disposeInternal",this).call(this),this.stop(),this.handler_=null}},{key:"handleScroll_",value:function(e,t){var n={scrollLeft:o.getScrollLeft(t.currentTarget),scrollTop:o.getScrollTop(t.currentTarget)},i=this.scrollPositions_[e];this.scrollPositions_[e]=n,this.emit("scrollDelta",{deltaX:n.scrollLeft-i.scrollLeft,deltaY:n.scrollTop-i.scrollTop})}},{key:"start",value:function(t,n){if("fixed"!==getComputedStyle(t).position)for(var i=0;i<n.length;i++)if(e.contains(n[i],t)){this.scrollPositions_.push({scrollLeft:o.getScrollLeft(n[i]),scrollTop:o.getScrollTop(n[i])});var a=this.scrollPositions_.length-1;this.handler_.add(e.on(n[i],"scroll",this.handleScroll_.bind(this,a)))}}},{key:"stop",value:function(){this.handler_.removeAllListeners(),this.scrollPositions_=[]}}]),i}(t);this.metal.DragScrollDelta=i}.call(this),function(){var e=this.metal.dom,t=function(){function t(){babelHelpers.classCallCheck(this,t)}return babelHelpers.createClass(t,null,[{key:"attachDocListeners",value:function(n,o){var i=document;n&&(i=t.getDocShim(),i.style.display="block");var a=Object.keys(o);return a.map(function(t){var n="touch"===t.substr(0,5);return e.on(n?document:i,t,o[t])})}},{key:"getDocShim",value:function(){return t.docShim_||(t.docShim_=document.createElement("div"),t.docShim_.className="shim",t.docShim_.style.position="fixed",t.docShim_.style.top=0,t.docShim_.style.left=0,
t.docShim_.style.width="100%",t.docShim_.style.height="100%",t.docShim_.style.display="none",t.docShim_.style.opacity=0,t.docShim_.style.zIndex=9999,e.enterDocument(t.docShim_)),t.docShim_}},{key:"hideDocShim",value:function(){t.getDocShim().style.display="none"}},{key:"reset",value:function(){t.docShim_&&(e.exitDocument(t.docShim_),t.docShim_=null)}}]),t}();t.docShim_=null,this.metal.DragShim=t}.call(this),function(){var e=this.metalNamed.metal.core,t=this.metalNamed.metal.object,n=this.metal.dom,o=this.metal.DragAutoScroll,i=this.metal.DragScrollDelta,a=this.metal.DragShim,r=this.metalNamed.events.EventHandler,s=this.metal.position,l=this.metal.state,u=function(l){function u(e){babelHelpers.classCallCheck(this,u);var t=babelHelpers.possibleConstructorReturn(this,(u.__proto__||Object.getPrototypeOf(u)).call(this,e));return t.activeDragPlaceholder_=null,t.activeDragSource_=null,t.distanceDragged_=0,t.dragging_=!1,t.dragHandler_=new r,t.dragScrollDelta_=new i,t.mousePos_=null,t.mouseSourceDelta_=null,t.sourceHandler_=new r,t.sourceRegion_=null,t.sourceRelativePos_=null,t.attachSourceEvents_(),t.on(u.Events.DRAG,t.defaultDragFn_,!0),t.on(u.Events.END,t.defaultEndFn_,!0),t.on("sourcesChanged",t.handleSourcesChanged_.bind(t)),t.on("containerChanged",t.handleContainerChanged_.bind(t)),t.dragScrollDelta_.on("scrollDelta",t.handleScrollDelta_.bind(t)),n.on(document,"keydown",t.handleKeyDown_.bind(t)),t}return babelHelpers.inherits(u,l),babelHelpers.createClass(u,[{key:"attachSourceEvents_",value:function(){for(var t={keydown:this.handleSourceKeyDown_.bind(this),mousedown:this.handleDragStartEvent_.bind(this),touchstart:this.handleDragStartEvent_.bind(this)},o=Object.keys(t),i=0;i<o.length;i++){var a=t[o[i]];e.isString(this.sources)?this.sourceHandler_.add(n.delegate(this.container,o[i],this.sources,a)):this.sourceHandler_.add(n.on(this.sources,o[i],a))}}},{key:"buildEventObject_",value:function(){return{placeholder:this.activeDragPlaceholder_,source:this.activeDragSource_,relativeX:this.sourceRelativePos_.x,relativeY:this.sourceRelativePos_.y,x:this.sourceRegion_.left,y:this.sourceRegion_.top}}},{key:"calculateInitialPosition_",value:function(n){this.sourceRegion_=t.mixin({},s.getRegion(this.activeDragSource_,!0)),this.sourceRelativePos_={x:this.activeDragSource_.offsetLeft,y:this.activeDragSource_.offsetTop},e.isDef(n.clientX)&&(this.mousePos_={x:n.clientX,y:n.clientY},this.mouseSourceDelta_={x:this.sourceRegion_.left-this.mousePos_.x,y:this.sourceRegion_.top-this.mousePos_.y})}},{key:"canStartDrag_",value:function(t){return!this.disabled&&(!e.isDef(t.button)||0===t.button)&&!this.isDragging()&&this.isWithinHandle_(t.target)}},{key:"cleanUpAfterDragging_",value:function(){this.activeDragPlaceholder_&&(this.activeDragPlaceholder_.setAttribute("aria-grabbed","false"),n.removeClasses(this.activeDragPlaceholder_,this.draggingClass),this.dragPlaceholder===u.Placeholder.CLONE&&n.exitDocument(this.activeDragPlaceholder_)),this.activeDragPlaceholder_=null,this.activeDragSource_=null,this.sourceRegion_=null,this.sourceRelativePos_=null,this.mousePos_=null,this.mouseSourceDelta_=null,this.dragging_=!1,this.dragHandler_.removeAllListeners()}},{key:"cloneActiveDrag_",value:function(){var e=this.activeDragSource_.cloneNode(!0);return e.style.position="absolute",e.style.left=this.sourceRelativePos_.x+"px",e.style.top=this.sourceRelativePos_.y+"px",n.append(this.activeDragSource_.parentNode,e),e}},{key:"constrain_",value:function(e){this.constrainToAxis_(e),this.constrainToSteps_(e),this.constrainToRegion_(e)}},{key:"constrainToAxis_",value:function(e){"x"===this.axis?(e.top=this.sourceRegion_.top,e.bottom=this.sourceRegion_.bottom):"y"===this.axis&&(e.left=this.sourceRegion_.left,e.right=this.sourceRegion_.right)}},{key:"constrainToRegion_",value:function(n){var o=this.constrain;o&&(e.isFunction(o)?t.mixin(n,o(n)):(e.isElement(o)&&(o=s.getRegion(o,!0)),n.left<o.left?n.left=o.left:n.right>o.right&&(n.left-=n.right-o.right),n.top<o.top?n.top=o.top:n.bottom>o.bottom&&(n.top-=n.bottom-o.bottom),n.right=n.left+n.width,n.bottom=n.top+n.height))}},{key:"constrainToSteps_",value:function(e){var t=e.left-this.sourceRegion_.left,n=e.top-this.sourceRegion_.top;e.left-=t%this.steps.x,e.right=e.left+e.width,e.top-=n%this.steps.y,e.bottom=e.top+e.height}},{key:"createActiveDragPlaceholder_",value:function(){var t=this.dragPlaceholder;t===u.Placeholder.CLONE?this.activeDragPlaceholder_=this.cloneActiveDrag_():e.isElement(t)?this.activeDragPlaceholder_=t:this.activeDragPlaceholder_=this.activeDragSource_}},{key:"defaultDragFn_",value:function(){this.moveToPosition_(this.activeDragPlaceholder_)}},{key:"defaultEndFn_",value:function(){this.moveToPosition_(this.activeDragSource_)}},{key:"disposeInternal",value:function(){this.cleanUpAfterDragging_(),this.dragHandler_=null,this.dragScrollDelta_.dispose(),this.dragScrollDelta_=null,this.sourceHandler_.removeAllListeners(),this.sourceHandler_=null,babelHelpers.get(u.prototype.__proto__||Object.getPrototypeOf(u.prototype),"disposeInternal",this).call(this)}},{key:"getActiveDrag",value:function(){return this.activeDragSource_}},{key:"handleDragEndEvent_",value:function(){this.autoScroll&&this.autoScroll.stop(),this.dragScrollDelta_.stop(),a.hideDocShim(),this.emit(u.Events.END,this.buildEventObject_()),this.cleanUpAfterDragging_()}},{key:"handleDragMoveEvent_",value:function(e){var t=e.targetTouches?e.targetTouches[0]:e,n=t.clientX-this.mousePos_.x,o=t.clientY-this.mousePos_.y;this.mousePos_.x=t.clientX,this.mousePos_.y=t.clientY,(this.isDragging()||this.hasReachedMinimumDistance_(n,o))&&(this.isDragging()||(this.startDragging_(e),this.dragScrollDelta_.start(this.activeDragPlaceholder_,this.scrollContainers)),this.autoScroll&&this.autoScroll.scroll(this.scrollContainers,this.mousePos_.x,this.mousePos_.y),this.updatePositionFromMouse())}},{key:"handleDragStartEvent_",value:function(e){this.activeDragSource_=e.delegateTarget||e.currentTarget,this.canStartDrag_(e)&&(this.calculateInitialPosition_(e.targetTouches?e.targetTouches[0]:e),e.preventDefault(),"keydown"===e.type?this.startDragging_(e):(this.dragHandler_.add.apply(this.dragHandler_,a.attachDocListeners(this.useShim,{mousemove:this.handleDragMoveEvent_.bind(this),touchmove:this.handleDragMoveEvent_.bind(this),mouseup:this.handleDragEndEvent_.bind(this),touchend:this.handleDragEndEvent_.bind(this)})),this.distanceDragged_=0))}},{key:"handleKeyDown_",value:function(e){27===e.keyCode&&this.isDragging()&&this.handleDragEndEvent_()}},{key:"handleScrollDelta_",value:function(e){this.mouseSourceDelta_.x+=e.deltaX,this.mouseSourceDelta_.y+=e.deltaY,this.updatePositionFromMouse()}},{key:"handleSourceKeyDown_",value:function(e){if(this.isDragging()){var t=e.delegateTarget||e.currentTarget;if(t!==this.activeDragSource_)return;if(e.keyCode>=37&&e.keyCode<=40){var n=0,o=0,i=this.keyboardSpeed>=this.steps.x?this.keyboardSpeed:this.steps.x,a=this.keyboardSpeed>=this.steps.y?this.keyboardSpeed:this.steps.y;37===e.keyCode?n-=i:38===e.keyCode?o-=a:39===e.keyCode?n+=i:o+=a,this.updatePositionFromDelta(n,o),e.preventDefault()}else 13!==e.keyCode&&32!==e.keyCode&&27!==e.keyCode||this.handleDragEndEvent_()}else 13!==e.keyCode&&32!==e.keyCode||this.handleDragStartEvent_(e)}},{key:"handleContainerChanged_",value:function(){e.isString(this.sources)&&(this.sourceHandler_.removeAllListeners(),this.attachSourceEvents_()),this.prevScrollContainersSelector_&&(this.scrollContainers=this.prevScrollContainersSelector_)}},{key:"handleSourcesChanged_",value:function(){this.sourceHandler_.removeAllListeners(),this.attachSourceEvents_()}},{key:"hasReachedMinimumDistance_",value:function(e,t){return this.distanceDragged_+=Math.abs(e)+Math.abs(t),this.distanceDragged_>=this.minimumDragDistance}},{key:"isDragging",value:function(){return this.dragging_}},{key:"isWithinHandle_",value:function(t){var o=this.handles;return!o||(e.isString(o)?n.match(t,o+", "+o+" *"):n.contains(o,t))}},{key:"moveToPosition_",value:function(e){e.style.left=this.sourceRelativePos_.x+"px",e.style.top=this.sourceRelativePos_.y+"px"}},{key:"setterAutoScrollFn_",value:function(e){if(e!==!1)return new o(e)}},{key:"setterConstrainFn",value:function(t){return e.isString(t)&&(t=n.toElement(t)),t}},{key:"setterScrollContainersFn_",value:function(t){this.prevScrollContainersSelector_=e.isString(t)?t:null;var n=this.toElements_(t);return n.push(document),n}},{key:"startDragging_",value:function(e){this.dragging_=!0,this.createActiveDragPlaceholder_(),n.addClasses(this.activeDragPlaceholder_,this.draggingClass),this.activeDragPlaceholder_.setAttribute("aria-grabbed","true"),this.emit(u.Events.START,{originalEvent:e})}},{key:"toElements_",value:function(t){if(e.isString(t)){var n=this.container.querySelectorAll(t);return Array.prototype.slice.call(n,0)}return t?[t]:[]}},{key:"updatePosition",value:function(e){this.constrain_(e);var t=e.left-this.sourceRegion_.left,n=e.top-this.sourceRegion_.top;0===t&&0===n||(this.sourceRegion_=e,this.sourceRelativePos_.x+=t,this.sourceRelativePos_.y+=n,this.emit(u.Events.DRAG,this.buildEventObject_()))}},{key:"updatePositionFromDelta",value:function(e,n){var o=t.mixin({},this.sourceRegion_);o.left+=e,o.right+=e,o.top+=n,o.bottom+=n,this.updatePosition(o)}},{key:"updatePositionFromMouse",value:function(){var e={height:this.sourceRegion_.height,left:this.mousePos_.x+this.mouseSourceDelta_.x,top:this.mousePos_.y+this.mouseSourceDelta_.y,width:this.sourceRegion_.width};e.right=e.left+e.width,e.bottom=e.top+e.height,this.updatePosition(e)}},{key:"validateElementOrString_",value:function(t){return e.isString(t)||e.isElement(t)}},{key:"validatorConstrainFn",value:function(t){return e.isString(t)||e.isObject(t)}}]),u}(l);u.STATE={autoScroll:{setter:"setterAutoScrollFn_",value:!1,writeOnce:!0},axis:{validator:e.isString},constrain:{setter:"setterConstrainFn",validator:"validatorConstrainFn"},container:{setter:n.toElement,validator:"validateElementOrString_",value:document},disabled:{validator:e.isBoolean,value:!1},draggingClass:{validator:e.isString,value:"dragging"},dragPlaceholder:{validator:"validateElementOrString_"},handles:{validator:"validateElementOrString_"},keyboardSpeed:{validator:e.isNumber,value:10},minimumDragDistance:{validator:e.isNumber,value:5,writeOnce:!0},scrollContainers:{setter:"setterScrollContainersFn_",validator:"validateElementOrString_"},sources:{validator:"validateElementOrString_"},steps:{validator:e.isObject,valueFn:function(){return{x:1,y:1}}},useShim:{value:!0}},u.Events={DRAG:"drag",END:"end",START:"start"},u.Placeholder={CLONE:"clone"},this.metal.Drag=u}.call(this),function(){var e=this.metalNamed.metal.array,t=this.metalNamed.metal.core,n=this.metalNamed.metal.object,o=this.metal.dom,i=this.metal.Drag,a=this.metal.position,r=function(i){function r(e){babelHelpers.classCallCheck(this,r);var t=babelHelpers.possibleConstructorReturn(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e));return t.activeTargets_=[],t}return babelHelpers.inherits(r,i),babelHelpers.createClass(r,[{key:"addTarget",value:function(e){this.targets.push(e),this.targets=this.targets}},{key:"buildEventObject_",value:function(){var e=babelHelpers.get(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"buildEventObject_",this).call(this);return e.target=this.activeTargets_[0],e.allActiveTargets=this.activeTargets_,e}},{key:"cleanUpAfterDragging_",value:function(){babelHelpers.get(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"cleanUpAfterDragging_",this).call(this),this.targets.forEach(function(e){return e.removeAttribute("aria-dropeffect")}),this.activeTargets_.length&&o.removeClasses(this.activeTargets_[0],this.targetOverClass),this.activeTargets_=[]}},{key:"findAllActiveTargets_",value:function(){var e,t=[],n=this.getSourceRegion_(),o=this.targets;return o.forEach(function(i,r){var s=a.getRegion(i);o[r]!==this.activeDragPlaceholder_&&a.intersectRegion(s,n)&&(!e||a.insideRegion(e,s)?(t=[o[r]].concat(t),e=s):t.push(o[r]))}.bind(this)),t}},{key:"getSourceRegion_",value:function(){if(t.isDefAndNotNull(this.mousePos_)){var e=this.mousePos_.x,o=this.mousePos_.y;return a.makeRegion(o,0,e,e,o,0)}var i=n.mixin({},this.sourceRegion_);return i.left-=document.body.scrollLeft,i.right-=document.body.scrollLeft,i.top-=document.body.scrollTop,i.bottom-=document.body.scrollTop,i}},{key:"handleContainerChanged_",value:function(e,t){babelHelpers.get(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"handleContainerChanged_",this).call(this,e,t),this.prevTargetsSelector_&&(this.targets=this.prevTargetsSelector_)}},{key:"removeTarget",value:function(t){e.remove(this.targets,t),this.targets=this.targets}},{key:"setterTargetsFn_",value:function(e){return this.prevTargetsSelector_=t.isString(e)?e:null,this.toElements_(e)}},{key:"startDragging_",value:function(){var e=this;this.ariaDropEffect&&this.targets.forEach(function(t){return t.setAttribute("aria-dropeffect",e.ariaDropEffect)}),babelHelpers.get(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"startDragging_",this).call(this)}},{key:"updatePosition",value:function(e,t){babelHelpers.get(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"updatePosition",this).call(this,e,t);var n=this.findAllActiveTargets_();n[0]!==this.activeTargets_[0]&&(this.activeTargets_[0]&&(o.removeClasses(this.activeTargets_[0],this.targetOverClass),this.emit(r.Events.TARGET_LEAVE,this.buildEventObject_())),this.activeTargets_=n,this.activeTargets_[0]&&(o.addClasses(this.activeTargets_[0],this.targetOverClass),this.emit(r.Events.TARGET_ENTER,this.buildEventObject_())))}}]),r}(i);r.STATE={ariaDropEffect:{validator:t.isString},targetOverClass:{validator:t.isString,value:"targetOver"},targets:{setter:"setterTargetsFn_",validator:"validateElementOrString_"}},r.Events={DRAG:"drag",END:"end",TARGET_ENTER:"targetEnter",TARGET_LEAVE:"targetLeave"},this.metal.DragDrop=r}.call(this),function(){var e=this.metal.Drag,t=this.metal.DragDrop;this.metalNamed.drag=this.metalNamed.drag||{},this.metalNamed.drag.Drag=e,this.metalNamed.drag.DragDrop=t}.call(this),function(){var e,t=this.metal.component,n=this.metal.Soy;goog.loadModule(function(t){function n(e,t,n){var o;e=e||{};var l=null==(o=e.max)?100:o,u=null==(o=e.min)?0:o,c=null==(o=e.value)?0:o;i("div",null,null,"class","slider "+(null==(o=e.elementClasses)?"":o)),i("input",null,null,"name",null==(o=e.inputName)?"":o,"type","hidden","value",c),a("input"),i("span"),s((goog.asserts.assert(null!=c),c)),a("span");var d=100*(c-u)/(l-u)+"%";i("div",null,null,"class","rail","data-onmousedown","onRailMouseDown_"),r("div",null,null,"class","rail-active","style","width: "+d),i("div",null,null,"class","rail-handle"),r("div",null,null,"class","handle","tabindex","0","role","slider","aria-valuemin",u,"aria-valuemax",l,"aria-valuenow",c),a("div"),a("div"),a("div")}goog.module("Slider.incrementaldom");goog.require("soy"),goog.require("soydata");goog.require("goog.i18n.bidi"),goog.require("goog.asserts");var o=goog.require("incrementaldom"),i=o.elementOpen,a=o.elementClose,r=o.elementVoid,s=(o.elementOpenStart,o.elementOpenEnd,o.text);o.attr;return t.render=n,goog.DEBUG&&(n.soyTemplateName="Slider.render"),t.render.params=["elementClasses","inputName","max","min","value"],t.render.types={elementClasses:"any",inputName:"any",max:"any",min:"any",value:"any"},e=t,t});var o=function(e){function t(){return babelHelpers.classCallCheck(this,t),babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return babelHelpers.inherits(t,e),t}(t);n.register(o,e),this.metalNamed.Slider=this.metalNamed.Slider||{},this.metalNamed.Slider.Slider=o,this.metalNamed.Slider.templates=e,this.metal.Slider=e}.call(this),function(){var e=this.metal.metal,t=this.metal.dom,n=this.metal.component,o=this.metalNamed.drag.Drag,i=this.metal.position,a=this.metal.Soy,r=this.metal.Slider,s=function(e){function n(){return babelHelpers.classCallCheck(this,n),babelHelpers.possibleConstructorReturn(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return babelHelpers.inherits(n,e),babelHelpers.createClass(n,[{key:"attached",value:function(){this.drag_=new o({constrain:this.element.querySelector(".rail"),container:this.element,handles:".handle",sources:".rail-handle"}),this.on("elementChanged",this.handleElementChanged_),this.attachDragEvents_()}},{key:"attachDragEvents_",value:function(){this.drag_.on(o.Events.DRAG,this.updateValueFromDragData_.bind(this)),this.drag_.on(o.Events.END,this.updateValueFromDragData_.bind(this))}},{key:"disposeInternal",value:function(){babelHelpers.get(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"disposeInternal",this).call(this),this.drag_.dispose()}},{key:"getDrag",value:function(){return this.drag_}},{key:"handleElementChanged_",value:function(e){this.drag_.container=e.newVal,this.drag_.constrain=e.newVal.querySelector(".rail")}},{key:"onRailMouseDown_",value:function(e){(t.hasClass(e.target,"rail")||t.hasClass(e.target,"rail-active"))&&this.updateValue_(e.offsetX,0)}},{key:"syncMax",value:function(e){e<this.value?this.value=e:this.updateHandlePosition_()}},{key:"syncMin",value:function(e){e>this.value?this.value=e:this.updateHandlePosition_()}},{key:"syncValue",value:function(){this.updateHandlePosition_()}},{key:"updateHandlePosition_",value:function(){if(!this.drag_||!this.drag_.isDragging()){var e=100*(this.value-this.min)/(this.max-this.min)+"%";this.element.querySelector(".rail-handle").style.left=e}}},{key:"updateValue_",value:function(e,t){var n=i.getRegion(this.element);this.value=Math.round(t+e/n.width*(this.max-this.min))}},{key:"updateValueFromDragData_",value:function(e){this.updateValue_(e.relativeX,this.min)}}]),n}(n);a.register(s,r),s.STATE={inputName:{validator:e.isString},max:{value:100},min:{value:0},value:{validator:function(t){return e.isNumber(t)&&this.min<=t&&t<=this.max},value:0}},this.metal.Slider=s}.call(this),function(){var e,t=this.metal.component,n=this.metal.Soy;goog.loadModule(function(t){function n(e,t,n){e=e||{},i("div",null,null,"class","switcher"+(e.elementClasses?" "+e.elementClasses:"")+(e.checked?" switcher-on":""),"data-onclick","handleClick","data-onkeyup","handleKeyUp","role","checkbox","aria-checked",e.checked?"true":"false","tabindex","0"),i("div",null,null,"class","switcher-control"),r("div",null,null,"class","switcher-control-icon"),a("div"),a("div")}goog.module("Switcher.incrementaldom");goog.require("soy"),goog.require("soydata");goog.require("goog.i18n.bidi"),goog.require("goog.asserts");var o=goog.require("incrementaldom"),i=o.elementOpen,a=o.elementClose,r=o.elementVoid;o.elementOpenStart,o.elementOpenEnd,o.text,o.attr;return t.render=n,goog.DEBUG&&(n.soyTemplateName="Switcher.render"),t.render.params=["checked","elementClasses"],t.render.types={checked:"any",elementClasses:"any"},e=t,t});var o=function(e){function t(){return babelHelpers.classCallCheck(this,t),babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return babelHelpers.inherits(t,e),t}(t);n.register(o,e),this.metalNamed.Switcher=this.metalNamed.Switcher||{},this.metalNamed.Switcher.Switcher=o,this.metalNamed.Switcher.templates=e,this.metal.Switcher=e}.call(this),function(){var e=this.metal.metal,t=this.metal.Switcher,n=this.metal.component,o=this.metal.Soy,i=function(e){function t(){return babelHelpers.classCallCheck(this,t),babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"handleClick",value:function(){this.checked=!this.checked}},{key:"handleKeyUp",value:function(){13!==event.keyCode&&32!==event.keyCode||(this.checked=!this.checked)}}]),t}(n);i.STATE={checked:{validator:e.isBoolean,value:!1}},o.register(i,t),this.metal.Switcher=i}.call(this),function(){var e=this.metal.metal,t=this.metal.dom,n=this.metalNamed.events.EventHandler,o=this.metal.state,i=function(o){function i(e){babelHelpers.classCallCheck(this,i);var t=babelHelpers.possibleConstructorReturn(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,e));return t.headerEventHandler_=new n,t.on("headerChanged",t.syncHeader),t.syncHeader(),t}return babelHelpers.inherits(i,o),babelHelpers.createClass(i,[{key:"disposeInternal",value:function(){babelHelpers.get(i.prototype.__proto__||Object.getPrototypeOf(i.prototype),"disposeInternal",this).call(this),this.headerEventHandler_.removeAllListeners()}},{key:"getContentElement_",value:function(n){if(e.isElement(this.content))return this.content;var o=t.next(n,this.content);return o?o:(o=n.querySelector(this.content),o?o:this.container.querySelector(this.content))}},{key:"handleClick_",value:function(e){this.toggle(e.delegateTarget||e.currentTarget)}},{key:"handleKeydown_",value:function(e){13!==e.keyCode&&32!==e.keyCode||(this.toggle(e.delegateTarget||e.currentTarget),e.preventDefault())}},{key:"syncHeader",value:function(){this.headerEventHandler_.removeAllListeners(),this.header&&(e.isString(this.header)?this.headerEventHandler_.add(t.delegate(this.container,"click",this.header,this.handleClick_.bind(this)),t.delegate(this.container,"keydown",this.header,this.handleKeydown_.bind(this))):this.headerEventHandler_.add(t.on(this.header,"click",this.handleClick_.bind(this)),t.on(this.header,"keydown",this.handleKeydown_.bind(this))))}},{key:"toggle",value:function(e){var n=this.getContentElement_(e);t.toggleClasses(n,i.CSS_EXPANDED),t.toggleClasses(n,i.CSS_COLLAPSED),t.hasClass(n,i.CSS_EXPANDED)?(t.addClasses(e,i.CSS_HEADER_EXPANDED),t.removeClasses(e,i.CSS_HEADER_COLLAPSED)):(t.removeClasses(e,i.CSS_HEADER_EXPANDED),t.addClasses(e,i.CSS_HEADER_COLLAPSED))}}]),i}(o);i.STATE={container:{setter:t.toElement,validator:function(t){return e.isString(t)||e.isElement(t)},value:document},content:{validator:function(t){return e.isString(t)||e.isElement(t)}},header:{validator:function(t){return e.isString(t)||e.isElement(t)}}},i.CSS_COLLAPSED="toggler-collapsed",i.CSS_EXPANDED="toggler-expanded",i.CSS_HEADER_COLLAPSED="toggler-header-collapsed",i.CSS_HEADER_EXPANDED="toggler-header-expanded",this.metal.Toggler=i}.call(this),function(){var e,t=this.metal.component,n=this.metal.Soy;goog.loadModule(function(t){function n(e,t,n){s("div",null,null,"class","treeview"+(e.elementClasses?" "+e.elementClasses:"")),o(e,null,n),l("div")}function o(e,t,n){if(e.nodes){s("ul",null,null,"class","treeview-nodes","role","tree");for(var o=e.nodes,a=o.length,r=0;r<a;r++){var u=o[r],c=r;i({lastFocusedRef_:e.lastFocusedRef_,node:u,path:null!=e.parentPath?e.parentPath+"-"+c:c},null,n)}l("ul")}}function i(e,t,n){var i=e.lastFocusedRef_?e.lastFocusedRef_:"node-0",r="node-"+e.path;if(c("li"),g("class","treeview-node"),g("data-treeview-path",e.path),g("data-onkeyup","handleNodeKeyUp_"),a(e,null,n),g("role","treeitem"),g("tabindex",i==r?"0":"-1"),g("ref",r),d(),e.node){s("div",null,null,"class","treeview-node-wrapper"+(e.node.expanded?" expanded":"")),s("div",null,null,"class","treeview-node-main clearfix"+(e.node.children?" hasChildren":""),"data-onclick","handleNodeClicked_"),e.node.children&&u("div",null,null,"class","treeview-node-toggler"),s("span",null,null,"class","treeview-node-name");var p=e.node.name;"function"==typeof p?p():null!=p&&h(p),l("span"),l("div"),o({lastFocusedRef_:e.lastFocusedRef_,nodes:e.node.children,parentPath:e.path},null,n),l("div")}l("li")}function a(e,t,n){e.node.children&&g("aria-expanded",e.node.expanded?"true":"false")}goog.module("Treeview.incrementaldom");goog.require("soy"),goog.require("soydata");goog.require("goog.i18n.bidi"),goog.require("goog.asserts"),goog.require("goog.string");var r=goog.require("incrementaldom"),s=r.elementOpen,l=r.elementClose,u=r.elementVoid,c=r.elementOpenStart,d=r.elementOpenEnd,h=r.text,g=r.attr;return t.render=n,goog.DEBUG&&(n.soyTemplateName="Treeview.render"),t.nodes=o,goog.DEBUG&&(o.soyTemplateName="Treeview.nodes"),t.node=i,goog.DEBUG&&(i.soyTemplateName="Treeview.node"),t.ariaExpanded=a,goog.DEBUG&&(a.soyTemplateName="Treeview.ariaExpanded"),t.render.params=["elementClasses","lastFocusedRef_","nodes"],t.render.types={elementClasses:"any",lastFocusedRef_:"any",nodes:"any"},t.nodes.params=["lastFocusedRef_","nodes","parentPath"],t.nodes.types={lastFocusedRef_:"any",nodes:"any",parentPath:"any"},t.node.params=["lastFocusedRef_","node","path"],t.node.types={lastFocusedRef_:"any",node:"any",path:"any"},t.ariaExpanded.params=["node"],t.ariaExpanded.types={node:"any"},e=t,t});var o=function(e){function t(){return babelHelpers.classCallCheck(this,t),babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return babelHelpers.inherits(t,e),t}(t);n.register(o,e),this.metalNamed.Treeview=this.metalNamed.Treeview||{},this.metalNamed.Treeview.Treeview=o,this.metalNamed.Treeview.templates=e,this.metal.Treeview=e}.call(this),function(){var e=this.metal.metal,t=this.metal.Treeview,n=this.metal.component,o=this.metal.KeyboardFocusManager,i=this.metal.Soy,a=function(e){function t(){return babelHelpers.classCallCheck(this,t),babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"attached",value:function(){this.keyboardFocusManager_=new o(this,"li").setFocusHandler(this.handleNextFocus_.bind(this)).start(),this.keyboardFocusManager_.on(o.EVENT_FOCUSED,this.handleKeyboardFocused_.bind(this))}},{key:"disposed",value:function(){this.keyboardFocusManager_.dispose(),this.keyboardFocusManager_=null}},{key:"getNodeObj",value:function(e){for(var t=this.nodes[e[0]],n=1;n<e.length;n++)t=t.children[e[n]];return t}},{key:"getPath_",value:function(e){return e.getAttribute("data-treeview-path").split("-")}},{key:"handleKeyboardFocused_",value:function(e){this.lastFocusedRef_=e.ref}},{key:"handleLeftArrow_",value:function(e,n){if(n.expanded)n.expanded=!1,this.nodes=this.nodes;else if(e.length>1)return e.pop(),t.NODE_REF_PREFIX+e.join("-")}},{key:"handleNextFocus_",value:function(e){e.stopPropagation();var t=this.getPath_(e.delegateTarget),n=this.getNodeObj(t);switch(e.keyCode){case 37:return this.handleLeftArrow_(t,n);case 39:return this.handleRightArrow_(t,n);default:return!0}}},{key:"handleNodeClicked_",value:function(e){this.toggleExpandedState_(e.delegateTarget.parentNode.parentNode)}},{key:"handleNodeKeyUp_",value:function(e){13!==e.keyCode&&32!==e.keyCode||(this.toggleExpandedState_(e.delegateTarget),e.stopPropagation())}},{key:"handleRightArrow_",value:function(e,n){return n.expanded?(e.push(0),t.NODE_REF_PREFIX+e.join("-")):void(n.children&&(n.expanded=!0,this.nodes=this.nodes))}},{key:"toggleExpandedState_",value:function(e){var t=this.getNodeObj(this.getPath_(e));t.expanded=!t.expanded,this.nodes=this.nodes}}]),t}(n);i.register(a,t),a.NODE_REF_PREFIX="node-",a.STATE={lastFocusedRef_:{internal:!0,validator:e.isString},nodes:{validator:Array.isArray,valueFn:function(){return[]}}},this.metal.Treeview=a}.call(this)}).call(this);