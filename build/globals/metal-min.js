(function(){this.metal=this.metal||{},this.metalNamed=this.metalNamed||{};var t={};t["typeof"]="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t},t.classCallCheck=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},t.defineProperty=function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t},t.inherits=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)},t.possibleConstructorReturn=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e},function(){var e=function(){function e(){t.classCallCheck(this,e)}return e.abstractMethod=function(){throw Error("Unimplemented abstract method")},e.collectSuperClassesProperty=function(t,e){for(var n=[t[e]];t.__proto__&&!t.__proto__.isPrototypeOf(Function);)t=t.__proto__,n.push(t[e]);return n},e.getFunctionName=function(t){if(!t.name){var e=t.toString();t.name=e.substring(9,e.indexOf("("))}return t.name},e.getUid=function(t){return t?t[e.UID_PROPERTY]||(t[e.UID_PROPERTY]=e.uniqueIdCounter_++):e.uniqueIdCounter_++},e.identityFunction=function(t){return t},e.isBoolean=function(t){return"boolean"==typeof t},e.isDef=function(t){return void 0!==t},e.isDefAndNotNull=function(t){return e.isDef(t)&&!e.isNull(t)},e.isDocument=function(e){return e&&"object"===("undefined"==typeof e?"undefined":t["typeof"](e))&&9===e.nodeType},e.isElement=function(e){return e&&"object"===("undefined"==typeof e?"undefined":t["typeof"](e))&&1===e.nodeType},e.isFunction=function(t){return"function"==typeof t},e.isNull=function(t){return null===t},e.isNumber=function(t){return"number"==typeof t},e.isWindow=function(t){return null!==t&&t===t.window},e.isObject=function(e){var n="undefined"==typeof e?"undefined":t["typeof"](e);return"object"===n&&null!==e||"function"===n},e.isPromise=function(e){return e&&"object"===("undefined"==typeof e?"undefined":t["typeof"](e))&&"function"==typeof e.then},e.isString=function(t){return"string"==typeof t},e.mergeSuperClassesProperty=function(t,n,o){var i=n+"_MERGED";if(t.hasOwnProperty(i))return!1;var r=e.collectSuperClassesProperty(t,n);return o&&(r=o(r)),t[i]=r,!0},e.nullFunction=function(){},e}();e.UID_PROPERTY="core_"+(1e9*Math.random()>>>0),e.uniqueIdCounter_=1,this.metal.core=e}.call(this),function(){var e=this.metal.core,n=function(){function n(){t.classCallCheck(this,n)}return n.equal=function(t,e){for(var n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return t.length===e.length},n.firstDefinedValue=function(t){for(var e=0;e<t.length;e++)if(void 0!==t[e])return t[e]},n.flatten=function(t,e){for(var o=e||[],i=0;i<t.length;i++)Array.isArray(t[i])?n.flatten(t[i],o):o.push(t[i]);return o},n.remove=function(t,e){var o,i=t.indexOf(e);return(o=i>=0)&&n.removeAt(t,i),o},n.removeAt=function(t,e){return 1===Array.prototype.splice.call(t,e,1).length},n.slice=function(t,n,o){for(var i=[],r=e.isDef(o)?o:t.length,s=n;r>s;s++)i.push(t[s]);return i},n}();this.metal.array=n}.call(this),function(){var t={};t.throwException=function(e){t.nextTick(function(){throw e})},t.run=function(e,n){t.run.workQueueScheduled_||(t.nextTick(t.run.processWorkQueue),t.run.workQueueScheduled_=!0),t.run.workQueue_.push(new t.run.WorkItem_(e,n))},t.run.workQueueScheduled_=!1,t.run.workQueue_=[],t.run.processWorkQueue=function(){for(;t.run.workQueue_.length;){var e=t.run.workQueue_;t.run.workQueue_=[];for(var n=0;n<e.length;n++){var o=e[n];try{o.fn.call(o.scope)}catch(i){t.throwException(i)}}}t.run.workQueueScheduled_=!1},t.run.WorkItem_=function(t,e){this.fn=t,this.scope=e},t.nextTick=function(e,n){var o=e;return n&&(o=e.bind(n)),o=t.nextTick.wrapCallback_(o),"function"==typeof setImmediate?void setImmediate(o):(t.nextTick.setImmediate_||(t.nextTick.setImmediate_=t.nextTick.getSetImmediateEmulator_()),void t.nextTick.setImmediate_(o))},t.nextTick.setImmediate_=null,t.nextTick.getSetImmediateEmulator_=function(){var t;if("function"==typeof MessageChannel&&(t=MessageChannel),"undefined"==typeof t&&"undefined"!=typeof window&&window.postMessage&&window.addEventListener&&(t=function(){var t=document.createElement("iframe");t.style.display="none",t.src="",document.documentElement.appendChild(t);var e=t.contentWindow,n=e.document;n.open(),n.write(""),n.close();var o="callImmediate"+Math.random(),i=e.location.protocol+"//"+e.location.host,r=function(t){t.origin!==i&&t.data!==o||this.port1.onmessage()}.bind(this);e.addEventListener("message",r,!1),this.port1={},this.port2={postMessage:function(){e.postMessage(o,i)}}}),"undefined"!=typeof t){var e=new t,n={},o=n;return e.port1.onmessage=function(){n=n.next;var t=n.cb;n.cb=null,t()},function(t){o.next={cb:t},o=o.next,e.port2.postMessage(0)}}return"undefined"!=typeof document&&"onreadystatechange"in document.createElement("script")?function(t){var e=document.createElement("script");e.onreadystatechange=function(){e.onreadystatechange=null,e.parentNode.removeChild(e),e=null,t(),t=null},document.documentElement.appendChild(e)}:function(t){setTimeout(t,0)}},t.nextTick.wrapCallback_=function(t){return t},this.metal.async=t}.call(this),function(){var e=function(){function e(){t.classCallCheck(this,e),this.disposed_=!1}return e.prototype.dispose=function(){this.disposed_||(this.disposeInternal(),this.disposed_=!0)},e.prototype.disposeInternal=function(){},e.prototype.isDisposed=function(){return this.disposed_},e}();this.metal.Disposable=e}.call(this),function(){var e=this.metal.core,n=function(){function n(){t.classCallCheck(this,n)}return n.mixin=function(t){for(var e,n,o=1;o<arguments.length;o++){n=arguments[o];for(e in n)t[e]=n[e]}return t},n.getObjectByName=function(t,n){for(var o,i=t.split("."),r=n||window;o=i.shift();){if(!e.isDefAndNotNull(r[o]))return null;r=r[o]}return r},n.map=function(t,e){for(var n={},o=Object.keys(t),i=0;i<o.length;i++)n[o[i]]=e(o[i],t[o[i]]);return n},n}();this.metal.object=n}.call(this),function(){var e=function(){function e(){t.classCallCheck(this,e)}return e.collapseBreakingSpaces=function(t){return t.replace(/[\t\r\n ]+/g," ").replace(/^[\t\r\n ]+|[\t\r\n ]+$/g,"")},e.getRandomString=function(){var t=2147483648;return Math.floor(Math.random()*t).toString(36)+Math.abs(Math.floor(Math.random()*t)^Date.now()).toString(36)},e.hashCode=function(t){for(var e=0,n=0,o=t.length;o>n;n++)e=31*e+t.charCodeAt(n),e%=4294967296;return e},e.replaceInterval=function(t,e,n,o){return t.substring(0,e)+o+t.substring(n)},e}();this.metal.string=e}.call(this),function(){var t=this.metal.core,e=this.metal.array,n=this.metal.async,o=this.metal.Disposable,i=this.metal.object,r=this.metal.string;this.metal.metal=t,this.metalNamed.metal={},this.metalNamed.metal.core=t,this.metalNamed.metal.array=e,this.metalNamed.metal.async=n,this.metalNamed.metal.Disposable=o,this.metalNamed.metal.object=i,this.metalNamed.metal.string=r}.call(this),function(){var e=this.metalNamed.metal.Disposable,n=function(e){function n(o,i,r){t.classCallCheck(this,n);var s=t.possibleConstructorReturn(this,e.call(this));return s.emitter_=o,s.event_=i,s.listener_=r,s}return t.inherits(n,e),n.prototype.disposeInternal=function(){this.removeListener(),this.emitter_=null,this.listener_=null},n.prototype.removeListener=function(){this.emitter_.isDisposed()||this.emitter_.removeListener(this.event_,this.listener_)},n}(e);n.prototype.registerMetalComponent&&n.prototype.registerMetalComponent(n,"EventHandle"),this.metal.EventHandle=n}.call(this),function(){var e=this.metalNamed.metal.core,n=this.metalNamed.metal.array,o=this.metalNamed.metal.Disposable,i=this.metal.EventHandle,r=function(o){function r(){t.classCallCheck(this,r);var e=t.possibleConstructorReturn(this,o.call(this));return e.events_=[],e.maxListeners_=10,e.shouldUseFacade_=!1,e}return t.inherits(r,o),r.prototype.addListener=function(t,e,n){this.validateListener_(e),t=this.normalizeEvents_(t);for(var o=0;o<t.length;o++)this.addSingleListener_(t[o],e,n);return new i(this,t,e)},r.prototype.addSingleListener_=function(t,e,n,o){this.emit("newListener",t,e),this.events_[t]||(this.events_[t]=[]),this.events_[t].push({"default":n,fn:e,origin:o});var i=this.events_[t];i.length>this.maxListeners_&&!i.warned&&(i.warned=!0)},r.prototype.disposeInternal=function(){this.events_=[]},r.prototype.emit=function(t){var e,o=n.slice(arguments,1),i=(this.events_[t]||[]).concat();this.getShouldUseFacade()&&(e={preventDefault:function(){e.preventedDefault=!0},target:this,type:t},o.push(e));for(var r=[],s=0;s<i.length;s++)i[s]["default"]?r.push(i[s]):i[s].fn.apply(this,o);if(!e||!e.preventedDefault)for(var a=0;a<r.length;a++)r[a].fn.apply(this,o);return"*"!==t&&this.emit.apply(this,["*",t].concat(o)),i.length>0},r.prototype.getShouldUseFacade=function(){return this.shouldUseFacade_},r.prototype.listeners=function(t){return(this.events_[t]||[]).map(function(t){return t.fn})},r.prototype.many=function(t,e,n){t=this.normalizeEvents_(t);for(var o=0;o<t.length;o++)this.many_(t[o],e,n);return new i(this,t,n)},r.prototype.many_=function(t,e,n){function o(){0===--e&&i.removeListener(t,o),n.apply(i,arguments)}var i=this;0>=e||i.addSingleListener_(t,o,!1,n)},r.prototype.matchesListener_=function(t,e){return t.fn===e||t.origin&&t.origin===e},r.prototype.normalizeEvents_=function(t){return e.isString(t)?[t]:t},r.prototype.off=function(t,e){this.validateListener_(e),t=this.normalizeEvents_(t);for(var n=0;n<t.length;n++){var o=this.events_[t[n]]||[];this.removeMatchingListenerObjs_(o,e)}return this},r.prototype.on=function(){return this.addListener.apply(this,arguments)},r.prototype.once=function(t,e){return this.many(t,1,e)},r.prototype.removeAllListeners=function(t){if(t)for(var e=this.normalizeEvents_(t),n=0;n<e.length;n++)this.events_[e[n]]=null;else this.events_={};return this},r.prototype.removeMatchingListenerObjs_=function(t,e){for(var n=t.length-1;n>=0;n--)this.matchesListener_(t[n],e)&&t.splice(n,1)},r.prototype.removeListener=function(){return this.off.apply(this,arguments)},r.prototype.setMaxListeners=function(t){return this.maxListeners_=t,this},r.prototype.setShouldUseFacade=function(t){return this.shouldUseFacade_=t,this},r.prototype.validateListener_=function(t){if(!e.isFunction(t))throw new TypeError("Listener must be a function")},r}(o);r.prototype.registerMetalComponent&&r.prototype.registerMetalComponent(r,"EventEmitter"),this.metal.EventEmitter=r}.call(this),function(){var e=this.metalNamed.metal.array,n=this.metalNamed.metal.Disposable,o=(this.metalNamed.metal.object,function(n){function o(e,i,r,s){t.classCallCheck(this,o);var a=t.possibleConstructorReturn(this,n.call(this));return a.blacklist_=r||{},a.originEmitter_=e,a.proxiedEvents_={},a.targetEmitter_=i,a.whitelist_=s,a.startProxy_(),a}return t.inherits(o,n),o.prototype.addListener_=function(t,e){return this.originEmitter_.on(t,e)},o.prototype.addListenerForEvent_=function(t){return this.addListener_(t,this.emitOnTarget_.bind(this,t))},o.prototype.disposeInternal=function(){this.removeListeners_(),this.proxiedEvents_=null,this.originEmitter_=null,this.targetEmitter_=null},o.prototype.emitOnTarget_=function(t){var n=[t].concat(e.slice(arguments,1));this.targetEmitter_.emit.apply(this.targetEmitter_,n)},o.prototype.proxyEvent=function(t){this.shouldProxyEvent_(t)&&(this.proxiedEvents_[t]=this.addListenerForEvent_(t))},o.prototype.removeListeners_=function(){for(var t=Object.keys(this.proxiedEvents_),e=0;e<t.length;e++)this.proxiedEvents_[t[e]].removeListener();this.proxiedEvents_={}},o.prototype.setOriginEmitter=function(t){var e=this.proxiedEvents_;this.removeListeners_(),this.originEmitter_=t;for(var n=Object.keys(e),o=0;o<n.length;o++)this.proxiedEvents_[n[o]]=this.addListenerForEvent_(n[o])},o.prototype.shouldProxyEvent_=function(t){return this.whitelist_&&!this.whitelist_[t]?!1:this.blacklist_[t]?!1:!this.proxiedEvents_[t]},o.prototype.startProxy_=function(){this.targetEmitter_.on("newListener",this.proxyEvent.bind(this))},o}(n));o.prototype.registerMetalComponent&&o.prototype.registerMetalComponent(o,"EventEmitterProxy"),this.metal.EventEmitterProxy=o}.call(this),function(){var e=this.metalNamed.metal.Disposable,n=function(e){function n(){t.classCallCheck(this,n);var o=t.possibleConstructorReturn(this,e.call(this));return o.eventHandles_=[],o}return t.inherits(n,e),n.prototype.add=function(){for(var t=0;t<arguments.length;t++)this.eventHandles_.push(arguments[t])},n.prototype.disposeInternal=function(){this.eventHandles_=null},n.prototype.removeAllListeners=function(){for(var t=0;t<this.eventHandles_.length;t++)this.eventHandles_[t].removeListener();this.eventHandles_=[]},n}(e);n.prototype.registerMetalComponent&&n.prototype.registerMetalComponent(n,"EventHandler"),this.metal.EventHandler=n}.call(this),function(){var t=this.metal.EventEmitter,e=this.metal.EventEmitterProxy,n=this.metal.EventHandle,o=this.metal.EventHandler;this.metal.events=t,this.metalNamed.events={},this.metalNamed.events.EventEmitter=t,this.metalNamed.events.EventEmitterProxy=e,this.metalNamed.events.EventHandle=n,this.metalNamed.events.EventHandler=o}.call(this),function(){var e=this.metalNamed.events.EventHandle,n=function(e){function n(o,i,r,s){t.classCallCheck(this,n);var a=t.possibleConstructorReturn(this,e.call(this,o,i,r));return a.capture_=s,a}return t.inherits(n,e),n.prototype.removeListener=function(){this.emitter_.removeEventListener(this.event_,this.listener_,this.capture_)},n}(e);n.prototype.registerMetalComponent&&n.prototype.registerMetalComponent(n,"DomEventHandle"),this.metal.DomEventHandle=n}.call(this),function(){var e=this.metalNamed.metal.core,n=this.metalNamed.metal.object,o=this.metal.DomEventHandle,i=function(){function i(){t.classCallCheck(this,i)}return i.addClasses=function(t,n){e.isObject(t)&&e.isString(n)&&("classList"in t?i.addClassesWithNative_(t,n):i.addClassesWithoutNative_(t,n))},i.addClassesWithNative_=function(t,e){e.split(" ").forEach(function(e){t.classList.add(e)})},i.addClassesWithoutNative_=function(t,e){var n=" "+t.className+" ",o="";e=e.split(" ");for(var i=0;i<e.length;i++){var r=e[i];-1===n.indexOf(" "+r+" ")&&(o+=" "+r)}o&&(t.className=t.className+o)},i.closest=function(t,e){for(;t&&!i.match(t,e);)t=t.parentNode;return t},i.append=function(t,n){if(e.isString(n)&&(n=i.buildFragment(n)),n instanceof NodeList)for(var o=Array.prototype.slice.call(n),r=0;r<o.length;r++)t.appendChild(o[r]);else t.appendChild(n);return n},i.buildFragment=function(t){var e=document.createElement("div");e.innerHTML="<br>"+t,e.removeChild(e.firstChild);for(var n=document.createDocumentFragment();e.firstChild;)n.appendChild(e.firstChild);return n},i.contains=function(t,n){return e.isDocument(t)?t.documentElement.contains(n):t.contains(n)},i.delegate=function(t,e,n,o){var r=i.customEvents[e];return r&&r.delegate&&(e=r.originalEvent,o=r.handler.bind(r,o)),i.on(t,e,i.handleDelegateEvent_.bind(null,n,o))},i.enterDocument=function(t){i.append(document.body,t)},i.exitDocument=function(t){t.parentNode&&t.parentNode.removeChild(t)},i.handleDelegateEvent_=function(t,n,o){i.normalizeDelegateEvent_(o);for(var r=o.target,s=!0;r&&!o.stopped&&(e.isString(t)&&i.match(r,t)&&(o.delegateTarget=r,s&=n(o)),r!==o.currentTarget);)r=r.parentNode;return o.delegateTarget=null,s},i.hasClass=function(t,e){return"classList"in t?i.hasClassWithNative_(t,e):i.hasClassWithoutNative_(t,e)},i.hasClassWithNative_=function(t,e){return t.classList.contains(e)},i.hasClassWithoutNative_=function(t,e){return(" "+t.className+" ").indexOf(" "+e+" ")>=0},i.isEmpty=function(t){return 0===t.childNodes.length},i.match=function(t,e){if(!t||1!==t.nodeType)return!1;var n=Element.prototype,o=n.matches||n.webkitMatchesSelector||n.mozMatchesSelector||n.msMatchesSelector||n.oMatchesSelector;return o?o.call(t,e):i.matchFallback_(t,e)},i.matchFallback_=function(t,e){for(var n=document.querySelectorAll(e,t.parentNode),o=0;o<n.length;++o)if(n[o]===t)return!0;return!1},i.next=function(t,e){do if(t=t.nextSibling,t&&i.match(t,e))return t;while(t);return null},i.normalizeDelegateEvent_=function(t){t.stopPropagation=i.stopPropagation_,t.stopImmediatePropagation=i.stopImmediatePropagation_},i.on=function(t,n,r,s){if(e.isString(t))return i.delegate(document,n,t,r);var a=i.customEvents[n];return a&&a.event&&(n=a.originalEvent,r=a.handler.bind(a,r)),t.addEventListener(n,r,s),new o(t,n,r,s)},i.once=function(t,e,n){var o=this.on(t,e,function(){return o.removeListener(),n.apply(this,arguments)});return o},i.parent=function(t,e){return i.closest(t.parentNode,e)},i.registerCustomEvent=function(t,e){i.customEvents[t]=e},i.removeChildren=function(t){for(var e;e=t.firstChild;)t.removeChild(e)},i.removeClasses=function(t,n){e.isObject(t)&&e.isString(n)&&("classList"in t?i.removeClassesWithNative_(t,n):i.removeClassesWithoutNative_(t,n))},i.removeClassesWithNative_=function(t,e){e.split(" ").forEach(function(e){t.classList.remove(e)})},i.removeClassesWithoutNative_=function(t,e){var n=" "+t.className+" ";e=e.split(" ");for(var o=0;o<e.length;o++)n=n.replace(" "+e[o]+" "," ");t.className=n.trim()},i.replace=function(t,e){t&&e&&t!==e&&t.parentNode&&(t.parentNode.insertBefore(e,t),t.parentNode.removeChild(t))},i.stopImmediatePropagation_=function(){this.stopped=!0,Event.prototype.stopImmediatePropagation.call(this)},i.stopPropagation_=function(){this.stopped=!0,Event.prototype.stopPropagation.call(this)},i.supportsEvent=function(t,n){return i.customEvents[n]?!0:(e.isString(t)&&(r[t]||(r[t]=document.createElement(t)),t=r[t]),"on"+n in t)},i.toElement=function(t){return e.isElement(t)||e.isDocument(t)?t:e.isString(t)?"#"===t[0]&&-1===t.indexOf(" ")?document.getElementById(t.substr(1)):document.querySelector(t):null},i.toggleClasses=function(t,n){e.isObject(t)&&e.isString(n)&&("classList"in t?i.toggleClassesWithNative_(t,n):i.toggleClassesWithoutNative_(t,n))},i.toggleClassesWithNative_=function(t,e){e.split(" ").forEach(function(e){t.classList.toggle(e)})},i.toggleClassesWithoutNative_=function(t,e){var n=" "+t.className+" ";e=e.split(" ");for(var o=0;o<e.length;o++){var i=" "+e[o]+" ",r=n.indexOf(i);n=-1===r?n+e[o]+" ":n.substring(0,r)+" "+n.substring(r+i.length)}t.className=n.trim()},i.triggerEvent=function(t,e,o){var i=document.createEvent("HTMLEvents");i.initEvent(e,!0,!0),n.mixin(i,o),t.dispatchEvent(i)},i}(),r={};i.customEvents={},this.metal.dom=i}.call(this),function(){var e=this.metal.dom,n=this.metalNamed.events.EventEmitterProxy,o=function(n){function o(){return t.classCallCheck(this,o),t.possibleConstructorReturn(this,n.apply(this,arguments))}return t.inherits(o,n),o.prototype.addListener_=function(t,o){if(this.originEmitter_.addEventListener){if(t.startsWith("delegate:")){var i=t.indexOf(":",9),r=t.substring(9,i),s=t.substring(i+1);return e.delegate(this.originEmitter_,r,s,o)}return e.on(this.originEmitter_,t,o)}return n.prototype.addListener_.call(this,t,o)},o.prototype.isSupportedDomEvent_=function(t){return t.startsWith("delegate:")&&-1!==t.indexOf(":",9)||e.supportsEvent(this.originEmitter_,t)},o.prototype.shouldProxyEvent_=function(t){return n.prototype.shouldProxyEvent_.call(this,t)&&(!this.originEmitter_.addEventListener||this.isSupportedDomEvent_(t))},o}(n);o.prototype.registerMetalComponent&&o.prototype.registerMetalComponent(o,"DomEventEmitterProxy"),this.metal.DomEventEmitterProxy=o}.call(this),function(){var e=this.metal.dom,n=this.metalNamed.metal.string,o=function(){function o(){t.classCallCheck(this,o)}return o.checkAnimationEventName=function(){return void 0===o.animationEventName_&&(o.animationEventName_={animation:o.checkAnimationEventName_("animation"),transition:o.checkAnimationEventName_("transition")}),o.animationEventName_},o.checkAnimationEventName_=function(t){for(var e=["Webkit","MS","O",""],i=n.replaceInterval(t,0,1,t.substring(0,1).toUpperCase()),r=[i+"End",i+"End",i+"End",t+"end"],s=0;s<e.length;s++)if(void 0!==o.animationElement_.style[e[s]+i])return e[s].toLowerCase()+r[s];return t+"end"},o.checkAttrOrderChange=function(){if(void 0===o.attrOrderChange_){var t='<div data-component="" data-ref=""></div>',n=document.createElement("div");e.append(n,t),o.attrOrderChange_=t!==n.innerHTML}return o.attrOrderChange_},o}();o.animationElement_=document.createElement("div"),o.animationEventName_=void 0,o.attrOrderChange_=void 0,this.metal.features=o}.call(this),function(){var e=this.metalNamed.metal.async,n=this.metal.dom,o=function(){function o(){t.classCallCheck(this,o)}return o.run=function(t,e){var o=document.createElement("script");return o.text=t,e?e(o):document.head.appendChild(o),n.exitDocument(o),o},o.runFile=function(t,e,o){var i=document.createElement("script");i.src=t;var r=function(){n.exitDocument(i),e&&e()};return n.on(i,"load",r),n.on(i,"error",r),o?o(i):document.head.appendChild(i),i},o.runScript=function(t,i,r){var s=function(){i&&i()};return t.type&&"text/javascript"!==t.type?void e.nextTick(s):(n.exitDocument(t),t.src?o.runFile(t.src,i,r):(e.nextTick(s),o.run(t.text,r)))},o.runScriptsInElement=function(t,n,i){var r=t.querySelectorAll("script");r.length?o.runScriptsInOrder(r,0,n,i):n&&e.nextTick(n)},o.runScriptsInOrder=function(t,n,i,r){o.runScript(t.item(n),function(){n<t.length-1?o.runScriptsInOrder(t,n+1,i,r):i&&e.nextTick(i)},r)},o}();this.metal.globalEval=o}.call(this),function(){var e=this.metalNamed.metal.async,n=this.metal.dom,o=function(){function o(){t.classCallCheck(this,o)}return o.run=function(t,e){var n=document.createElement("style");return n.innerHTML=t,e?e(n):document.head.appendChild(n),n},o.runFile=function(t,e,n){var i=document.createElement("link");return i.rel="stylesheet",i.href=t,o.runStyle(i,e,n),i},o.runStyle=function(t,o,i){var r=function(){o&&o()};return t.rel&&"stylesheet"!==t.rel?void e.nextTick(r):("STYLE"===t.tagName?e.nextTick(r):(n.on(t,"load",r),n.on(t,"error",r)),i?i(t):document.head.appendChild(t),t)},o.runStylesInElement=function(t,n,i){var r=t.querySelectorAll("style,link");if(0===r.length&&n)return void e.nextTick(n);for(var s=0,a=function(){n&&++s===r.length&&e.nextTick(n)},l=0;l<r.length;l++)o.runStyle(r[l],a,i)},o}();this.metal.globalEvalStyles=o}.call(this),function(){var t=this.metal.dom,e=this.metal.features,n={mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"};Object.keys(n).forEach(function(e){t.registerCustomEvent(e,{delegate:!0,handler:function(t,n){var o=n.relatedTarget,i=n.delegateTarget;return!o||o!==i&&!i.contains(o)?(n.customType=e,t(n)):void 0},originalEvent:n[e]})});var o={animation:"animationend",transition:"transitionend"};Object.keys(o).forEach(function(n){var i=o[n];t.registerCustomEvent(i,{event:!0,delegate:!0,handler:function(t,e){return e.customType=i,t(e)},originalEvent:e.checkAnimationEventName()[n]})})}.call(this),function(){var t=this.metal.dom,e=this.metal.DomEventEmitterProxy,n=this.metal.DomEventHandle,o=this.metal.features,i=this.metal.globalEval,r=this.metal.globalEvalStyles;this.metal.dom=t,this.metalNamed.dom={},this.metalNamed.dom.dom=t,this.metalNamed.dom.DomEventEmitterProxy=e,this.metalNamed.dom.DomEventHandle=n,this.metalNamed.dom.features=o,this.metalNamed.dom.globalEval=i,this.metalNamed.dom.globalEvalStyles=r}.call(this),function(){var e=this.metalNamed.metal.array,n=this.metalNamed.metal.async,o=this.metalNamed.metal.core,i=this.metalNamed.metal.object,r=this.metalNamed.events.EventEmitter,s=function(r){function s(e){t.classCallCheck(this,s);var n=t.possibleConstructorReturn(this,r.call(this));return n.scheduledBatchData_=null,n.attrsInfo_={},n.setShouldUseFacade(!0),n.mergeInvalidAttrs_(),n.addAttrsFromStaticHint_(e),n}return t.inherits(s,r),s.prototype.addAttr=function(t,e,n){this.buildAttrInfo_(t,e,n),Object.defineProperty(this,t,this.buildAttrPropertyDef_(t))},s.prototype.addAttrs=function(t,e,n){e=e||{};for(var o=Object.keys(t),i={},r=0;r<o.length;r++){var s=o[r];this.buildAttrInfo_(s,t[s],e[s]),i[s]=this.buildAttrPropertyDef_(s)}n!==!1&&Object.defineProperties(n||this,i)},s.prototype.addAttrsFromStaticHint_=function(t){var e=this.constructor,n=!1;s.mergeAttrsStatic(e)&&(n=e.prototype),this.addAttrs(e.ATTRS_MERGED,t,n)},s.prototype.assertValidAttrName_=function(t){if(this.constructor.INVALID_ATTRS_MERGED[t])throw new Error("It's not allowed to create an attribute with the name \""+t+'".')},s.prototype.buildAttrInfo_=function(t,e,n){this.assertValidAttrName_(t),this.attrsInfo_[t]={config:e||{},initialValue:n,state:s.States.UNINITIALIZED}},s.prototype.buildAttrPropertyDef_=function(t){return{configurable:!0,enumerable:!0,get:function(){return this.getAttrValue_(t)},set:function(e){this.setAttrValue_(t,e)}}},s.prototype.callFunction_=function(t,e){return o.isString(t)?this[t].apply(this,e):o.isFunction(t)?t.apply(this,e):void 0},s.prototype.callSetter_=function(t,e,n){var o=this.attrsInfo_[t],i=o.config;return i.setter&&(e=this.callFunction_(i.setter,[e,n])),e},s.prototype.callValidator_=function(t,e){var n=this.attrsInfo_[t],o=n.config;return o.validator?this.callFunction_(o.validator,[e]):!0},s.prototype.canSetAttribute=function(t){var e=this.attrsInfo_[t];return!e.config.writeOnce||!e.written},s.prototype.disposeInternal=function(){r.prototype.disposeInternal.call(this),this.attrsInfo_=null,this.scheduledBatchData_=null},s.prototype.emitBatchEvent_=function(){if(!this.isDisposed()){var t=this.scheduledBatchData_;this.scheduledBatchData_=null,this.emit("attrsChanged",t)}},s.prototype.get=function(t){return this[t]},s.prototype.getAttrConfig=function(t){return(this.attrsInfo_[t]||{}).config},s.prototype.getAttrs=function(t){for(var e={},n=t||this.getAttrNames(),o=0;o<n.length;o++)e[n[o]]=this[n[o]];return e},s.prototype.getAttrNames=function(){return Object.keys(this.attrsInfo_)},s.prototype.getAttrValue_=function(t){return this.initAttr_(t),this.attrsInfo_[t].value},s.prototype.hasBeenSet=function(t){var e=this.attrsInfo_[t];return e.state===s.States.INITIALIZED||e.initialValue},s.prototype.informChange_=function(t,e){if(this.shouldInformChange_(t,e)){var n={attrName:t,newVal:this[t],prevVal:e};this.emit(t+"Changed",n),this.emit("attrChanged",n),this.scheduleBatchEvent_(n)}},s.prototype.initAttr_=function(t){var e=this.attrsInfo_[t];e.state===s.States.UNINITIALIZED&&(e.state=s.States.INITIALIZING,this.setInitialValue_(t),e.written||(e.state=s.States.INITIALIZING_DEFAULT,this.setDefaultValue_(t)),e.state=s.States.INITIALIZED)},s.mergeAttrs_=function(t){return i.mixin.apply(null,[{}].concat(t.reverse()))},s.mergeAttrsStatic=function(t){return o.mergeSuperClassesProperty(t,"ATTRS",s.mergeAttrs_)},s.prototype.mergeInvalidAttrs_=function(){o.mergeSuperClassesProperty(this.constructor,"INVALID_ATTRS",function(t){return e.flatten(t).reduce(function(t,e){return e&&(t[e]=!0),t},{})})},s.prototype.removeAttr=function(t){this.attrsInfo_[t]=null,delete this[t]},s.prototype.scheduleBatchEvent_=function(t){this.scheduledBatchData_||(n.nextTick(this.emitBatchEvent_,this),this.scheduledBatchData_={changes:{}});var e=t.attrName,o=this.scheduledBatchData_.changes;o[e]?o[e].newVal=t.newVal:o[e]=t},s.prototype.set=function(t,e){this[t]=e},s.prototype.setAttrs=function(t){for(var e=Object.keys(t),n=0;n<e.length;n++)this[e[n]]=t[e[n]]},s.prototype.setAttrValue_=function(t,e){if(this.canSetAttribute(t)&&this.validateAttrValue_(t,e)){var n=this.attrsInfo_[t];void 0===n.initialValue&&n.state===s.States.UNINITIALIZED&&(n.state=s.States.INITIALIZED);var o=this[t];n.value=this.callSetter_(t,e,o),n.written=!0,this.informChange_(t,o)}},s.prototype.setDefaultValue_=function(t){var e=this.attrsInfo_[t].config;void 0!==e.value?this[t]=e.value:this[t]=this.callFunction_(e.valueFn)},s.prototype.setInitialValue_=function(t){var e=this.attrsInfo_[t];void 0!==e.initialValue&&(this[t]=e.initialValue,e.initialValue=void 0)},s.prototype.shouldInformChange_=function(t,e){var n=this.attrsInfo_[t];return n.state===s.States.INITIALIZED&&(o.isObject(e)||e!==this[t])},s.prototype.validateAttrValue_=function(t,e){var n=this.attrsInfo_[t];return n.state===s.States.INITIALIZING_DEFAULT||this.callValidator_(t,e)},s}(r);s.prototype.registerMetalComponent&&s.prototype.registerMetalComponent(s,"Attribute"),s.INVALID_ATTRS=["attr","attrs"],s.States={UNINITIALIZED:0,INITIALIZING:1,INITIALIZING_DEFAULT:2,INITIALIZED:3},this.metal.Attribute=s}.call(this),function(){var e=function(){function e(){t.classCallCheck(this,e)}return e.intersectRect=function(t,e,n,o,i,r,s,a){return!(i>n||t>s||r>o||e>a)},e}();this.metal.Geometry=e}.call(this),function(){var e=this.metal.metal,n=this.metal.Geometry,o=function(){function o(){t.classCallCheck(this,o)}return o.getClientHeight=function(t){return this.getClientSize_(t,"Height")},o.getClientSize_=function(t,n){var o=t;return e.isWindow(t)&&(o=t.document.documentElement),e.isDocument(t)&&(o=t.documentElement),o["client"+n]},o.getClientWidth=function(t){return this.getClientSize_(t,"Width")},o.getDocumentRegion_=function(t){var e=this.getHeight(t),n=this.getWidth(t);return this.makeRegion(e,e,0,n,0,n)},o.getHeight=function(t){return this.getSize_(t,"Height")},o.getOffsetLeft=function(t,e){return t.offsetLeft+(e?0:o.getTranslation(t).left)},o.getOffsetTop=function(t,e){return t.offsetTop+(e?0:o.getTranslation(t).top)},o.getRegion=function(t,n){return e.isDocument(t)||e.isWindow(t)?this.getDocumentRegion_(t):this.makeRegionFromBoundingRect_(t.getBoundingClientRect(),n)},o.getScrollLeft=function(t){return e.isWindow(t)?t.pageXOffset:e.isDocument(t)?t.defaultView.pageXOffset:t.scrollLeft},o.getScrollTop=function(t){return e.isWindow(t)?t.pageYOffset:e.isDocument(t)?t.defaultView.pageYOffset:t.scrollTop},o.getSize_=function(t,n){if(e.isWindow(t))return this.getClientSize_(t,n);if(e.isDocument(t)){var o=t.documentElement;return Math.max(t.body["scroll"+n],o["scroll"+n],t.body["offset"+n],o["offset"+n],o["client"+n])}return Math.max(t["client"+n],t["scroll"+n],t["offset"+n])},o.getTransformMatrixValues=function(t){var e=getComputedStyle(t),n=e.msTransform||e.transform||e.webkitTransform||e.mozTransform;if("none"!==n){for(var o=[],i=/([\d-\.\s]+)/g,r=i.exec(n);r;)o.push(r[1]),r=i.exec(n);return o}},o.getTranslation=function(t){var e=o.getTransformMatrixValues(t),n={left:0,top:0};return e&&(n.left=parseFloat(6===e.length?e[4]:e[13]),n.top=parseFloat(6===e.length?e[5]:e[14])),n},o.getWidth=function(t){return this.getSize_(t,"Width")},o.intersectRegion=function(t,e){return n.intersectRect(t.top,t.left,t.bottom,t.right,e.top,e.left,e.bottom,e.right)},o.insideRegion=function(t,e){return e.top>=t.top&&e.bottom<=t.bottom&&e.right<=t.right&&e.left>=t.left},o.insideViewport=function(t){return this.insideRegion(this.getRegion(window),t)},o.intersection=function(t,e){if(!this.intersectRegion(t,e))return null;var n=Math.min(t.bottom,e.bottom),o=Math.min(t.right,e.right),i=Math.max(t.left,e.left),r=Math.max(t.top,e.top);return this.makeRegion(n,n-r,i,o,r,o-i)},o.makeRegion=function(t,e,n,o,i,r){return{bottom:t,height:e,left:n,right:o,top:i,width:r}},o.makeRegionFromBoundingRect_=function(t,e){var n=e?o.getScrollLeft(document):0,i=e?o.getScrollTop(document):0;return this.makeRegion(t.bottom+i,t.height,t.left+n,t.right+n,t.top+i,t.width)},o.pointInsideRegion=function(t,e,n){return o.insideRegion(n,o.makeRegion(e,0,t,t,e,0))},o}();this.metal.Position=o}.call(this),function(){var e=this.metal.Position,n=function(){function n(){t.classCallCheck(this,n)}return n.align=function(t,n,o){var i=this.suggestAlignBestRegion(t,n,o),r=i.region,s=window.getComputedStyle(t,null);if("fixed"!==s.getPropertyValue("position")){r.top+=window.pageYOffset,r.left+=window.pageXOffset;for(var a=t;a=a.offsetParent;)r.top-=e.getOffsetTop(a),r.left-=e.getOffsetLeft(a)}return t.style.top=r.top+"px",
t.style.left=r.left+"px",i.position},n.getAlignBestRegion=function(t,e,o){return n.suggestAlignBestRegion(t,e,o).region},n.getAlignRegion=function(t,o,i){var r=e.getRegion(o),s=e.getRegion(t),a=0,l=0;switch(i){case n.TopCenter:a=r.top-s.height,l=r.left+r.width/2-s.width/2;break;case n.RightCenter:a=r.top+r.height/2-s.height/2,l=r.left+r.width;break;case n.BottomCenter:a=r.bottom,l=r.left+r.width/2-s.width/2;break;case n.LeftCenter:a=r.top+r.height/2-s.height/2,l=r.left-s.width;break;case n.TopRight:a=r.top-s.height,l=r.right-s.width;break;case n.BottomRight:a=r.bottom,l=r.right-s.width;break;case n.BottomLeft:a=r.bottom,l=r.left;break;case n.TopLeft:a=r.top-s.height,l=r.left}return{bottom:a+s.height,height:s.height,left:l,right:l+s.width,top:a,width:s.width}},n.isValidPosition=function(t){return t>=0&&8>=t},n.suggestAlignBestRegion=function(t,n,o){for(var i=0,r=o,s=this.getAlignRegion(t,n,r),a=r,l=s,c=e.getRegion(window),u=0;8>u;){if(e.intersectRegion(c,l)){var h=e.intersection(c,l),d=h.width*h.height;if(d>i&&(i=d,s=l,r=a),e.insideViewport(l))break}a=(o+ ++u)%8,l=this.getAlignRegion(t,n,a)}return{position:r,region:s}},n}();n.TopCenter=0,n.TopRight=1,n.RightCenter=2,n.BottomRight=3,n.BottomCenter=4,n.BottomLeft=5,n.LeftCenter=6,n.TopLeft=7,n.Top=n.TopCenter,n.Right=n.RightCenter,n.Bottom=n.BottomCenter,n.Left=n.LeftCenter,this.metal.Align=n}.call(this),function(){var t=this.metal.Align,e=this.metal.Geometry,n=this.metal.Position;this.metal.position=n,this.metalNamed.position={},this.metalNamed.position.Align=t,this.metalNamed.position.Geometry=e,this.metalNamed.position.Position=n}.call(this),function(){var e=this.metal.metal,n=this.metalNamed.dom.dom,o=this.metalNamed.dom.DomEventEmitterProxy,i=this.metal.Attribute,r=this.metal.events,s=this.metal.position,a=function(i){function a(e){t.classCallCheck(this,a);var n=t.possibleConstructorReturn(this,i.call(this,e));return a.emitter_||(a.emitter_=new r,a.proxy_=new o(document,a.emitter_,null,{scroll:!0})),n.lastPosition_=null,n.scrollHandle_=a.emitter_.on("scroll",n.checkPosition.bind(n)),n.on("elementChanged",n.checkPosition),n.on("offsetTopChanged",n.checkPosition),n.on("offsetBottomChanged",n.checkPosition),n.checkPosition(),n}return t.inherits(a,i),a.prototype.disposeInternal=function(){n.removeClasses(this.element,a.Position.Bottom+" "+a.Position.Default+" "+a.Position.Top),this.scrollHandle_.dispose(),i.prototype.disposeInternal.call(this)},a.prototype.checkPosition=function(){this.intersectTopRegion()?this.syncPosition(a.Position.Top):this.intersectBottomRegion()?this.syncPosition(a.Position.Bottom):this.syncPosition(a.Position.Default)},a.prototype.intersectBottomRegion=function(){if(!e.isDef(this.offsetBottom))return!1;var t=s.getHeight(this.scrollElement),n=s.getClientHeight(this.scrollElement);return s.getScrollTop(this.scrollElement)+n>=t-this.offsetBottom},a.prototype.intersectTopRegion=function(){return e.isDef(this.offsetTop)?s.getScrollTop(this.scrollElement)<=this.offsetTop:!1},a.prototype.syncPosition=function(t){this.lastPosition_!==t&&(n.addClasses(this.element,t),n.removeClasses(this.element,this.lastPosition_),this.lastPosition_=t)},a}(i);a.prototype.registerMetalComponent&&a.prototype.registerMetalComponent(a,"Affix"),a.Position={Top:"affix-top",Bottom:"affix-bottom",Default:"affix"},a.ATTRS={scrollElement:{setter:n.toElement,value:document},offsetTop:{validator:e.isNumber},offsetBottom:{validator:e.isNumber},element:{setter:n.toElement}},this.metal.Affix=a}.call(this),function(){var e=this.metalNamed.metal.core,n=function(){function n(){t.classCallCheck(this,n)}return n.getConstructor=function(t){var e=n.components_[t];return e},n.register=function(t,o){var i=o;i||(i=t.hasOwnProperty("NAME")?t.NAME:e.getFunctionName(t)),t.NAME=i,n.components_[i]=t},n}();n.components_={},this.metal.ComponentRegistry=n}.call(this),function(){var e=this.metal.ComponentRegistry,n=this.metalNamed.metal.Disposable,o=function(n){function o(){return t.classCallCheck(this,o),t.possibleConstructorReturn(this,n.apply(this,arguments))}return t.inherits(o,n),o.prototype.addComponent=function(t){o.components[t.id]=t},o.prototype.createComponent=function(t,n){var i=o.components[(n||{}).id];if(!i){var r=e.getConstructor(t);i=new r(n)}return i},o.prototype.removeComponent=function(t){delete o.components[t.id]},o.prototype.updateComponent=function(t,e){var n=o.components[t];return n&&e&&n.setAttrs(e),n},o}(n);o.prototype.registerMetalComponent&&o.prototype.registerMetalComponent(o,"ComponentCollector"),o.components={},this.metal.ComponentCollector=o}.call(this),function(){var e=this.metalNamed.events.EventEmitter,n=this.metalNamed.events.EventHandler,o=function(e){function o(i){t.classCallCheck(this,o);var r=t.possibleConstructorReturn(this,e.call(this));return r.component_=i,r.componentRendererEvents_=new n,r.componentRendererEvents_.add(r.component_.on("attrsChanged",r.handleComponentRendererAttrsChanged_.bind(r)),r.component_.once("render",r.render.bind(r))),r}return t.inherits(o,e),o.prototype.buildElement=function(){return document.createElement("div")},o.prototype.disposeInternal=function(){this.componentRendererEvents_.removeAllListeners(),this.componentRendererEvents_=null},o.prototype.handleComponentRendererAttrsChanged_=function(t){this.component_.wasRendered&&this.update(t)},o.prototype.render=function(){},o.prototype.update=function(){},o}(e);o.prototype.registerMetalComponent&&o.prototype.registerMetalComponent(o,"ComponentRenderer"),this.metal.ComponentRenderer=o}.call(this),function(){var e=this.metalNamed.metal.array,n=this.metalNamed.metal.core,o=this.metalNamed.dom.dom,i=this.metalNamed.dom.DomEventEmitterProxy,r=this.metal.Attribute,s=this.metal.ComponentCollector,a=this.metal.ComponentRegistry,l=this.metal.ComponentRenderer,c=this.metalNamed.events.EventHandler,u=function(r){function l(o){t.classCallCheck(this,l);var i=t.possibleConstructorReturn(this,r.call(this,o));return i.components={},i.decorating_=!1,i.delegateEventHandler_=null,i.elementEventProxy_=null,i.eventsAttrHandler_=new c,i.inDocument=!1,i.initialConfig_=o||{},i.wasRendered=!1,i.DEFAULT_ELEMENT_PARENT=document.body,n.mergeSuperClassesProperty(i.constructor,"ELEMENT_CLASSES",i.mergeElementClasses_),n.mergeSuperClassesProperty(i.constructor,"ELEMENT_TAG_NAME",e.firstDefinedValue),n.mergeSuperClassesProperty(i.constructor,"RENDERER",e.firstDefinedValue),i.renderer_=new i.constructor.RENDERER_MERGED(i),i.delegateEventHandler_=new c,i.created_(),i}return t.inherits(l,r),l.prototype.addListenersFromObj_=function(t){for(var e=Object.keys(t||{}),n=0;n<e.length;n++){var o=this.extractListenerInfo_(t[e[n]]);if(o.fn){var i;i=o.selector?this.delegate(e[n],o.selector,o.fn):this.on(e[n],o.fn),this.eventsAttrHandler_.add(i)}}},l.prototype.addSingleListener_=function(t,e,n,s){!this.elementEventProxy_&&o.supportsEvent(this.constructor.ELEMENT_TAG_NAME_MERGED,t)&&(this.elementEventProxy_=new i(this.element,this)),r.prototype.addSingleListener_.call(this,t,e,n,s)},l.prototype.attach=function(t,e){return this.inDocument||(this.renderElement_(t,e),this.inDocument=!0,this.emit("attached"),this.attached()),this},l.prototype.attached=function(){},l.prototype.created_=function(){this.on("eventsChanged",this.onEventsChanged_),this.addListenersFromObj_(this.events),this.on("attrsChanged",this.handleAttributesChanges_),l.componentsCollector.addComponent(this)},l.prototype.addSubComponent=function(t,e){var n=(e||{}).id,o=l.componentsCollector.createComponent(t,e);return this.components[n||o.id]=o,o},l.prototype.decorate=function(){return this.decorating_=!0,this.render(),this.decorating_=!1,this},l.prototype.delegate=function(t,e,n){var i=o.delegate(this.element,t,e,n);return this.delegateEventHandler_.add(i),i},l.prototype.detach=function(){return this.inDocument&&(this.element.parentNode&&this.element.parentNode.removeChild(this.element),this.inDocument=!1,this.detached()),this.emit("detached"),this},l.prototype.detached=function(){},l.prototype.disposeInternal=function(){this.detach(),this.elementEventProxy_&&(this.elementEventProxy_.dispose(),this.elementEventProxy_=null),this.delegateEventHandler_.removeAllListeners(),this.delegateEventHandler_=null,this.disposeSubComponents(Object.keys(this.components)),this.components=null,this.renderer_.dispose(),this.renderer_=null,r.prototype.disposeInternal.call(this)},l.prototype.disposeSubComponents=function(t){for(var e=0;e<t.length;e++){var n=this.components[t[e]];n.isDisposed()||(l.componentsCollector.removeComponent(n),n.dispose(),delete this.components[t[e]])}},l.prototype.extractListenerInfo_=function(t){var e={fn:t};return n.isObject(t)&&!n.isFunction(t)&&(e.selector=t.selector,e.fn=t.fn),n.isString(e.fn)&&(e.fn=this.getListenerFn(e.fn)),e},l.prototype.getInitialConfig=function(){return this.initialConfig_},l.prototype.getListenerFn=function(t){var e,o=t.split(":");return 2===o.length&&(t=o[1],e=s.components[o[0]]),e=e||this,n.isFunction(e[t])?e[t].bind(e):void 0},l.prototype.findElementById=function(t){return document.getElementById(t)||this.element&&this.element.querySelector("#"+t)},l.prototype.fireAttrChange_=function(t,e){var o=this["sync"+t.charAt(0).toUpperCase()+t.slice(1)];n.isFunction(o)&&(e||(e={newVal:this[t],prevVal:void 0}),o.call(this,e.newVal,e.prevVal))},l.prototype.getComponentsWithPrefix=function(t){var e=this,n=Object.keys(this.components).filter(function(e){return 0===e.indexOf(t)}),o={};return n.forEach(function(t){return o[t]=e.components[t]}),o},l.prototype.getName=function(){return this.constructor.NAME||n.getFunctionName(this.constructor)},l.prototype.getRenderer=function(){return this.renderer_},l.prototype.handleAttributesChanges_=function(t){this.syncAttrsFromChanges_(t.changes),this.emit("attrsSynced",t)},l.prototype.makeId_=function(){return"metal_c_"+n.getUid(this)},l.prototype.mergeElementClasses_=function(t){var e={};return t.filter(function(t){return!t||e[t]?!1:(e[t]=!0,!0)}).join(" ")},l.prototype.onEventsChanged_=function(t){this.eventsAttrHandler_.removeAllListeners(),this.addListenersFromObj_(t.newVal)},l.prototype.registerMetalComponent=function(t,e){a.register(t,e)},l.prototype.render=function(t,e){if(this.wasRendered)throw new Error(l.Error.ALREADY_RENDERED);return this.emit("render",{decorating:this.decorating_}),this.syncAttrs_(),t!==!1&&this.attach(t,e),this.wasRendered=!0,this},l.prototype.renderAsSubComponent=function(){this.syncAttrs_(),this.attach(),this.wasRendered=!0},l.prototype.renderElement_=function(t,e){var n=this.element;if(n.id=this.id,e||!n.parentNode){var i=o.toElement(t)||this.DEFAULT_ELEMENT_PARENT;i.insertBefore(n,o.toElement(e))}},l.prototype.setterElementFn_=function(t){var e=o.toElement(t);return e||(e=this.valueElementFn_()),e},l.prototype.syncAttrs_=function(){for(var t=this.getAttrNames(),e=0;e<t.length;e++)this.fireAttrChange_(t[e])},l.prototype.syncAttrsFromChanges_=function(t){for(var e in t)this.fireAttrChange_(e,t[e])},l.prototype.syncElementClasses=function(t,e){var n=this.constructor.ELEMENT_CLASSES_MERGED;t&&(n=n+" "+t),e&&o.removeClasses(this.element,e),o.addClasses(this.element,n)},l.prototype.syncVisible=function(t){this.element.style.display=t?"":"none"},l.prototype.validatorElementClassesFn_=function(t){return n.isString(t)},l.prototype.validatorElementFn_=function(t){return n.isElement(t)||n.isString(t)},l.prototype.validatorEventsFn_=function(t){return!n.isDefAndNotNull(t)||n.isObject(t)},l.prototype.validatorIdFn_=function(t){return n.isString(t)},l.prototype.valueElementFn_=function(){return this.id||(this.id=this.makeId_()),this.renderer_.buildElement()},l.prototype.valueIdFn_=function(){return this.hasBeenSet("element")&&this.element.id?this.element.id:this.makeId_()},l}(r);u.prototype.registerMetalComponent&&u.prototype.registerMetalComponent(u,"Component"),u.componentsCollector=new s,u.ATTRS={element:{setter:"setterElementFn_",validator:"validatorElementFn_",valueFn:"valueElementFn_",writeOnce:!0},elementClasses:{validator:"validatorElementClassesFn_"},events:{validator:"validatorEventsFn_",value:null},id:{validator:"validatorIdFn_",valueFn:"valueIdFn_",writeOnce:!0},visible:{validator:n.isBoolean,value:!0}},u.ELEMENT_CLASSES="component",u.ELEMENT_TAG_NAME="div",u.RENDERER=l,u.Error={ALREADY_RENDERED:"Component already rendered"},u.INVALID_ATTRS=["components"],this.metal.Component=u}.call(this),function(){var e=this.metalNamed.metal.Disposable,n=this.metalNamed.events.EventHandler,o=function(e){function o(n){t.classCallCheck(this,o);var i=t.possibleConstructorReturn(this,e.call(this));if(!n)throw new Error("The component instance is mandatory");return i.component_=n,i.eventHandles_={},i.groupHasListener_={},i}return t.inherits(o,e),o.prototype.attachListener=function(t,e){var o=arguments.length<=2||void 0===arguments[2]?"element":arguments[2],i="[data-on"+t+'="'+e+'"]';if(this.groupHasListener_[o][i]=!0,!this.eventHandles_[i]){this.eventHandles_[i]=new n;for(var r=e.split(","),s=0;s<r.length;s++){var a=this.component_.getListenerFn(r[s]);a&&this.eventHandles_[i].add(this.component_.delegate(t,i,this.onEvent_.bind(this,a)))}}},o.prototype.attachListenersFromHtml=function(t){var e=arguments.length<=1||void 0===arguments[1]?"element":arguments[1];if(this.startCollecting(e),-1!==t.indexOf("data-on"))for(var n=/data-on([a-z]+)=['"]([^'"]+)['"]/g,o=n.exec(t);o;)this.attachListener(o[1],o[2],e),o=n.exec(t)},o.prototype.detachAllListeners=function(){for(var t in this.eventHandles_)this.eventHandles_[t]&&this.eventHandles_[t].removeAllListeners();this.eventHandles_={},this.listenerCounts_={}},o.prototype.detachUnusedListeners=function(){for(var t in this.eventHandles_)if(this.eventHandles_[t]){var e=!0;for(var n in this.groupHasListener_)if(this.groupHasListener_[n][t]){e=!1;break}e&&(this.eventHandles_[t].removeAllListeners(),this.eventHandles_[t]=null)}},o.prototype.disposeInternal=function(){this.detachAllListeners(),this.component_=null},o.prototype.hasAttachedForGroup=function(t){return!!this.groupHasListener_.hasOwnProperty(t)},o.prototype.onEvent_=function(t,e){var n=e.handledByComponent;return!n||n===this.component_||e.delegateTarget.contains(n.element)?(e.handledByComponent=this.component_,t(e)):void 0},o.prototype.startCollecting=function(){var t=arguments.length<=0||void 0===arguments[0]?"element":arguments[0];this.groupHasListener_[t]={}},o}(e);o.prototype.registerMetalComponent&&o.prototype.registerMetalComponent(o,"EventsCollector"),this.metal.EventsCollector=o}.call(this),function(){var e=this.metalNamed.metal.object,n=this.metalNamed.metal.Disposable,o=function(n){function o(){t.classCallCheck(this,o);var e=t.possibleConstructorReturn(this,n.call(this));return e.surfaces_={},e}return t.inherits(o,n),o.prototype.addSurface=function(t,e){this.surfaces_[t]?this.updateSurface(t,e):(this.surfaces_[t]=e||{},this.surfaces_[t].surfaceElementId=t)},o.prototype.disposeInternal=function(){this.surfaces_=null},o.prototype.getSurface=function(t){return this.surfaces_[t]?this.surfaces_[t]:null},o.prototype.removeAllSurfaces=function(){this.surfaces_=[]},o.prototype.removeSurface=function(t){this.surfaces_[t]=null},o.prototype.updateSurface=function(t,n){e.mixin(this.surfaces_[t],n)},o}(n);o.prototype.registerMetalComponent&&o.prototype.registerMetalComponent(o,"SurfaceCollector"),this.metal.SurfaceCollector=o}.call(this),function(){var e=this.metalNamed.metal.core,n=this.metalNamed.metal.string,o=function(){function o(){t.classCallCheck(this,o)}return o.compress=function(t){var e={};return t=o.preserveBlocks_(t,e),t=o.simplifyDoctype_(t),t=o.removeComments_(t),t=o.removeIntertagSpaces_(t),t=o.collapseBreakingSpaces_(t),t=o.removeSpacesInsideTags_(t),t=o.removeSurroundingSpaces_(t),t=o.returnBlocks_(t,e),t.trim()},o.collapseBreakingSpaces_=function(t){return n.collapseBreakingSpaces(t)},o.lookupPossibleTagBoundary_=function(t,e){var n=t.indexOf(e);return n>-1&&(n+=t.substring(n).indexOf(">")+1),n},o.preserveBlocks_=function(t,e){return t=o.preserveOuterHtml_(t,"<!--[if","<![endif]-->",e),t=o.preserveInnerHtml_(t,"<code","</code",e),t=o.preserveInnerHtml_(t,"<pre","</pre",e),t=o.preserveInnerHtml_(t,"<script","</script",e),t=o.preserveInnerHtml_(t,"<style","</style",e),t=o.preserveInnerHtml_(t,"<textarea","</textarea",e)},o.preserveInnerHtml_=function(t,e,n,i){for(var r=o.lookupPossibleTagBoundary_(t,e);r>-1;){var s=t.indexOf(n);t=o.preserveInterval_(t,r,s,i),t=t.replace(e,"%%%~1~%%%"),t=t.replace(n,"%%%~2~%%%"),r=o.lookupPossibleTagBoundary_(t,e)}return t=t.replace(/%%%~1~%%%/g,e),t=t.replace(/%%%~2~%%%/g,n)},o.preserveInterval_=function(t,o,i,r){var s="%%%~BLOCK~"+e.getUid()+"~%%%";return r[s]=t.substring(o,i),n.replaceInterval(t,o,i,s)},o.preserveOuterHtml_=function(t,e,n,i){for(var r=t.indexOf(e);r>-1;){var s=t.indexOf(n)+n.length;t=o.preserveInterval_(t,r,s,i),r=t.indexOf(e)}return t},o.removeComments_=function(t){var e={};return t=o.preserveOuterHtml_(t,"<![CDATA[","]]>",e),t=o.preserveOuterHtml_(t,"<!--","-->",e),t=o.replacePreservedBlocks_(t,e,"")},o.removeIntertagSpaces_=function(t){return t=t.replace(o.Patterns.INTERTAG_CUSTOM_CUSTOM,"~%%%%%%~"),t=t.replace(o.Patterns.INTERTAG_CUSTOM_TAG,"~%%%<"),t=t.replace(o.Patterns.INTERTAG_TAG,"><"),t=t.replace(o.Patterns.INTERTAG_TAG_CUSTOM,">%%%~")},o.removeSpacesInsideTags_=function(t){return t=t.replace(o.Patterns.TAG_END_SPACES,"$1$2"),t=t.replace(o.Patterns.TAG_QUOTE_SPACES,"=$1$2$3")},o.removeSurroundingSpaces_=function(t){return t.replace(o.Patterns.SURROUNDING_SPACES,"$1")},o.replacePreservedBlocks_=function(t,e,n){for(var o in e)t=t.replace(o,n);return t},o.simplifyDoctype_=function(t){var e={};return t=o.preserveOuterHtml_(t,"<!DOCTYPE",">",e),t=o.replacePreservedBlocks_(t,e,"<!DOCTYPE html>")},o.returnBlocks_=function(t,e){for(var n in e)t=t.replace(n,e[n]);return t},o}();o.Patterns={INTERTAG_CUSTOM_CUSTOM:/~%%%\s+%%%~/g,INTERTAG_TAG_CUSTOM:/>\s+%%%~/g,INTERTAG_CUSTOM_TAG:/~%%%\s+</g,INTERTAG_TAG:/>\s+</g,SURROUNDING_SPACES:/\s*(<[^>]+>)\s*/g,TAG_END_SPACES:/(<(?:[^>]+?))(?:\s+?)(\/?>)/g,TAG_QUOTE_SPACES:/\s*=\s*(["']?)\s*(.*?)\s*(\1)/g},this.metal.html=o}.call(this),function(){var e=this.metalNamed.metal.array,n=this.metalNamed.metal.core,o=this.metalNamed.metal.object,i=this.metalNamed.metal.string,r=this.metalNamed.dom.dom,s=this.metalNamed.dom.features,a=this.metalNamed.dom.globalEval,l=this.metal.html,c=this.metal.Component,u=this.metal.ComponentCollector,h=this.metal.ComponentRenderer,d=this.metal.EventsCollector,p=this.metal.SurfaceCollector,m=function(h){function p(o){t.classCallCheck(this,p);var i=t.possibleConstructorReturn(this,h.call(this,o));return i.collectedSurfaces_=[],i.generatedIdCount_={},i.removedSurfaces_=[],i.surfaceIds_={},i.eventsCollector_=new d(i.component_),n.mergeSuperClassesProperty(i.component_.constructor,"SURFACE_TAG_NAME",e.firstDefinedValue),i.component_.constructor.SURFACE_TAG_NAME_MERGED=i.component_.constructor.SURFACE_TAG_NAME_MERGED||"div",i.setShouldUseFacade(!0),i.addSurfacesFromStaticHint_(),i.addSurface(i.component_.id,{componentName:i.component_.getName()}),i.component_.once("attached",i.handleComponentAttachedOnce_.bind(i)),i.component_.on("detached",i.handleComponentDetached_.bind(i)),i.on("renderSurface",i.defaultRenderSurfaceFn_,!0),i}return t.inherits(p,h),p.prototype.addMissingAttr_=function(t,e){this.component_.getAttrConfig(t)||this.component_.addAttr(t,{},e)},p.prototype.addSurface=function(t,e){var n=e||{},o=this.getSurfaceElementId(t,n);return this.surfaceIds_[o]?p.surfacesCollector.updateSurface(o,n):(this.surfaceIds_[o]=!0,n.cacheState=n.cacheState||p.Cache.NOT_INITIALIZED,p.surfacesCollector.addSurface(o,n),n.componentName&&t!==this.component_.id&&this.addSubComponent(n.componentName,o)),this.cacheSurfaceRenderAttrs_(o,n.renderAttrs),this},p.prototype.addSurfaces=function(t){for(var e in t)this.addSurface(e,t[e]);return this},p.prototype.addSurfacesFromStaticHint_=function(){n.mergeSuperClassesProperty(this.component_.constructor,"SURFACES",this.mergeObjects_),this.surfacesRenderAttrs_={};var t=this.component_.constructor.SURFACES_MERGED;for(var e in t)this.addSurface(e,o.mixin({},t[e]))},p.prototype.addToRemovedSurfaces_=function(t){for(var e=0;e<t.length;e++){var n=this.getSurface(t[e]);this.removedSurfaces_.push(n),n.parent=null}},p.prototype.buildElement=function(){var t=this.component_.id,e=this.findElementInContent_(t,this.getElementContent_(!0)||"");return e||(e=this.findElementInContent_(t,this.getComponentHtml(""))),r.removeChildren(e),r.exitDocument(e),e},p.prototype.buildFragment_=function(t){var e=r.buildFragment(t);return-1!==t.indexOf("<script")&&a.runScriptsInElement(e),e},p.prototype.buildPlaceholder=function(t,e){return t&&e&&(e.surfaceElementId=t,this.addSurface(t,e)),"%%%%~s"+(t?"-"+t:"")+"~%%%%"},p.prototype.cacheSurfaceContent=function(t,e){var n=this.computeSurfaceCacheState_(e),o=this.getSurfaceFromElementId(t);o.cacheState=n},p.prototype.cacheSurfaceRenderAttrs_=function(t,e){for(var n=e||[],o=0;o<n.length;o++)this.surfacesRenderAttrs_[n[o]]||(this.surfacesRenderAttrs_[n[o]]={},this.addMissingAttr_(n[o],this.component_.getInitialConfig()[n[o]])),this.surfacesRenderAttrs_[n[o]][t]=!0},p.prototype.checkHasElementTag_=function(t,e){return-1!==t.indexOf(' id="'+e+'"')},p.prototype.clearSurfaceCache=function(t){this.getSurface(t).cacheState=p.Cache.NOT_INITIALIZED},p.prototype.compareCacheStates_=function(t,e){return t!==p.Cache.NOT_INITIALIZED&&t===e},p.prototype.computeSurfaceCacheState_=function(t){return t=t||"",s.checkAttrOrderChange()&&(t=this.convertHtmlToBrowserFormat_(t)),i.hashCode(t)},p.prototype.convertHtmlToBrowserFormat_=function(t){var e=document.createElement("div");return r.append(e,t),e.innerHTML},p.prototype.createPlaceholderSurface_=function(t,e){var o=e;n.isDefAndNotNull(o)||(o=this.generateSurfaceElementId(t));var i=this.getSurfaceFromElementId(o);return i||(i={surfaceElementId:o},this.addSurface(o,i)),i},p.prototype.addSubComponent=function(t,e){var n=this.getSurfaceFromElementId(e).componentData||{};return n.id=e,n.element="#"+e,this.component_.addSubComponent(t,n)},p.prototype.createSurfaceElement_=function(t){var e=document.createElement(this.component_.constructor.SURFACE_TAG_NAME_MERGED);return e.id=t,e},p.prototype.defaultRenderSurfaceFn_=function(t){var e=t.surfaceElementId,n=this.getSurfaceFromElementId(e);if(n.componentName&&e!==this.component_.id)return void this.renderComponentSurface_(e,t.content);var o=t.content||this.getSurfaceContent_(e),i=t.cacheContent||o,r=n["static"];if(!n["static"]){var s=n.cacheState;this.cacheSurfaceContent(e,i),r=this.compareCacheStates_(n.cacheState,s)}r?this.renderPlaceholderSurfaceContents_(i,e):(this.eventsCollector_.attachListenersFromHtml(i,e),this.replaceSurfaceContent_(e,n,o))},p.prototype.disposeInternal=function(){var t=this;h.prototype.disposeInternal.call(this),this.eventsCollector_.dispose(),this.eventsCollector_=null,this.surfacesRenderAttrs_=null,Object.keys(this.surfaceIds_).forEach(function(e){return t.removeSurface(e,!0)}),this.surfaceIds_=null},p.prototype.emitRenderSurfaceEvent_=function(t,e,n,o){this.emit("renderSurface",{cacheContent:n,content:e,renderAttrs:o||[],surfaceElementId:t,surfaceId:this.getSurfaceId(this.getSurfaceFromElementId(t))})},p.prototype.findElementInContent_=function(t,e){e=n.isString(e)?r.buildFragment(e):e;var o=e.childNodes[0];return o&&o.id===t?o:void 0},p.prototype.generateSurfaceElementId=function(t){return this.generatedIdCount_[t]=(this.generatedIdCount_[t]||0)+1,t+"-s"+this.generatedIdCount_[t]},p.prototype.getComponentHtml=function(t){return this.wrapContentIfNecessary(t,this.component_.id,this.component_.constructor.ELEMENT_TAG_NAME_MERGED)},p.prototype.getElementContent_=function(t){return this.getSurfaceContent(this.getSurface(this.component_.id),t)},p.prototype.getElementExtendedContent=function(){var t=this.getElementContent_()||"";return this.eventsCollector_.attachListenersFromHtml(t,this.component_.id),this.cacheSurfaceContent(this.component_.id,t),this.replaceSurfacePlaceholders_(t,this.component_.id,this.getSurface(this.component_.id))},p.prototype.getModifiedSurfacesFromChanges_=function(t){var e={};for(var n in t)for(var o=Object.keys(this.surfacesRenderAttrs_[n]||{}),i=0;i<o.length;i++)e[o[i]]||(e[o[i]]=[]),e[o[i]].push(n);return e},p.prototype.getNonComponentSurfaceHtml=function(t,e){return this.wrapContentIfNecessary(e,t,this.component_.constructor.SURFACE_TAG_NAME_MERGED)},p.prototype.getSurface=function(t){var e=this.getSurfaceFromElementId(this.getSurfaceElementId(t));return e?e:this.getSurfaceFromElementId(t)},p.prototype.getSurfaceContent=function(){n.abstractMethod()},p.prototype.getSurfaceContent_=function(t){var e=this.getSurfaceFromElementId(t);if(e.componentName&&t!==this.component_.id){var n=u.components[t];return n.wasRendered?"":n.getRenderer().getElementExtendedContent()}return this.getSurfaceContent(e)||""},p.prototype.getSurfaceElement=function(t,e){var n=e||this.getSurface(t);if(!n)return null;if(!n.element)if(n.componentName){var o=u.components[t];o&&(n.element=o.element)}else{var i=this.getSurfaceElementId(t,n);n.element=this.component_.findElementById(i)||this.createSurfaceElement_(i)}return n.element},p.prototype.getSurfaceElementId=function(t,e){var n=e||{};return n.surfaceElementId?n.surfaceElementId:n.componentName||this.hasComponentPrefix_(t)?t:this.prefixSurfaceId(t)},p.prototype.getSurfaceFromElementId=function(t){return p.surfacesCollector.getSurface(t)},p.prototype.getSurfaceHtml_=function(t,e){var n=t.surfaceElementId;if(t.componentName){var o=u.components[n];return o.getRenderer().getComponentHtml(e)}return this.getNonComponentSurfaceHtml(n,e)},p.prototype.getSurfaceId=function(t){return t.componentName||!this.hasComponentPrefix_(t.surfaceElementId)?t.surfaceElementId:t.surfaceElementId.substr(this.component_.id.length+1)},p.prototype.getSurfaces=function(){var t={};return Object.keys(this.surfaceIds_).forEach(function(e){var n=this.getSurfaceFromElementId(e);t[this.getSurfaceId(n)]=n}.bind(this)),t},p.prototype.handleComponentAttachedOnce_=function(){this.updatePlaceholderSurfaces_()},p.prototype.handleComponentDetached_=function(){this.eventsCollector_.detachAllListeners()},p.prototype.hasComponentPrefix_=function(t){var e=this.component_.id;return t.substr(0,e.length)===e&&(t.length===e.length||"-"===t[e.length])},p.prototype.mergeObjects_=function(t){return o.mixin.apply(null,[{}].concat(t.reverse()))},p.prototype.prefixSurfaceId=function(t){return this.component_.id+"-"+t},p.prototype.removeSurface=function(t,e){if(!e){var n=this.getSurfaceElement(t);n&&n.parentNode&&n.parentNode.removeChild(n)}var o=this.getSurfaceElementId(t,this.getSurface(t));return p.surfacesCollector.removeSurface(o),this.surfaceIds_[o]=!1,this},p.prototype.removeUnusedSurfaces_=function(){for(var t=[],e=0;e<this.removedSurfaces_.length;e++){var n=this.removedSurfaces_[e];n.parent||(this.removeSurface(n.surfaceElementId),n.componentName&&t.push(n.surfaceElementId))}this.component_.disposeSubComponents(t)},p.prototype.render=function(t){var e=this.component_.id;if(t.decorating){var n=this.getElementExtendedContent(),o=this.computeSurfaceCacheState_(n),i=l.compress(this.component_.element.outerHTML),r=this.computeSurfaceCacheState_(i);this.compareCacheStates_(r,o)||this.replaceElementContent(n)}else this.emitRenderSurfaceEvent_(e)},p.prototype.renderComponentSurface_=function(t,e){var n=u.components[t];if(n.wasRendered){var o=this.getSurfaceFromElementId(t);c.componentsCollector.updateComponent(t,o.componentData)}else e&&r.isEmpty(n.element)&&n.getRenderer().replaceElementContent(e),n.renderAsSubComponent()},p.prototype.renderPlaceholderSurfaceContents_=function(t,e){var n=this;t.replace(p.SURFACE_REGEX,function(t,o){var i=n.createPlaceholderSurface_(e,o);return n.emitRenderSurfaceEvent_(i.surfaceElementId),t})},p.prototype.renderSurfacesContent_=function(t){this.generatedIdCount_={},this.removedSurfaces_=[];var e=this.component_.id,n=Object.keys(t),o=n.indexOf(e);-1!==o&&(n.splice(o,1),n=[e].concat(n));for(var i=0;i<n.length;i++){var r=this.getSurfaceFromElementId(n[i]);r.handled||!r.parent&&n[i]!==e||this.emitRenderSurfaceEvent_(n[i],null,null,t[n[i]])}this.updatePlaceholderSurfaces_(),this.eventsCollector_.detachUnusedListeners(),this.removeUnusedSurfaces_()},p.prototype.replaceElementContent=function(t){var e=this.component_.element,n=this.buildFragment_(t),o=this.findElementInContent_(this.component_.id,n);o&&(this.updateElementAttributes_(e,o),n=o.childNodes),r.removeChildren(e),r.append(e,n)},p.prototype.replaceSurfaceContent_=function(t,e,n){if(n=this.replaceSurfacePlaceholders_(n,t,e),t===this.component_.id)return void this.replaceElementContent(n);var o=this.getSurfaceElement(t),i=this.buildFragment_(n),s=this.findElementInContent_(t,i);s?(e.element=s,r.replace(o,e.element)):(r.removeChildren(o),r.append(o,i))},p.prototype.replaceSurfacePlaceholders_=function(t,e,n){n.componentName&&e!==this.component_.id||(this.addToRemovedSurfaces_(n.children||[]),n.children=[]);var o=this;return t.replace(p.SURFACE_REGEX,function(t,i){var r=o.createPlaceholderSurface_(e,i);i=r.surfaceElementId,r.handled=!0,r.parent=e,n.children.push(i);var s=o.getSurfaceContent_(i),a=o.getSurfaceHtml_(r,s),l=o.replaceSurfacePlaceholders_(a,i,r);return o.collectedSurfaces_.push({cacheContent:s,content:l,surface:r}),l})},p.prototype.update=function(t){this.renderSurfacesContent_(this.getModifiedSurfacesFromChanges_(t.changes))},p.prototype.updateElementAttributes_=function(t,e){for(var n=e.attributes,o=0;o<n.length;o++)"id"!==n[o].name&&"class"!==n[o].name&&t.setAttribute(n[o].name,n[o].value);t.tagName!==e.tagName},p.prototype.updatePlaceholderSurface_=function(t){var e=t.surface,n=e.surfaceElementId;e.componentName?(r.replace(this.component_.findElementById(n),this.getSurfaceElement(n,e)),this.emitRenderSurfaceEvent_(n,t.content,t.cacheContent)):(e.element=null,this.cacheSurfaceContent(n,t.cacheContent),this.eventsCollector_.attachListenersFromHtml(t.cacheContent,n))},p.prototype.updatePlaceholderSurfaces_=function(){for(var t=this.collectedSurfaces_.length-1;t>=0;t--)this.updatePlaceholderSurface_(this.collectedSurfaces_[t]),this.collectedSurfaces_[t].surface.handled=!1;this.collectedSurfaces_=[]},p.prototype.wrapContentIfNecessary=function(t,e,n){return this.checkHasElementTag_(t,e)||(t="<"+n+' id="'+e+'">'+t+"</"+n+">"),t},p}(h);m.prototype.registerMetalComponent&&m.prototype.registerMetalComponent(m,"SurfaceRenderer"),m.Cache={NOT_INITIALIZED:-2},m.SURFACE_REGEX=/\%\%\%\%~s(?:-([^~:]+))?~\%\%\%\%/g,m.surfacesCollector=new p,this.metal.SurfaceRenderer=m}.call(this),function(){var t=this.metal.Component,e=this.metal.ComponentCollector,n=this.metal.ComponentRegistry,o=this.metal.ComponentRenderer,i=this.metal.EventsCollector,r=this.metal.SurfaceCollector,s=this.metal.SurfaceRenderer;this.metal.component=t,this.metalNamed.component={},this.metalNamed.component.Component=t,this.metalNamed.component.ComponentCollector=e,this.metalNamed.component.ComponentRegistry=n,this.metalNamed.component.ComponentRenderer=o,this.metalNamed.component.EventsCollector=i,this.metalNamed.component.SurfaceCollector=r,this.metalNamed.component.SurfaceRenderer=s}.call(this),function(){var e={},n=function(){function n(){t.classCallCheck(this,n)}return n.get=function(t,o){return t?o?n.get(t)[o]:e[t]||{}:e},n.set=function(t,n){e[t]=n},n}();this.metal.SoyTemplates=n}.call(this),function(){var t=this.metal.SoyTemplates,e={interceptFn_:null,getOriginalFn:function(t){return t.originalFn?t.originalFn:t},handleTemplateCall_:function(t,n,o,i,r,s){return e.interceptFn_?e.interceptFn_.call(null,t,n,o,i,r,s):o.call(null,i,r,s)},registerTemplates:function(n){var o=t.get(n);Object.keys(o).forEach(function(t){var i=o[t];i.originalFn||(o[t]=e.handleTemplateCall_.bind(null,n,t,i),o[t].originalFn=i)})},startInterception:function(t){e.interceptFn_=t},stopInterception:function(){e.interceptFn_=null}};this.metal.SoyAop=e}.call(this),function(){var e=this.metalNamed.metal.core,n=this.metalNamed.metal.object,o=this.metal.dom,i=this.metalNamed.component.Component,r=this.metalNamed.component.ComponentRegistry,s=this.metalNamed.component.SurfaceRenderer,a=this.metal.SoyAop,l=this.metal.SoyTemplates,c={},u=function(s){
function u(){return t.classCallCheck(this,u),t.possibleConstructorReturn(this,s.apply(this,arguments))}return t.inherits(u,s),u.prototype.addSurfacesFromTemplates_=function(){for(var t=this.component_.getName(),e=l.get(t),n=Object.keys(e),o=0;o<n.length;o++){var i=n[o],r=a.getOriginalFn(e[i]);if(u.isSurfaceTemplate_(i,r)){var s="render"===i?this.component_.id:i;this.addSurface(s,{renderAttrs:r.params,templateComponentName:t,templateName:i})}}},u.buildComponentConfigData_=function(t,e){var n={id:t};for(var o in e)n[o]=e[o];return n},u.prototype.buildTemplateData_=function(){var t=this.component_,o=t.getAttrNames().filter(function(t){return"element"!==t}),i=this.getSurface(t.id),r=i&&i.componentData?i.componentData:{},s=n.map(t.getAttrs(o),function(n,o){return t.getAttrConfig(n).isHtml&&e.isString(o)?u.sanitizeHtml(o):o});return n.mixin(r,s)},u.createComponentFromTemplate=function(s,c,h){var d=c?o.toElement(c):null,p=n.mixin({id:d?d.id:null},h,{element:d}),m="TemplateComponent"+e.getUid(),f=function(e){function n(){return t.classCallCheck(this,n),t.possibleConstructorReturn(this,e.apply(this,arguments))}return t.inherits(n,e),n}(i);return f.prototype.registerMetalComponent&&f.prototype.registerMetalComponent(f,"TemplateComponent"),f.RENDERER=u,r.register(f,m),l.set(m,{render:function(t,e,n){return a.getOriginalFn(s)(p,e,n)}}),a.registerTemplates(m),new f(p)},u.decorateFromTemplate=function(t,e,n){return u.createComponentFromTemplate(t,e,n).decorate()},u.prototype.generateSurfaceElementId=function(t,e){return e.templateName&&t===this.component_.id&&!this.firstSurfaceFound_[e.templateName]?(this.firstSurfaceFound_[e.templateName]=!0,this.prefixSurfaceId(e.templateName)):s.prototype.generateSurfaceElementId.call(this,t)},u.prototype.getSurfaceContent=function(t,e){t.surfaceElementId===this.component_.id&&(t.renderAttrs||this.addSurfacesFromTemplates_(),this.firstSurfaceFound_={}),this.surfaceBeingRendered_=t.surfaceElementId,this.skipInnerCalls_=this.skipInnerCalls_||e;var n=t.templateData;t.templateData=null;var o=this.renderTemplateByName_(t.templateComponentName,t.templateName,n);return this.surfaceBeingRendered_=null,this.skipInnerCalls_=!1,o},u.prototype.handleComponentCall_=function(t,e){var n={componentName:t},o=(e||{}).id;return o||(o=this.generateSurfaceElementId(this.surfaceBeingRendered_,n)),n.componentData=u.buildComponentConfigData_(o,e),this.buildPlaceholder(o,n)},u.prototype.handleInterceptedCall_=function(t,e,n,o,i,r){return this.skipInnerCalls_?"":"render"===e?this.handleComponentCall_.call(this,t,o):this.handleSurfaceCall_.call(this,t,e,n,o,i,r)},u.prototype.handleSurfaceCall_=function(t,n,o,i,r,s){var a,l={"static":o["static"],templateComponentName:t,templateData:i,templateName:n};if(e.isDefAndNotNull(i.surfaceElementId))a=i.surfaceElementId;else if(e.isDefAndNotNull(i.surfaceId))a=this.getSurfaceElementId(i.surfaceId.toString());else{if(o["private"])return o.call(null,i,r,s);a=this.generateSurfaceElementId(this.surfaceBeingRendered_,l)}return this.buildPlaceholder(a,l)},u.isSurfaceTemplate_=function(t,e){return"__deltemplate"!==t.substr(0,13)&&!e["private"]},u.renderFromTemplate=function(t,e,n){return u.createComponentFromTemplate(t,e,n).render()},u.prototype.renderTemplate_=function(t,e){a.startInterception(this.handleInterceptedCall_.bind(this)),t=a.getOriginalFn(t);var n=t(e||this.buildTemplateData_(),null,c).content;return a.stopInterception(),n},u.prototype.renderTemplateByName_=function(t,n,o){var i=l.get(t,n);return e.isFunction(i)?this.renderTemplate_(i,o):void 0},u.sanitizeHtml=function(t){return soydata.VERY_UNSAFE.ordainSanitizedHtml(t)},u.setInjectedData=function(t){c=t||{}},u}(s);u.prototype.registerMetalComponent&&u.prototype.registerMetalComponent(u,"SoyRenderer");var h=soydata.SanitizedHtml.from;soydata.SanitizedHtml.from=function(t){return t&&"HTML"===t.contentKind&&(t=u.sanitizeHtml(t.content)),h(t)},this.metal.SoyRenderer=u}.call(this),function(){var t=this.metal.SoyAop,e=this.metal.SoyRenderer,n=this.metal.SoyTemplates;this.metal.soy=e,this.metalNamed.soy={},this.metalNamed.soy.SoyAop=t,this.metalNamed.soy.SoyRenderer=e,this.metalNamed.soy.SoyTemplates=n}.call(this),function(){var e=this.metal.component,n=this.metalNamed.soy.SoyAop,o=this.metalNamed.soy.SoyRenderer,i=this.metalNamed.soy.SoyTemplates,r=i.get();"undefined"==typeof r.Alert&&(r.Alert={}),r.Alert.render=function(t,e,n){return soydata.VERY_UNSAFE.ordainSanitizedHtml('<div id="'+soy.$$escapeHtmlAttribute(t.id)+'" class="alert alert-dismissible component'+soy.$$escapeHtmlAttribute(t.elementClasses?" "+t.elementClasses:"")+'" role="alert">'+(t.spinner?'<span class="alert-spinner'+soy.$$escapeHtmlAttribute(t.spinnerClasses?" "+t.spinnerClasses:"")+soy.$$escapeHtmlAttribute(t.spinnerDone?" alert-spinner-done":"")+'"></span>':"")+'<span class="alert-body">'+(t.body?soy.$$escapeHtml(t.body):"")+"</span>"+(t.dismissible?'<button type="button" class="close" aria-label="Close" data-onclick="toggle"><span aria-hidden="true">×</span></button>':"")+"</div>")},goog.DEBUG&&(r.Alert.render.soyTemplateName="Templates.Alert.render"),r.Alert.render.params=["body","dismissible","id","spinner","spinnerDone","spinnerClasses"];var s=function(e){function n(){return t.classCallCheck(this,n),t.possibleConstructorReturn(this,e.apply(this,arguments))}return t.inherits(n,e),n}(e);s.prototype.registerMetalComponent&&s.prototype.registerMetalComponent(s,"Alert"),s.RENDERER=o,n.registerTemplates("Alert"),this.metal.Alert=s}.call(this),function(){var e=this.metal.metal,n=this.metalNamed.dom.dom,o=this.metalNamed.dom.features,i=function(){function i(){t.classCallCheck(this,i)}return i.emulateEnd=function(t,e){return this.getComputedDurationMs(t,"animation")>this.getComputedDurationMs(t,"transition")?this.emulateEnd_(t,"animation",e):this.emulateEnd_(t,"transition",e)},i.emulateAnimationEnd=function(t,e){return this.emulateEnd_(t,"animation",e)},i.emulateTransitionEnd=function(t,e){this.emulateEnd_(t,"transition",e)},i.emulateEnd_=function(t,i,r){var s=r;e.isDef(r)||(s=this.getComputedDurationMs(t,i));var a=setTimeout(function(){n.triggerEvent(t,o.checkAnimationEventName()[i])},s),l=function(){clearTimeout(a),c.removeListener()},c=n.once(t,i+"end",l);return{abort:l}},i.getComputedDurationMs=function(t,e){return 1e3*(parseFloat(window.getComputedStyle(t,null).getPropertyValue(e+"-duration"))||0)},i}();this.metal.Anim=i}.call(this),function(){var e=this.metalNamed.metal.core,n=this.metal.dom,o=this.metal.Alert,i=this.metal.Anim,r=this.metalNamed.events.EventHandler,s=function(o){function s(e){t.classCallCheck(this,s);var n=t.possibleConstructorReturn(this,o.call(this,e));return n.eventHandler_=new r,n}return t.inherits(s,o),s.prototype.detached=function(){o.prototype.detached.call(this),this.eventHandler_.removeAllListeners(),clearTimeout(this.delay_)},s.prototype.close=function(){n.once(this.element,"animationend",this.dispose.bind(this)),n.once(this.element,"transitionend",this.dispose.bind(this)),this.eventHandler_.removeAllListeners(),this.syncVisible(!1)},s.prototype.handleDocClick_=function(t){this.element.contains(t.target)||this.hide()},s.prototype.hide=function(){this.visible=!1},s.prototype.toggle=function(){this.visible=!this.visible},s.prototype.show=function(){this.visible=!0},s.prototype.syncDismissible=function(t){t?this.eventHandler_.add(n.on(document,"click",this.handleDocClick_.bind(this))):this.eventHandler_.removeAllListeners(),n[t?"addClasses":"removeClasses"](this.element,"alert-dismissible")},s.prototype.syncVisible=function(t){n.removeClasses(this.element,this.animClasses[t?"hide":"show"]),n.addClasses(this.element,this.animClasses[t?"show":"hide"]),i.emulateEnd(this.element),t&&e.isNumber(this.hideDelay)&&this.syncHideDelay(this.hideDelay)},s.prototype.syncHideDelay=function(t){e.isNumber(t)&&this.visible&&(clearTimeout(this.delay_),this.delay_=setTimeout(this.hide.bind(this),t))},s}(o);s.prototype.registerMetalComponent&&s.prototype.registerMetalComponent(s,"Alert"),s.ELEMENT_CLASSES="alert",s.ATTRS={animClasses:{validator:e.isObject,value:{show:"fade in",hide:"fade"}},body:{value:""},dismissible:{validator:e.isBoolean,value:!0},elementClasses:{value:"alert-success"},hideDelay:{},spinner:{value:!1},spinnerClasses:{},spinnerDone:{value:!1},visible:{value:!1}},this.metal.Alert=s}.call(this),function(){function t(t,e){var n;return function(){var o=arguments;clearTimeout(n),n=setTimeout(function(){t.apply(null,o)},e)}}this.metal.debounce=t}.call(this),function(){var e=this.metalNamed.metal.core,n=this.metalNamed.metal.async,o=function(){};o.prototype.then=function(){},o.IMPLEMENTED_BY_PROP="$goog_Thenable",o.addImplementation=function(t){t.prototype.then=t.prototype.then,t.prototype.$goog_Thenable=!0},o.isImplementedBy=function(t){if(!t)return!1;try{return!!t.$goog_Thenable}catch(e){return!1}};var i=function(t){var e=Array.prototype.slice.call(arguments,1);return function(){var n=e.slice();return n.push.apply(n,arguments),t.apply(this,n)}},r=function s(t,e){this.state_=s.State_.PENDING,this.result_=void 0,this.parent_=null,this.callbackEntries_=null,this.executing_=!1,s.UNHANDLED_REJECTION_DELAY>0?this.unhandledRejectionId_=0:0===s.UNHANDLED_REJECTION_DELAY&&(this.hadUnhandledRejection_=!1);try{var n=this;t.call(e,function(t){n.resolve_(s.State_.FULFILLED,t)},function(t){n.resolve_(s.State_.REJECTED,t)})}catch(o){this.resolve_(s.State_.REJECTED,o)}};r.UNHANDLED_REJECTION_DELAY=0,r.State_={PENDING:0,BLOCKED:1,FULFILLED:2,REJECTED:3},r.CallbackEntry_=null,r.resolve=function(t){return new r(function(e){e(t)})},r.reject=function(t){return new r(function(e,n){n(t)})},r.race=function(t){return new r(function(e,n){t.length||e(void 0);for(var o,i=0;o=t[i];i++)o.then(e,n)})},r.all=function(t){return new r(function(e,n){var o=t.length,r=[];if(!o)return void e(r);for(var s,a=function(t,n){o--,r[t]=n,0===o&&e(r)},l=function(t){n(t)},c=0;s=t[c];c++)s.then(i(a,c),l)})},r.firstFulfilled=function(t){return new r(function(e,n){var o=t.length,r=[];if(!o)return void e(void 0);for(var s,a=function(t){e(t)},l=function(t,e){o--,r[t]=e,0===o&&n(r)},c=0;s=t[c];c++)s.then(a,i(l,c))})},r.prototype.then=function(t,n,o){return this.addChildPromise_(e.isFunction(t)?t:null,e.isFunction(n)?n:null,o)},o.addImplementation(r),r.prototype.thenAlways=function(t,e){var n=function(){try{t.call(e)}catch(n){r.handleRejection_.call(null,n)}};return this.addCallbackEntry_({child:null,onRejected:n,onFulfilled:n}),this},r.prototype.thenCatch=function(t,e){return this.addChildPromise_(null,t,e)},r.prototype["catch"]=r.prototype.thenCatch,r.prototype.cancel=function(t){this.state_===r.State_.PENDING&&n.run(function(){var e=new r.CancellationError(t);e.IS_CANCELLATION_ERROR=!0,this.cancelInternal_(e)},this)},r.prototype.cancelInternal_=function(t){this.state_===r.State_.PENDING&&(this.parent_?this.parent_.cancelChild_(this,t):this.resolve_(r.State_.REJECTED,t))},r.prototype.cancelChild_=function(t,e){if(this.callbackEntries_){for(var n,o=0,i=-1,s=0;n=this.callbackEntries_[s];s++){var a=n.child;if(a&&(o++,a===t&&(i=s),i>=0&&o>1))break}if(i>=0)if(this.state_===r.State_.PENDING&&1===o)this.cancelInternal_(e);else{var l=this.callbackEntries_.splice(i,1)[0];this.executeCallback_(l,r.State_.REJECTED,e)}}},r.prototype.addCallbackEntry_=function(t){this.callbackEntries_&&this.callbackEntries_.length||this.state_!==r.State_.FULFILLED&&this.state_!==r.State_.REJECTED||this.scheduleCallbacks_(),this.callbackEntries_||(this.callbackEntries_=[]),this.callbackEntries_.push(t)},r.prototype.addChildPromise_=function(t,n,o){var i={child:null,onFulfilled:null,onRejected:null};return i.child=new r(function(r,s){i.onFulfilled=t?function(e){try{var n=t.call(o,e);r(n)}catch(i){s(i)}}:r,i.onRejected=n?function(t){try{var i=n.call(o,t);!e.isDef(i)&&t.IS_CANCELLATION_ERROR?s(t):r(i)}catch(a){s(a)}}:s}),i.child.parent_=this,this.addCallbackEntry_(i),i.child},r.prototype.unblockAndFulfill_=function(t){if(this.state_!==r.State_.BLOCKED)throw new Error("CancellablePromise is not blocked.");this.state_=r.State_.PENDING,this.resolve_(r.State_.FULFILLED,t)},r.prototype.unblockAndReject_=function(t){if(this.state_!==r.State_.BLOCKED)throw new Error("CancellablePromise is not blocked.");this.state_=r.State_.PENDING,this.resolve_(r.State_.REJECTED,t)},r.prototype.resolve_=function(t,n){if(this.state_===r.State_.PENDING){if(this===n)t=r.State_.REJECTED,n=new TypeError("CancellablePromise cannot resolve to itself");else{if(o.isImplementedBy(n))return n=n,this.state_=r.State_.BLOCKED,void n.then(this.unblockAndFulfill_,this.unblockAndReject_,this);if(e.isObject(n))try{var i=n.then;if(e.isFunction(i))return void this.tryThen_(n,i)}catch(s){t=r.State_.REJECTED,n=s}}this.result_=n,this.state_=t,this.scheduleCallbacks_(),t!==r.State_.REJECTED||n.IS_CANCELLATION_ERROR||r.addUnhandledRejection_(this,n)}},r.prototype.tryThen_=function(t,e){this.state_=r.State_.BLOCKED;var n=this,o=!1,i=function(t){o||(o=!0,n.unblockAndFulfill_(t))},s=function(t){o||(o=!0,n.unblockAndReject_(t))};try{e.call(t,i,s)}catch(a){s(a)}},r.prototype.scheduleCallbacks_=function(){this.executing_||(this.executing_=!0,n.run(this.executeCallbacks_,this))},r.prototype.executeCallbacks_=function(){for(;this.callbackEntries_&&this.callbackEntries_.length;){var t=this.callbackEntries_;this.callbackEntries_=[];for(var e=0;e<t.length;e++)this.executeCallback_(t[e],this.state_,this.result_)}this.executing_=!1},r.prototype.executeCallback_=function(t,e,n){e===r.State_.FULFILLED?t.onFulfilled(n):(this.removeUnhandledRejection_(),t.onRejected(n))},r.prototype.removeUnhandledRejection_=function(){var t;if(r.UNHANDLED_REJECTION_DELAY>0)for(t=this;t&&t.unhandledRejectionId_;t=t.parent_)clearTimeout(t.unhandledRejectionId_),t.unhandledRejectionId_=0;else if(0===r.UNHANDLED_REJECTION_DELAY)for(t=this;t&&t.hadUnhandledRejection_;t=t.parent_)t.hadUnhandledRejection_=!1},r.addUnhandledRejection_=function(t,e){r.UNHANDLED_REJECTION_DELAY>0?t.unhandledRejectionId_=setTimeout(function(){r.handleRejection_.call(null,e)},r.UNHANDLED_REJECTION_DELAY):0===r.UNHANDLED_REJECTION_DELAY&&(t.hadUnhandledRejection_=!0,n.run(function(){t.hadUnhandledRejection_&&r.handleRejection_.call(null,e)}))},r.handleRejection_=n.throwException,r.setUnhandledRejectionHandler=function(t){r.handleRejection_=t},r.CancellationError=function(e){function n(o){t.classCallCheck(this,n);var i=t.possibleConstructorReturn(this,e.call(this,o));return o&&(i.message=o),i}return t.inherits(n,e),n}(Error),r.CancellationError.prototype.name="cancel",this.metalNamed.Promise={},this.metalNamed.Promise.CancellablePromise=r,this.metal.Promise=r}.call(this),function(){var e=this.metal.metal,n=this.metal.dom,o=this.metal.Promise,i=this.metal.component,r=this.metalNamed.events.EventHandler,s=function(i){function s(e){t.classCallCheck(this,s);var n=t.possibleConstructorReturn(this,i.call(this,e));return n.eventHandler_=new r,n.on("select",n.select),n}return t.inherits(s,i),s.prototype.attached=function(){this.inputElement&&this.eventHandler_.add(n.on(this.inputElement,"input",this.handleUserInput_.bind(this)))},s.prototype.detached=function(){this.eventHandler_.removeAllListeners()},s.prototype.handleUserInput_=function(){this.request(this.inputElement.value)},s.prototype.request=function(t){var n=this;this.pendingRequest&&this.pendingRequest.cancel("Cancelled by another request");var i=n.data(t);return e.isPromise(i)||(i=o.resolve(i)),this.pendingRequest=i.then(function(t){return Array.isArray(t)?t.map(n.format.bind(n)).filter(function(t){return e.isDefAndNotNull(t)}):void 0}),this.pendingRequest},s.prototype.setData_=function(t){return e.isFunction(t)?t:function(){return t}},s}(i);s.prototype.registerMetalComponent&&s.prototype.registerMetalComponent(s,"AutocompleteBase"),s.ATTRS={data:{setter:"setData_"},format:{value:e.identityFunction,validator:e.isFunction},inputElement:{setter:n.toElement},select:{value:function(t){this.inputElement.value=t.textPrimary,this.inputElement.focus()},validator:e.isFunction},visible:{validator:e.isBoolean,value:!1}},this.metal.AutocompleteBase=s}.call(this),function(){var e=this.metal.component,n=this.metalNamed.soy.SoyAop,o=this.metalNamed.soy.SoyRenderer,i=this.metalNamed.soy.SoyTemplates,r=i.get();"undefined"==typeof r.Autocomplete&&(r.Autocomplete={}),r.Autocomplete.render=function(t,e,n){return soydata.VERY_UNSAFE.ordainSanitizedHtml('<div id="'+soy.$$escapeHtmlAttribute(t.id)+'" class="autocomplete autocomplete-list component '+soy.$$escapeHtmlAttribute(t.elementClasses?" "+t.elementClasses:"")+'">'+soy.$$escapeHtml(r.List.render({events:{itemSelected:t.id+":onListItemSelected_"},id:t.id+"-list"},null,n))+"</div>")},goog.DEBUG&&(r.Autocomplete.render.soyTemplateName="Templates.Autocomplete.render"),r.Autocomplete.render.params=["id"];var s=function(e){function n(){return t.classCallCheck(this,n),t.possibleConstructorReturn(this,e.apply(this,arguments))}return t.inherits(n,e),n}(e);s.prototype.registerMetalComponent&&s.prototype.registerMetalComponent(s,"Autocomplete"),s.RENDERER=o,n.registerTemplates("Autocomplete"),this.metal.Autocomplete=s}.call(this),function(){var e=this.metal.component,n=this.metalNamed.soy.SoyAop,o=this.metalNamed.soy.SoyRenderer,i=this.metalNamed.soy.SoyTemplates,r=i.get();"undefined"==typeof r.List&&(r.List={}),r.List.render=function(t,e,n){return soydata.VERY_UNSAFE.ordainSanitizedHtml('<div id="'+soy.$$escapeHtmlAttribute(t.id)+'" class="list component'+soy.$$escapeHtmlAttribute(t.elementClasses?" "+t.elementClasses:"")+'">'+r.List.items(t,null,n)+"</div>")},goog.DEBUG&&(r.List.render.soyTemplateName="Templates.List.render"),r.List.items=function(t,e,n){var o='<ul id="'+soy.$$escapeHtmlAttribute(t.id)+'-items" class="list-group" data-onclick="handleClick">';if(null!=t.itemsHtml)o+=soy.$$escapeHtml(t.itemsHtml);else for(var i=t.items,s=i.length,a=0;s>a;a++){var l=i[a];o+=r.ListItem.render({id:t.id+"-items-"+a,index:a,item:l},null,n)}return o+="</ul>",soydata.VERY_UNSAFE.ordainSanitizedHtml(o)},goog.DEBUG&&(r.List.items.soyTemplateName="Templates.List.items"),r.List.render.params=["id"],r.List.items.params=["id","items","itemsHtml"];var s=function(e){function n(){return t.classCallCheck(this,n),t.possibleConstructorReturn(this,e.apply(this,arguments))}return t.inherits(n,e),n}(e);s.prototype.registerMetalComponent&&s.prototype.registerMetalComponent(s,"List"),s.RENDERER=o,n.registerTemplates("List"),this.metal.List=s}.call(this),function(){var e=this.metal.component,n=this.metalNamed.soy.SoyAop,o=this.metalNamed.soy.SoyRenderer,i=this.metalNamed.soy.SoyTemplates,r=i.get();"undefined"==typeof r.ListItem&&(r.ListItem={}),r.ListItem.render=function(t,e,n){return soydata.VERY_UNSAFE.ordainSanitizedHtml('<li id="'+soy.$$escapeHtmlAttribute(t.id)+'" class="listitem list-group-item component'+soy.$$escapeHtmlAttribute(t.elementClasses?" "+t.elementClasses:"")+' clearfix" data-index="'+soy.$$escapeHtmlAttribute(t.index)+'">'+r.ListItem.item(t,null,n)+"</li>")},goog.DEBUG&&(r.ListItem.render.soyTemplateName="Templates.ListItem.render"),r.ListItem.item=function(t,e,n){var o=(t.item.avatar?'<span class="list-image pull-left '+soy.$$escapeHtmlAttribute(t.item.avatar["class"])+'">'+soy.$$escapeHtml(t.item.avatar.content)+"</span>":"")+'<div class="list-main-content pull-left"><div class="list-text-primary">'+soy.$$escapeHtml(t.item.textPrimary)+"</div>"+(t.item.textSecondary?'<div class="list-text-secondary">'+soy.$$escapeHtml(t.item.textSecondary)+"</div>":"")+"</div>";if(t.item.icons)for(var i=t.item.icons,r=i.length,s=0;r>s;s++){var a=i[s];o+='<span class="btn-icon '+soy.$$escapeHtmlAttribute(a)+' pull-right"></span>'}if(t.item.iconsHtml){o+='<div class="pull-right">';for(var l=t.item.iconsHtml,c=l.length,u=0;c>u;u++){var h=l[u];o+=soy.$$escapeHtml(h)}o+="</div>"}return o+=t.item.label?'<span class="label list-label pull-right '+soy.$$escapeHtmlAttribute(t.item.label["class"])+'">'+soy.$$escapeHtml(t.item.label.content)+"</span>":"",soydata.VERY_UNSAFE.ordainSanitizedHtml(o)},goog.DEBUG&&(r.ListItem.item.soyTemplateName="Templates.ListItem.item"),r.ListItem.render.params=["id","index","item"],r.ListItem.item.params=["item"];var s=function(e){function n(){return t.classCallCheck(this,n),t.possibleConstructorReturn(this,e.apply(this,arguments))}return t.inherits(n,e),n}(e);s.prototype.registerMetalComponent&&s.prototype.registerMetalComponent(s,"ListItem"),s.RENDERER=o,n.registerTemplates("ListItem"),this.metal.ListItem=s}.call(this),function(){var e=this.metal.ListItem,n=function(e){function n(o){return t.classCallCheck(this,n),t.possibleConstructorReturn(this,e.call(this,o))}return t.inherits(n,e),n}(e);n.prototype.registerMetalComponent&&n.prototype.registerMetalComponent(n,"ListItem"),n.ELEMENT_CLASSES="listitem",n.ATTRS={item:{},index:{value:-1}},this.metal.ListItem=n}.call(this),function(){var e=this.metal.dom,n=this.metal.List,o=function(n){function o(e){return t.classCallCheck(this,o),t.possibleConstructorReturn(this,n.call(this,e))}return t.inherits(o,n),o.prototype.handleClick=function(t){for(var n=t.target;n&&!e.match(n,".listitem");)n=n.parentNode;this.emit("itemSelected",n)},o}(n);o.prototype.registerMetalComponent&&o.prototype.registerMetalComponent(o,"List"),o.ELEMENT_CLASSES="list",o.ATTRS={items:{validator:Array.isArray,valueFn:function(){return[]}},itemsHtml:{}},this.metal.List=o}.call(this),function(){var e=this.metal.metal,n=this.metal.debounce,o=this.metal.dom,i=this.metalNamed.Promise.CancellablePromise,r=this.metalNamed.position.Align,s=this.metal.AutocompleteBase,a=this.metalNamed.soy.SoyRenderer,l=function(s){function a(){return t.classCallCheck(this,a),t.possibleConstructorReturn(this,s.apply(this,arguments))}return t.inherits(a,s),a.prototype.attached=function(){s.prototype.attached.call(this),this.on("click",function(t){return t.stopPropagation()}),this.eventHandler_.add(o.on(this.inputElement,"focus",this.handleInputFocus_.bind(this))),this.eventHandler_.add(o.on(document,"click",this.handleDocClick_.bind(this))),this.eventHandler_.add(o.on(window,"resize",n(this.handleWindowResize_.bind(this),100))),this.visible&&this.align()},a.prototype.align=function(){this.element.style.width=this.inputElement.offsetWidth+"px";var t=r.align(this.element,this.inputElement,r.Bottom);switch(o.removeClasses(this.element,this.positionCss_),t){case r.Top:case r.TopLeft:case r.TopRight:this.positionCss_="autocomplete-top";break;case r.Bottom:case r.BottomLeft:case r.BottomRight:this.positionCss_="autocomplete-bottom";break;default:this.positionCss_=null}o.addClasses(this.element,this.positionCss_)},a.prototype.getList=function(){return this.components[this.id+"-list"]},a.prototype.handleDocClick_=function(){document.activeElement!==this.inputElement&&(this.visible=!1)},a.prototype.handleInputFocus_=function(){this.request(this.inputElement.value)},a.prototype.handleWindowResize_=function(){this.visible&&this.align()},a.prototype.request=function(t){var e=this;return s.prototype.request.call(this,t).then(function(t){t&&(t.forEach(e.assertItemObjectStructure_),e.getList().items=t),e.visible=!!(t&&t.length>0)})},a.prototype.onListItemSelected_=function(t){var e=parseInt(t.getAttribute("data-index"),10);this.emit("select",this.getList().items[e]),this.visible=!1},a.prototype.syncVisible=function(t){s.prototype.syncVisible.call(this,t),t&&this.align()},a.prototype.assertItemObjectStructure_=function(t){if(!e.isObject(t))throw new i.CancellationError("Autocomplete item must be an object");if(!t.hasOwnProperty("textPrimary"))throw new i.CancellationError("Autocomplete item must be an object with 'textPrimary' key")},a}(s);l.prototype.registerMetalComponent&&l.prototype.registerMetalComponent(l,"Autocomplete"),l.ATTRS={format:{value:function(t){return e.isString(t)?{textPrimary:t}:t}}},l.RENDERER=a,this.metal.Autocomplete=l}.call(this),function(){var t=this.metal.Autocomplete,e=this.metal.AutocompleteBase;this.metal.autocomplete=t,this.metalNamed.autocomplete={},this.metalNamed.autocomplete.Autocomplete=t,this.metalNamed.autocomplete.AutocompleteBase=e}.call(this),function(){var e=this.metal.component,n=this.metalNamed.soy.SoyAop,o=this.metalNamed.soy.SoyRenderer,i=this.metalNamed.soy.SoyTemplates,r=i.get();"undefined"==typeof r.ButtonGroup&&(r.ButtonGroup={}),r.ButtonGroup.render=function(t,e,n){for(var o='<div id="'+soy.$$escapeHtmlAttribute(t.id)+'" class="btn-group component'+soy.$$escapeHtmlAttribute(t.elementClasses?" "+t.elementClasses:"")+'">',i=t.buttons,s=i.length,a=0;s>a;a++){var l=i[a],c=l.type?l.type:"button",u=l.cssClass?l.cssClass:"btn btn-default";o+='<button type="'+soy.$$escapeHtmlAttribute(c)+'" class="'+soy.$$escapeHtmlAttribute(u)+soy.$$escapeHtmlAttribute(r.ButtonGroup.selectedClass({label:l.label,selected:t.selected},null,n))+'" data-index="'+soy.$$escapeHtmlAttribute(a)+'" data-onclick="handleClick_"><span class="btn-group-label">'+soy.$$escapeHtml(l.label?l.label:"")+"</span>"+(l.icon?'<span class="'+soy.$$escapeHtmlAttribute(l.icon)+'"></span>':"")+"</button>"}return o+="</div>",soydata.VERY_UNSAFE.ordainSanitizedHtml(o)},goog.DEBUG&&(r.ButtonGroup.render.soyTemplateName="Templates.ButtonGroup.render"),r.ButtonGroup.selectedClass=function(t,e,n){var o="";if(t.selected)for(var i=t.selected,r=i.length,s=0;r>s;s++){var a=i[s];o+=a==t.label?" btn-group-selected":""}return soydata.VERY_UNSAFE.ordainSanitizedHtml(o)},goog.DEBUG&&(r.ButtonGroup.selectedClass.soyTemplateName="Templates.ButtonGroup.selectedClass"),r.ButtonGroup.render.params=["buttons","id"],r.ButtonGroup.selectedClass["private"]=!0;var s=function(e){function n(){return t.classCallCheck(this,n),t.possibleConstructorReturn(this,e.apply(this,arguments))}return t.inherits(n,e),n}(e);s.prototype.registerMetalComponent&&s.prototype.registerMetalComponent(s,"ButtonGroup"),s.RENDERER=o,n.registerTemplates("ButtonGroup"),this.metal.ButtonGroup=s}.call(this),function(){var e=this.metal.metal,n=this.metal.dom,o=this.metal.ButtonGroup,i=function(e){function o(n){t.classCallCheck(this,o);var i=t.possibleConstructorReturn(this,e.call(this,n));return i.buttonElements_=null,i.on("selectedChanged",i.defaultSelectedChanged_,!0),i}return t.inherits(o,e),o.prototype.defaultSelectedChanged_=function(t){for(var e=0;e<this.buttonElements_.length;e++)-1!==t.newVal.indexOf(this.buttons[e].label)?n.addClasses(this.buttonElements_[e],o.SELECTED_CLASS):n.removeClasses(this.buttonElements_[e],o.SELECTED_CLASS)},o.prototype.handleClick_=function(t){var e=t.delegateTarget,n=e.getAttribute("data-index"),o=this.selected.indexOf(this.buttons[n].label);-1===o?(this.selected.push(this.buttons[n].label),this.selected=this.selected):this.selected.length>this.minSelected&&(this.selected.splice(o,1),this.selected=this.selected)},o.prototype.setterSelectedFn_=function(t){for(var e=Math.min(this.minSelected,this.buttons.length),n=0;t.length<e;)-1===t.indexOf(this.buttons[n].label)&&t.push(this.buttons[n].label),n++;return t},o.prototype.syncButtons=function(){this.buttonElements_=this.element.querySelectorAll("button")},o}(o);i.prototype.registerMetalComponent&&i.prototype.registerMetalComponent(i,"ButtonGroup"),i.ATTRS={buttons:{validator:function(t){return t instanceof Array},valueFn:function(){return[]}},minSelected:{validator:e.isNumber,value:0,writeOnce:!0},selected:{setter:"setterSelectedFn_",validator:Array.isArray,valueFn:function(){return[]}}},i.ELEMENT_CLASSES="btn-group",i.SELECTED_CLASS="btn-group-selected",this.metal.ButtonGroup=i}.call(this),function(){var e=this.metal.Attribute,n=this.metal.metal,o=this.metal.dom,i=function(e){function n(i){t.classCallCheck(this,n);var r=t.possibleConstructorReturn(this,e.call(this,i));return r.listener_=o.on(r.selector,"click",function(t){return r.initialize(t)}),r}return t.inherits(n,e),n.prototype.disposeInternal=function(){this.listener_.dispose(),this.listener_=null,this.clipboardAction_&&(this.clipboardAction_.dispose(),this.clipboardAction_=null)},n.prototype.initialize=function(t){this.clipboardAction_&&(this.clipboardAction_=null),this.clipboardAction_=new r({host:this,action:this.action(t.delegateTarget),target:this.target(t.delegateTarget),text:this.text(t.delegateTarget),trigger:t.delegateTarget})},n}(e);i.prototype.registerMetalComponent&&i.prototype.registerMetalComponent(i,"Clipboard"),i.ATTRS={action:{validator:n.isFunction,value:function(t){return t.getAttribute("data-action")}},selector:{value:"[data-clipboard]",validator:n.isString},target:{validator:n.isFunction,value:function(t){return document.querySelector(t.getAttribute("data-target"))}},text:{validator:n.isFunction,value:function(t){return t.getAttribute("data-text")}}};var r=function(e){function n(o){t.classCallCheck(this,n);var i=t.possibleConstructorReturn(this,e.call(this,o));return i.text?i.selectValue():i.target&&i.selectTarget(),i}return t.inherits(n,e),n.prototype.clearSelection=function(){this.target&&this.target.blur(),window.getSelection().removeAllRanges()},n.prototype.copyText=function(){var t=void 0;try{t=document.execCommand(this.action)}catch(e){t=!1}this.handleResult(t)},n.prototype.disposeInternal=function(){this.removeFakeElement(),e.prototype.disposeInternal.call(this)},n.prototype.handleResult=function(t){t?this.host.emit("success",{action:this.action,text:this.selectedText,trigger:this.trigger,clearSelection:this.clearSelection.bind(this)}):this.host.emit("error",{action:this.action,trigger:this.trigger,clearSelection:this.clearSelection.bind(this)})},n.prototype.removeFakeElement=function(){this.fake&&o.exitDocument(this.fake),this.removeFakeHandler&&this.removeFakeHandler.removeListener()},n.prototype.selectTarget=function(){if("INPUT"===this.target.nodeName||"TEXTAREA"===this.target.nodeName)this.target.select(),this.selectedText=this.target.value;else{var t=document.createRange(),e=window.getSelection();t.selectNodeContents(this.target),e.addRange(t),this.selectedText=e.toString()}this.copyText()},n.prototype.selectValue=function(){this.removeFakeElement(),this.removeFakeHandler=o.once(document,"click",this.removeFakeElement.bind(this)),this.fake=document.createElement("textarea"),this.fake.style.position="fixed",this.fake.style.left="-9999px",this.fake.setAttribute("readonly",""),this.fake.value=this.text,this.selectedText=this.text,o.enterDocument(this.fake),this.fake.select(),this.copyText()},n}(e);r.prototype.registerMetalComponent&&r.prototype.registerMetalComponent(r,"ClipboardAction"),r.ATTRS={action:{value:"copy",validator:function(t){return"copy"===t||"cut"===t}},host:{validator:function(t){return t instanceof i}},selectedText:{validator:n.isString},target:{validator:n.isElement},text:{validator:n.isString},trigger:{validator:n.isElement}},this.metal.Clipboard=i}.call(this),function(){var e=this.metal.component,n=this.metalNamed.soy.SoyAop,o=this.metalNamed.soy.SoyRenderer,i=this.metalNamed.soy.SoyTemplates,r=i.get();"undefined"==typeof r.Dropdown&&(r.Dropdown={}),r.Dropdown.render=function(t,e,n){return soydata.VERY_UNSAFE.ordainSanitizedHtml('<div id="'+soy.$$escapeHtmlAttribute(t.id)+'" class="dropdown component'+soy.$$escapeHtmlAttribute(t.elementClasses?" "+t.elementClasses:"")+soy.$$escapeHtmlAttribute(t.expanded?" open":"")+'">'+(t.header?soy.$$escapeHtml(t.header):"")+r.Dropdown.body(t,null,n)+"</div>")},goog.DEBUG&&(r.Dropdown.render.soyTemplateName="Templates.Dropdown.render"),r.Dropdown.body=function(t,e,n){return soydata.VERY_UNSAFE.ordainSanitizedHtml('<ul id="'+soy.$$escapeHtmlAttribute(t.id)+'-body" class="dropdown-menu">'+(t.body?soy.$$escapeHtml(t.body):"")+"</ul>")},goog.DEBUG&&(r.Dropdown.body.soyTemplateName="Templates.Dropdown.body"),r.Dropdown.render.params=["header","id"],r.Dropdown.body.params=["body","id"];var s=function(e){function n(){return t.classCallCheck(this,n),t.possibleConstructorReturn(this,e.apply(this,arguments))}return t.inherits(n,e),n}(e);s.prototype.registerMetalComponent&&s.prototype.registerMetalComponent(s,"Dropdown"),s.RENDERER=o,n.registerTemplates("Dropdown"),this.metal.Dropdown=s}.call(this),
function(){var e=this.metalNamed.metal.core,n=this.metalNamed.metal.object,o=this.metal.dom,i=this.metalNamed.position.Align,r=this.metal.Dropdown,s=this.metalNamed.events.EventHandler,a=function(r){function a(e){t.classCallCheck(this,a);var n=t.possibleConstructorReturn(this,r.call(this,e));return n.eventHandler_=new s,n}return t.inherits(a,r),a.prototype.attached=function(){r.prototype.attached.call(this),this.eventHandler_.add(o.on(document,"click",this.handleDocClick_.bind(this)))},a.prototype.detached=function(){r.prototype.detached.call(this),this.eventHandler_.removeAllListeners()},a.prototype.close=function(){this.expanded=!1},a.prototype.isOpen=function(){return this.expanded},a.prototype.handleDocClick_=function(t){this.element.contains(t.target)||this.close()},a.prototype.open=function(){this.expanded=!0},a.prototype.setterClassMapFn_=function(t){return n.mixin(this.valueClassMapFn_(),t)},a.prototype.setterPositionFn_=function(t){return e.isNumber(t)?t:"up"===t.toLowerCase()?i.TopLeft:i.BottomLeft},a.prototype.syncExpanded=function(t){if(t){if(o.addClasses(this.element,"open"),this.alignElementSelector){var e=this.element.querySelector(this.alignElementSelector);if(e){var n=this.getRenderer().getSurfaceElement("body"),r=i.align(n,e,this.position);this.updatePositionCss_(r)}}}else o.removeClasses(this.element,"open")},a.prototype.syncPosition=function(t){this.updatePositionCss_(t)},a.prototype.toggle=function(){this.expanded=!this.expanded},a.prototype.updatePositionCss_=function(t){var e=this.element;this.positionClassOnMenu&&(e=e.querySelector(".dropdown-menu")),this.alignedPosition_&&o.removeClasses(e,this.classMap[this.alignedPosition_]),o.addClasses(e,this.classMap[t]),this.alignedPosition_=t},a.prototype.validatePosition_=function(t){if(i.isValidPosition(t))return!0;switch(t.toLowerCase()){case"up":case"down":return!0;default:return!1}},a.prototype.valueBodyFn_=function(){var t=this.element&&this.element.querySelector(".dropdown-menu");return t?t.innerHTML:""},a.prototype.valueClassMapFn_=function(){var e;return e={},t.defineProperty(e,i.TopLeft,"dropup"),t.defineProperty(e,i.TopCenter,"dropup"),t.defineProperty(e,i.TopRight,"dropup"),t.defineProperty(e,i.BottomLeft,"dropdown"),t.defineProperty(e,i.BottomCenter,"dropdown"),t.defineProperty(e,i.BottomRight,"dropdown"),t.defineProperty(e,i.RightCenter,"dropright"),t.defineProperty(e,i.LeftCenter,"dropleft"),e},a.prototype.valueHeaderFn_=function(){if(this.element){for(var t=document.createElement("div"),e=0;e<this.element.childNodes.length&&!o.hasClass(this.element.childNodes[e],"dropdown-menu");e++)t.appendChild(this.element.childNodes[e].cloneNode(!0));return t.innerHTML}return""},a}(r);a.prototype.registerMetalComponent&&a.prototype.registerMetalComponent(a,"Dropdown"),a.ATTRS={alignElementSelector:{validator:e.isString},body:{isHtml:!0,valueFn:"valueBodyFn_"},classMap:{setter:"setterClassMapFn_",validator:e.isObject,valueFn:"valueClassMapFn_"},header:{isHtml:!0,valueFn:"valueHeaderFn_"},expanded:{value:!1},position:{setter:"setterPositionFn_",value:i.BottomLeft,validator:"validatePosition_"},positionClassOnMenu:{value:!1}},a.ELEMENT_CLASSES="dropdown",this.metal.Dropdown=a}.call(this),function(){var e=this.metal.component,n=this.metalNamed.soy.SoyAop,o=this.metalNamed.soy.SoyRenderer,i=this.metalNamed.soy.SoyTemplates,r=i.get();"undefined"==typeof r.Modal&&(r.Modal={}),r.Modal.render=function(t,e,n){return soydata.VERY_UNSAFE.ordainSanitizedHtml('<div id="'+soy.$$escapeHtmlAttribute(t.id)+'" class="modal component'+soy.$$escapeHtmlAttribute(t.elementClasses?" "+t.elementClasses:"")+'" role="'+soy.$$escapeHtmlAttribute(t.role?t.role:"dialog")+'" aria-labelledby="'+soy.$$escapeHtmlAttribute(t.id)+'-header"><div class="modal-dialog" tabindex="0"><div class="modal-content">'+r.Modal.header(t,null,n)+r.Modal.body(t,null,n)+r.Modal.footer(t,null,n)+"</div></div></div>")},goog.DEBUG&&(r.Modal.render.soyTemplateName="Templates.Modal.render"),r.Modal.body=function(t,e,n){return soydata.VERY_UNSAFE.ordainSanitizedHtml('<section id="'+soy.$$escapeHtmlAttribute(t.id)+'-body" class="modal-body">'+(t.body?soy.$$escapeHtml(t.body):"")+"</section>")},goog.DEBUG&&(r.Modal.body.soyTemplateName="Templates.Modal.body"),r.Modal.footer=function(t,e,n){return soydata.VERY_UNSAFE.ordainSanitizedHtml('<footer id="'+soy.$$escapeHtmlAttribute(t.id)+'-footer" class="modal-footer">'+(t.footer?soy.$$escapeHtml(t.footer):"")+"</footer>")},goog.DEBUG&&(r.Modal.footer.soyTemplateName="Templates.Modal.footer"),r.Modal.header=function(t,e,n){return soydata.VERY_UNSAFE.ordainSanitizedHtml('<header id="'+soy.$$escapeHtmlAttribute(t.id)+'-header" class="modal-header">'+(t.header?'<button type="button" class="close" data-onclick="hide" aria-label="Close"><span aria-hidden="true">×</span></button>'+soy.$$escapeHtml(t.header):"")+"</header>")},goog.DEBUG&&(r.Modal.header.soyTemplateName="Templates.Modal.header"),r.Modal.render.params=["id","role"],r.Modal.body.params=["id","body"],r.Modal.footer.params=["footer","id"],r.Modal.header.params=["header","id"];var s=function(e){function n(){return t.classCallCheck(this,n),t.possibleConstructorReturn(this,e.apply(this,arguments))}return t.inherits(n,e),n}(e);s.prototype.registerMetalComponent&&s.prototype.registerMetalComponent(s,"Modal"),s.RENDERER=o,n.registerTemplates("Modal"),this.metal.Modal=s}.call(this),function(){var e=this.metal.metal,n=this.metal.dom,o=this.metalNamed.events.EventHandler,i=this.metal.Modal,r=function(e){function i(n){t.classCallCheck(this,i);var r=t.possibleConstructorReturn(this,e.call(this,n));return r.eventHandler_=new o,r}return t.inherits(i,e),i.prototype.attached=function(){this.autoFocus_(this.autoFocus)},i.prototype.autoFocus_=function(t){if(this.inDocument&&this.visible&&t){var e=this.element.querySelector(t);e&&e.focus()}},i.prototype.detached=function(){e.prototype.detached.call(this),this.eventHandler_.removeAllListeners()},i.prototype.disposeInternal=function(){n.exitDocument(this.overlayElement),this.unrestrictFocus_(),e.prototype.disposeInternal.call(this)},i.prototype.handleDocumentFocus_=function(t){this.overlay&&!this.element.contains(t.target)&&this.autoFocus_(".modal-dialog")},i.prototype.handleKeyup_=function(t){27===t.keyCode&&this.hide()},i.prototype.hide=function(){this.visible=!1},i.prototype.restrictFocus_=function(){this.restrictFocusHandle_=n.on(document,"focus",this.handleDocumentFocus_.bind(this),!0)},i.prototype.shiftFocusBack_=function(){this.lastFocusedElement_&&(this.lastFocusedElement_.focus(),this.lastFocusedElement_=null)},i.prototype.show=function(){this.visible=!0},i.prototype.syncHideOnEscape=function(t){t?this.eventHandler_.add(n.on(document,"keyup",this.handleKeyup_.bind(this))):this.eventHandler_.removeAllListeners()},i.prototype.syncOverlay=function(t){var e=t&&this.visible;n[e?"enterDocument":"exitDocument"](this.overlayElement)},i.prototype.syncVisible=function(t){this.element.style.display=t?"block":"",this.syncOverlay(this.overlay),this.visible?(this.lastFocusedElement_=document.activeElement,this.autoFocus_(this.autoFocus),this.restrictFocus_()):(this.unrestrictFocus_(),this.shiftFocusBack_())},i.prototype.unrestrictFocus_=function(){this.restrictFocusHandle_&&this.restrictFocusHandle_.removeListener()},i.prototype.valueOverlayElementFn_=function(){return n.buildFragment('<div class="modal-backdrop fade in"></div>').firstChild},i}(i);r.prototype.registerMetalComponent&&r.prototype.registerMetalComponent(r,"Modal"),r.ELEMENT_CLASSES="modal",r.ATTRS={autoFocus:{validator:function(t){return t===!1||e.isString(t)},value:".close"},body:{isHtml:!0},footer:{isHtml:!0},header:{isHtml:!0},hideOnEscape:{validator:e.isBoolean,value:!0},overlay:{validator:e.isBoolean,value:!0},overlayElement:{initOnly:!0,valueFn:"valueOverlayElementFn_"},role:{validator:e.isString,value:"dialog"}},this.metal.Modal=r}.call(this),function(){var e=this.metal.metal,n=this.metal.dom,o=this.metalNamed.position.Align,i=this.metal.component,r=this.metalNamed.events.EventHandler,s=this.metalNamed.soy.SoyRenderer,a=function(e){function o(n){t.classCallCheck(this,o);var i=t.possibleConstructorReturn(this,e.call(this,n));return i.eventHandler_=new r,i}return t.inherits(o,e),o.prototype.attached=function(){this.align(),this.syncTriggerEvents(this.triggerEvents)},o.prototype.detached=function(){this.eventHandler_.removeAllListeners()},o.prototype.disposeInternal=function(){e.prototype.disposeInternal.call(this),clearTimeout(this.delay_)},o.prototype.align=function(t){this.syncAlignElement(t||this.alignElement)},o.prototype.callAsync_=function(t,e){clearTimeout(this.delay_),this.delay_=setTimeout(t.bind(this),e)},o.prototype.handleHide=function(t){var e=t.delegateTarget,n=e&&e!==this.alignElement;this.callAsync_(function(){this.locked_||(n?this.alignElement=e:(this.visible=!1,this.syncVisible(!1)))},this.delay[1])},o.prototype.handleShow=function(t){var n=t.delegateTarget;e.prototype.syncVisible.call(this,!0),this.callAsync_(function(){this.alignElement=n,this.visible=!0},this.delay[0])},o.prototype.handleToggle=function(t){this.visible?this.handleHide(t):this.handleShow(t)},o.prototype.lock=function(){this.locked_=!0},o.prototype.unlock=function(t){this.locked_=!1,this.handleHide(t)},o.prototype.syncAlignElement=function(t,e){if(e&&t.removeAttribute("aria-describedby"),t){var n=t.getAttribute("data-title");if(n&&(this.title=n),this.visible?t.setAttribute("aria-describedby",this.id):t.removeAttribute("aria-describedby"),this.inDocument){var i=o.Align.align(this.element,t,this.position);this.updatePositionCSS(i)}}},o.prototype.syncPosition=function(){this.syncAlignElement(this.alignElement)},o.prototype.syncSelector=function(){this.syncTriggerEvents(this.triggerEvents)},o.prototype.syncTriggerEvents=function(t){if(this.inDocument){this.eventHandler_.removeAllListeners();var e=this.selector;e&&(this.eventHandler_.add(this.on("mouseenter",this.lock),this.on("mouseleave",this.unlock)),t[0]===t[1]?this.eventHandler_.add(n.delegate(document,t[0],e,this.handleToggle.bind(this))):this.eventHandler_.add(n.delegate(document,t[0],e,this.handleShow.bind(this)),n.delegate(document,t[1],e,this.handleHide.bind(this))))}},o.prototype.syncVisible=function(){this.align()},o.prototype.updatePositionCSS=function(t){n.removeClasses(this.element,o.PositionClasses.join(" ")),n.addClasses(this.element,o.PositionToClass[t])},o}(i);a.prototype.registerMetalComponent&&a.prototype.registerMetalComponent(a,"TooltipBase"),a.Align=o,a.ATTRS={alignElement:{setter:n.toElement},delay:{validator:Array.isArray,value:[500,250]},triggerEvents:{validator:Array.isArray,value:["mouseenter","mouseleave"]},selector:{validator:e.isString},position:{validator:a.Align.isValidPosition,value:a.Align.Bottom},title:{}},a.PositionClasses=["top","right","bottom","left"],a.PositionToClass=["top","top","right","bottom","bottom","bottom","left","top"],a.RENDERER=s,this.metal.TooltipBase=a}.call(this),function(){var e=this.metal.component,n=this.metalNamed.soy.SoyAop,o=this.metalNamed.soy.SoyRenderer,i=this.metalNamed.soy.SoyTemplates,r=i.get();"undefined"==typeof r.Tooltip&&(r.Tooltip={}),r.Tooltip.render=function(t,e,n){var o="",i=["top","right","bottom","left"],s=null!=t.position?i[t.position]:"bottom";return o+='<div id="'+soy.$$escapeHtmlAttribute(t.id)+'" class="tooltip component '+soy.$$escapeHtmlAttribute(s)+soy.$$escapeHtmlAttribute(t.elementClasses?" "+t.elementClasses:"")+'" role="tooltip"><div class="tooltip-arrow"></div>'+r.Tooltip.inner(t,null,n)+"</div>",soydata.VERY_UNSAFE.ordainSanitizedHtml(o)},goog.DEBUG&&(r.Tooltip.render.soyTemplateName="Templates.Tooltip.render"),r.Tooltip.inner=function(t,e,n){return soydata.VERY_UNSAFE.ordainSanitizedHtml('<section id="'+soy.$$escapeHtmlAttribute(t.id)+'-inner" class="tooltip-inner">'+soy.$$escapeHtml(t.title?t.title:"")+"</section>")},goog.DEBUG&&(r.Tooltip.inner.soyTemplateName="Templates.Tooltip.inner"),r.Tooltip.render.params=["id"],r.Tooltip.inner.params=["title","id"];var s=function(e){function n(){return t.classCallCheck(this,n),t.possibleConstructorReturn(this,e.apply(this,arguments))}return t.inherits(n,e),n}(e);s.prototype.registerMetalComponent&&s.prototype.registerMetalComponent(s,"Tooltip"),s.RENDERER=o,n.registerTemplates("Tooltip"),this.metal.Tooltip=s}.call(this),function(){var e=this.metal.TooltipBase,n=function(e){function n(){return t.classCallCheck(this,n),t.possibleConstructorReturn(this,e.apply(this,arguments))}return t.inherits(n,e),n.prototype.syncVisible=function(t){this.element.style.opacity=t?1:"",e.prototype.syncVisible.call(this,t)},n}(e);n.prototype.registerMetalComponent&&n.prototype.registerMetalComponent(n,"Tooltip"),n.Align=e.Align,n.ELEMENT_CLASSES="tooltip",this.metal.Tooltip=n,this.metalNamed.Tooltip={},this.metalNamed.Tooltip.Tooltip=n,this.metalNamed.Tooltip.TooltipBase=e}.call(this),function(){var e=this.metal.component,n=this.metalNamed.soy.SoyAop,o=this.metalNamed.soy.SoyRenderer,i=this.metalNamed.soy.SoyTemplates,r=i.get();"undefined"==typeof r.Popover&&(r.Popover={}),r.Popover.render=function(t,e,n){var o="",i=["top","right","bottom","left"],s=null!=t.position?i[t.position]:"bottom";return o+='<div id="'+soy.$$escapeHtmlAttribute(t.id)+'" class="popover component '+soy.$$escapeHtmlAttribute(s)+soy.$$escapeHtmlAttribute(t.elementClasses?" "+t.elementClasses:"")+'" role="tooltip"><div class="arrow"></div>'+r.Popover.title(t,null,n)+r.Popover.innerContent(t,null,n)+"</div>",soydata.VERY_UNSAFE.ordainSanitizedHtml(o)},goog.DEBUG&&(r.Popover.render.soyTemplateName="Templates.Popover.render"),r.Popover.title=function(t,e,n){return soydata.VERY_UNSAFE.ordainSanitizedHtml('<h3 id="'+soy.$$escapeHtmlAttribute(t.id)+'-title" class="popover-title'+soy.$$escapeHtmlAttribute(t.title?"":" hidden")+'">'+soy.$$escapeHtml(t.title)+"</h3>")},goog.DEBUG&&(r.Popover.title.soyTemplateName="Templates.Popover.title"),r.Popover.innerContent=function(t,e,n){return soydata.VERY_UNSAFE.ordainSanitizedHtml('<div id="'+soy.$$escapeHtmlAttribute(t.id)+'-innerContent" class="popover-content"><p>'+soy.$$escapeHtml(t.content?t.content:"")+"</p></div>")},goog.DEBUG&&(r.Popover.innerContent.soyTemplateName="Templates.Popover.innerContent"),r.Popover.render.params=["id"],r.Popover.title.params=["id","title"],r.Popover.innerContent.params=["content","id"];var s=function(e){function n(){return t.classCallCheck(this,n),t.possibleConstructorReturn(this,e.apply(this,arguments))}return t.inherits(n,e),n}(e);s.prototype.registerMetalComponent&&s.prototype.registerMetalComponent(s,"Popover"),s.RENDERER=o,n.registerTemplates("Popover"),this.metal.Popover=s}.call(this),function(){var e=this.metal.metal,n=this.metalNamed.Tooltip.TooltipBase,o=function(e){function n(){return t.classCallCheck(this,n),t.possibleConstructorReturn(this,e.apply(this,arguments))}return t.inherits(n,e),n.prototype.syncAlignElement=function(t){if(e.prototype.syncAlignElement.call(this,t),t){var n=t.getAttribute("data-content");n&&(this.content=n)}},n.prototype.syncVisible=function(t){this.element.style.display=t?"block":"",e.prototype.syncVisible.call(this,t)},n}(n);o.prototype.registerMetalComponent&&o.prototype.registerMetalComponent(o,"Popover"),o.ATTRS={content:{validator:e.isString},triggerEvents:{validator:Array.isArray,value:["click","click"]}},o.Align=n.Align,o.ELEMENT_CLASSES="popover",this.metal.Popover=o}.call(this),function(){var e=this.metal.component,n=this.metalNamed.soy.SoyAop,o=this.metalNamed.soy.SoyRenderer,i=this.metalNamed.soy.SoyTemplates,r=i.get();"undefined"==typeof r.ProgressBar&&(r.ProgressBar={}),r.ProgressBar.render=function(t,e,n){return soydata.VERY_UNSAFE.ordainSanitizedHtml('<div id="'+soy.$$escapeHtmlAttribute(t.id)+'" class="progress component'+soy.$$escapeHtmlAttribute(t.elementClasses?" "+t.elementClasses:"")+'" role="progressbar" tabindex="0"><div class="progress-bar"></div></div>')},goog.DEBUG&&(r.ProgressBar.render.soyTemplateName="Templates.ProgressBar.render"),r.ProgressBar.render.params=["id"];var s=function(e){function n(){return t.classCallCheck(this,n),t.possibleConstructorReturn(this,e.apply(this,arguments))}return t.inherits(n,e),n}(e);s.prototype.registerMetalComponent&&s.prototype.registerMetalComponent(s,"ProgressBar"),s.RENDERER=o,n.registerTemplates("ProgressBar"),this.metal.ProgressBar=s}.call(this),function(){var e=this.metal.metal,n=this.metal.dom,o=this.metal.ProgressBar,i=function(e){function o(){return t.classCallCheck(this,o),t.possibleConstructorReturn(this,e.apply(this,arguments))}return t.inherits(o,e),o.prototype.getBarElement=function(){return this.barElement_||(this.barElement_=this.element.childNodes[0]),this.barElement_},o.prototype.setterValueFn_=function(t){return t<this.min&&(t=this.min),t>this.max&&(t=this.max),t},o.prototype.syncBarClass=function(t,e){var o=this.getBarElement();n.removeClasses(o,e),n.addClasses(o,t)},o.prototype.syncLabel=function(){var t=this.getBarElement();n.removeChildren(t),this.label&&n.append(t,this.label)},o.prototype.syncMax=function(t){t<this.value?this.value=t:this.updateBar_(),this.element.setAttribute("aria-valuemax",this.max)},o.prototype.syncMin=function(t){t>this.value?this.value=t:this.updateBar_(),this.element.setAttribute("aria-valuemin",this.min)},o.prototype.syncValue=function(){this.updateBar_(),this.element.setAttribute("aria-valuenow",this.value)},o.prototype.updateBar_=function(){var t=this.getBarElement(),e=Math.floor(100*(this.value-this.min)/(this.max-this.min));t.style.width=e+"%"},o}(o);i.prototype.registerMetalComponent&&i.prototype.registerMetalComponent(i,"ProgressBar"),i.ATTRS={barClass:{validator:e.isString},label:{validator:function(t){return!e.isDefAndNotNull(t)||e.isString(t)}},max:{validator:e.isNumber,value:100},min:{validator:e.isNumber,value:0},value:{setter:"setterValueFn_",validator:e.isNumber,value:0}},i.ELEMENT_CLASSES="progress",this.metal.ProgressBar=i}.call(this),function(){var e=this.metal.metal,n=this.metal.dom,o=this.metal.Attribute,i=this.metal.position,r=function(e){function o(i){t.classCallCheck(this,o);var r=t.possibleConstructorReturn(this,e.call(this,i));return r.regions=[],r.scrollHandle_=n.on(r.scrollElement,"scroll",r.checkPosition.bind(r)),r.init(),r}return t.inherits(o,e),o.prototype.disposeInternal=function(){this.deactivateAll(),this.scrollHandle_.dispose(),e.prototype.disposeInternal.call(this)},o.prototype.activate=function(t){this.activeIndex>=0&&this.deactivate(this.activeIndex),this.activeIndex=t,n.addClasses(this.getElementForIndex(t),this.activeClass)},o.prototype.checkPosition=function(){var t=this.getScrollHeight_(),e=i.getScrollTop(this.scrollElement);if(t<e+this.offset)return void this.activate(this.regions.length-1);var n=this.findBestRegionAt_();n!==this.activeIndex&&(-1===n?this.deactivateAll():this.activate(n))},o.prototype.deactivate=function(t){n.removeClasses(this.getElementForIndex(t),this.activeClass)},o.prototype.deactivateAll=function(){for(var t=0;t<this.regions.length;t++)this.deactivate(t);this.activeIndex=-1},o.prototype.findBestRegionAt_=function(){var t=-1,e=this.getCurrentPosition();if(this.regions.length>0&&e>=this.regions[0].top)for(var n=0;n<this.regions.length;n++){var o=this.regions[n],i=n===this.regions.length-1;if(e>=o.top&&(i||e<this.regions[n+1].top)){t=n;break}}return t},o.prototype.getCurrentPosition=function(){var t=i.getScrollTop(this.scrollElement);return t+this.offset+this.scrollElementRegion_.top},o.prototype.getElementForIndex=function(t){return this.resolveElement(this.regions[t].link)},o.prototype.getScrollHeight_=function(){var t=i.getHeight(this.scrollElement);return t+=this.scrollElementRegion_.top,t-=i.getClientHeight(this.scrollElement)},o.prototype.init=function(){this.refresh(),this.on("elementChanged",this.refresh),this.on("offsetChanged",this.checkPosition),this.on("scrollElementChanged",this.onScrollElementChanged_),this.on("selectorChanged",this.refresh)},o.prototype.onScrollElementChanged_=function(t){this.refresh(),this.scrollHandle_.dispose(),this.scrollHandle_=n.on(t.newVal,"scroll",this.checkPosition.bind(this))},o.prototype.refresh=function(){this.deactivateAll(),this.scrollElementRegion_=i.getRegion(this.scrollElement),this.scrollHeight_=this.getScrollHeight_(),this.regions=[];for(var t=this.element.querySelectorAll(this.selector),e=i.getScrollTop(this.scrollElement),n=0;n<t.length;++n){var o=t[n];if(o.hash&&o.hash.length>1){var r=document.getElementById(o.hash.substring(1));if(r){var s=i.getRegion(r);this.regions.push({link:o,top:s.top+e,bottom:s.bottom+e})}}}this.sortRegions_(),this.deactivateAll(),this.checkPosition()},o.prototype.sortRegions_=function(){this.regions.sort(function(t,e){return t.top-e.top})},o}(o);r.prototype.registerMetalComponent&&r.prototype.registerMetalComponent(r,"Scrollspy"),r.ATTRS={activeClass:{validator:e.isString,value:"active"},activeIndex:{validator:e.isNumber,value:-1},resolveElement:{validator:e.isFunction,value:e.identityFunction},scrollElement:{setter:n.toElement,value:document},offset:{validator:e.isNumber,value:0},element:{setter:n.toElement},selector:{validator:e.isString,value:"a"}},this.metal.Scrollspy=r}.call(this),function(){var e=this.metal.component,n=this.metalNamed.soy.SoyAop,o=this.metalNamed.soy.SoyRenderer,i=this.metalNamed.soy.SoyTemplates,r=i.get();"undefined"==typeof r.Select&&(r.Select={}),r.Select.render=function(t,e,n){var o='<div id="'+soy.$$escapeHtmlAttribute(t.id)+'" class="select component'+soy.$$escapeHtmlAttribute(t.elementClasses?" "+t.elementClasses:"")+'" data-onkeydown="handleKeyDown_">',i=null!=t.selectedIndex?t.selectedIndex:t.label||0==t.items.length?-1:0;o+='<input type="hidden" name="'+soy.$$escapeHtmlAttribute(t.hiddenInputName?t.hiddenInputName:"")+'" value="'+soy.$$escapeHtmlAttribute(-1==i?"":t.items[i])+'" />';for(var s="",a=t.items,l=a.length,c=0;l>c;c++){var u=a[c];s+='<li data-onclick="'+soy.$$escapeHtmlAttribute(t.id)+':handleItemClick_" class="select-option'+soy.$$escapeHtmlAttribute(i==c?" selected":"")+'"><a href="javascript:;">'+soy.$$escapeHtml(u)+"</a></li>"}return o+=soy.$$escapeHtml(r.Dropdown.render({body:soydata.VERY_UNSAFE.$$ordainSanitizedHtmlForInternalBlocks(s),events:{attrsSynced:t.id+":handleDropdownAttrsSynced_"},header:soydata.VERY_UNSAFE.$$ordainSanitizedHtmlForInternalBlocks('<button class="'+soy.$$escapeHtmlAttribute(t.buttonClass)+' dropdown-select" type="button" data-onclick="toggle">'+soy.$$escapeHtml(-1==i?t.label:t.items[i])+' <span class="'+soy.$$escapeHtmlAttribute(t.arrowClass?t.arrowClass:"caret")+'"></span></button>'),id:t.id+"-dropdown"},null,n)),o+="</div>",soydata.VERY_UNSAFE.ordainSanitizedHtml(o)},goog.DEBUG&&(r.Select.render.soyTemplateName="Templates.Select.render"),r.Select.render.params=["arrowClass","buttonClass","hiddenInputName","id","items","label","selectedIndex"];var s=function(e){function n(){return t.classCallCheck(this,n),t.possibleConstructorReturn(this,e.apply(this,arguments))}return t.inherits(n,e),n}(e);s.prototype.registerMetalComponent&&s.prototype.registerMetalComponent(s,"Select"),s.RENDERER=o,n.registerTemplates("Select"),this.metal.Select=s}.call(this),function(){var e=this.metal.metal,n=this.metal.dom,o=this.metal.Select,i=function(o){function i(){return t.classCallCheck(this,i),t.possibleConstructorReturn(this,o.apply(this,arguments))}return t.inherits(i,o),i.prototype.findItemIndex_=function(t){for(var e=this.element.querySelectorAll("li"),n=0;n<e.length;n++)if(e.item(n)===t)return n},i.prototype.focusIndex_=function(t){var e=this.element.querySelector(".select-option:nth-child("+(t+1)+") a");e&&(this.focusedIndex_=t,e.focus())},i.prototype.getDropdown=function(){return this.components[this.id+"-dropdown"]},i.prototype.handleDropdownAttrsSynced_=function(t){this.openedWithKeyboard_?(this.focusIndex_(0),this.openedWithKeyboard_=!1):t.changes.expanded&&(this.focusedIndex_=null)},i.prototype.handleItemClick_=function(t){this.selectedIndex=this.findItemIndex_(t.delegateTarget),this.getDropdown().close(),t.preventDefault()},i.prototype.handleKeyDown_=function(t){if(this.getDropdown().expanded)switch(t.keyCode){case 27:this.getDropdown().close();break;case 38:this.focusedIndex_=e.isDefAndNotNull(this.focusedIndex_)?this.focusedIndex_:1,this.focusIndex_(0===this.focusedIndex_?this.items.length-1:this.focusedIndex_-1),t.preventDefault();break;case 40:this.focusedIndex_=e.isDefAndNotNull(this.focusedIndex_)?this.focusedIndex_:-1,this.focusIndex_(this.focusedIndex_===this.items.length-1?0:this.focusedIndex_+1),t.preventDefault()}else if((13===t.keyCode||32===t.keyCode)&&n.hasClass(t.target,"dropdown-select"))return this.openedWithKeyboard_=!0,this.getDropdown().open(),void t.preventDefault()},i}(o);i.prototype.registerMetalComponent&&i.prototype.registerMetalComponent(i,"Select"),i.ATTRS={arrowClass:{value:"caret"},buttonClass:{validator:e.isString,value:"btn btn-default"},hiddenInputName:{validator:e.isString},items:{validator:function(t){return t instanceof Array},valueFn:function(){return[]}},label:{validator:e.isString},selectedIndex:{validator:e.isNumber,valueFn:function(){return this.label||!this.items.length?-1:0}}},i.ELEMENT_CLASSES="select",this.metal.Select=i}.call(this),function(){var e=this.metal.metal,n=this.metal.Attribute,o=this.metal.position,i=function(n){function i(e){t.classCallCheck(this,i);var o=t.possibleConstructorReturn(this,n.call(this,e));return o.scrollTimeout_=null,o}return t.inherits(i,n),i.prototype.disposeInternal=function(){n.prototype.disposeInternal.call(this),this.stop()},i.prototype.getRegionWithoutScroll_=function(t){if(e.isDocument(t)){var n=window.innerHeight,i=window.innerWidth;return o.makeRegion(n,n,0,i,0,i)}return o.getRegion(t)},i.prototype.scroll=function(t,e,n){this.stop(),this.scrollTimeout_=setTimeout(this.scrollInternal_.bind(this,t,e,n),this.delay)},i.prototype.scrollElement_=function(t,n,o){e.isDocument(t)?window.scrollBy(n,o):(t.scrollTop+=o,t.scrollLeft+=n)},i.prototype.scrollInternal_=function(t,e,n){for(var i=0;i<t.length;i++){var r=this.getRegionWithoutScroll_(t[i]);if(o.pointInsideRegion(e,n,r)){var s=0,a=0,l=o.getScrollTop(t[i]),c=o.getScrollLeft(t[i]);if(c>0&&Math.abs(e-r.left)<=this.maxDistance?s-=this.speed:Math.abs(e-r.right)<=this.maxDistance&&(s+=this.speed),l>0&&Math.abs(n-r.top)<=this.maxDistance?a-=this.speed:Math.abs(n-r.bottom)<=this.maxDistance&&(a+=this.speed),s||a){this.scrollElement_(t[i],s,a),this.scroll(t,e,n);break}}}},i.prototype.stop=function(){clearTimeout(this.scrollTimeout_)},i}(n);i.prototype.registerMetalComponent&&i.prototype.registerMetalComponent(i,"DragAutoScroll"),i.ATTRS={delay:{validator:e.isNumber,value:50},maxDistance:{validator:e.isNumber,value:20},speed:{validator:e.isNumber,value:20}},this.metal.DragAutoScroll=i}.call(this),function(){var e=this.metal.dom,n=this.metalNamed.events.EventEmitter,o=this.metalNamed.events.EventHandler,i=this.metal.position,r=function(n){function r(){t.classCallCheck(this,r);var e=t.possibleConstructorReturn(this,n.call(this));return e.handler_=new o,e.scrollPositions_=[],e}return t.inherits(r,n),r.prototype.disposeInternal=function(){n.prototype.disposeInternal.call(this),this.stop(),this.handler_=null},r.prototype.handleScroll_=function(t,e){var n={scrollLeft:i.getScrollLeft(e.currentTarget),scrollTop:i.getScrollTop(e.currentTarget)},o=this.scrollPositions_[t];this.scrollPositions_[t]=n,this.emit("scrollDelta",{deltaX:n.scrollLeft-o.scrollLeft,deltaY:n.scrollTop-o.scrollTop})},r.prototype.start=function(t,n){if("fixed"!==getComputedStyle(t).position)for(var o=0;o<n.length;o++)if(e.contains(n[o],t)){this.scrollPositions_.push({scrollLeft:i.getScrollLeft(n[o]),scrollTop:i.getScrollTop(n[o])});var r=this.scrollPositions_.length-1;this.handler_.add(e.on(n[o],"scroll",this.handleScroll_.bind(this,r)))}},r.prototype.stop=function(){this.handler_.removeAllListeners(),this.scrollPositions_=[]},r}(n);r.prototype.registerMetalComponent&&r.prototype.registerMetalComponent(r,"DragScrollDelta"),this.metal.DragScrollDelta=r}.call(this),function(){var e=this.metal.dom,n=function(){function n(){t.classCallCheck(this,n)}return n.attachDocListeners=function(t,o){var i=document;t&&(i=n.getDocShim(),i.style.display="block");var r=Object.keys(o);return r.map(function(t){var n="touch"===t.substr(0,5);return e.on(n?document:i,t,o[t])})},n.getDocShim=function(){return n.docShim_||(n.docShim_=document.createElement("div"),n.docShim_.className="shim",n.docShim_.style.position="fixed",n.docShim_.style.top=0,n.docShim_.style.left=0,n.docShim_.style.width="100%",n.docShim_.style.height="100%",n.docShim_.style.display="none",n.docShim_.style.opacity=0,n.docShim_.style.zIndex=9999,e.enterDocument(n.docShim_)),n.docShim_},n.hideDocShim=function(){n.getDocShim().style.display="none"},n.reset=function(){n.docShim_&&(e.exitDocument(n.docShim_),n.docShim_=null)},n}();n.docShim_=null,this.metal.DragShim=n}.call(this),function(){var e=this.metalNamed.metal.core,n=this.metalNamed.metal.object,o=this.metal.dom,i=this.metal.Attribute,r=this.metal.DragAutoScroll,s=this.metal.DragScrollDelta,a=this.metal.DragShim,l=this.metalNamed.events.EventHandler,c=this.metal.position,u=function(i){function u(e){t.classCallCheck(this,u);var n=t.possibleConstructorReturn(this,i.call(this,e));return n.activeDragPlaceholder_=null,n.activeDragSource_=null,n.distanceDragged_=0,n.dragging_=!1,n.dragHandler_=new l,n.dragScrollDelta_=new s,n.mousePos_=null,n.mouseSourceDelta_=null,n.sourceHandler_=new l,n.sourceRegion_=null,n.sourceRelativePos_=null,n.attachSourceEvents_(),n.on(u.Events.DRAG,n.defaultDragFn_,!0),n.on(u.Events.END,n.defaultEndFn_,!0),n.on("sourcesChanged",n.handleSourcesChanged_.bind(n)),n.dragScrollDelta_.on("scrollDelta",n.handleScrollDelta_.bind(n)),o.on(document,"keydown",n.handleKeyDown_.bind(n)),n}return t.inherits(u,i),u.prototype.attachSourceEvents_=function(){for(var t={keydown:this.handleSourceKeyDown_.bind(this),mousedown:this.handleDragStartEvent_.bind(this),touchstart:this.handleDragStartEvent_.bind(this)},n=Object.keys(t),i=0;i<n.length;i++){var r=t[n[i]];e.isString(this.sources)?this.sourceHandler_.add(o.delegate(this.container,n[i],this.sources,r)):this.sourceHandler_.add(o.on(this.sources,n[i],r))}},u.prototype.buildEventObject_=function(){return{placeholder:this.activeDragPlaceholder_,source:this.activeDragSource_,relativeX:this.sourceRelativePos_.x,relativeY:this.sourceRelativePos_.y,x:this.sourceRegion_.left,y:this.sourceRegion_.top}},u.prototype.calculateInitialPosition_=function(t){this.sourceRegion_=n.mixin({},c.getRegion(this.activeDragSource_,!0)),this.sourceRelativePos_={x:this.activeDragSource_.offsetLeft,y:this.activeDragSource_.offsetTop},e.isDef(t.clientX)&&(this.mousePos_={x:t.clientX,y:t.clientY},this.mouseSourceDelta_={x:this.sourceRegion_.left-this.mousePos_.x,y:this.sourceRegion_.top-this.mousePos_.y})},u.prototype.canStartDrag_=function(t){return!this.disabled&&(!e.isDef(t.button)||0===t.button)&&!this.isDragging()&&this.isWithinHandle_(t.target)},u.prototype.cleanUpAfterDragging_=function(){this.activeDragPlaceholder_&&(this.activeDragPlaceholder_.setAttribute("aria-grabbed","false"),o.removeClasses(this.activeDragPlaceholder_,this.draggingClass),this.dragPlaceholder===u.Placeholder.CLONE&&o.exitDocument(this.activeDragPlaceholder_)),this.activeDragPlaceholder_=null,this.activeDragSource_=null,this.sourceRegion_=null,this.sourceRelativePos_=null,this.mousePos_=null,this.mouseSourceDelta_=null,this.dragging_=!1,this.dragHandler_.removeAllListeners()},u.prototype.cloneActiveDrag_=function(){var t=this.activeDragSource_.cloneNode(!0);return t.style.position="absolute",t.style.left=this.sourceRelativePos_.x+"px",t.style.top=this.sourceRelativePos_.y+"px",o.append(this.activeDragSource_.parentNode,t),t},u.prototype.constrain_=function(t){this.constrainToAxis_(t),this.constrainToSteps_(t),this.constrainToRegion_(t)},u.prototype.constrainToAxis_=function(t){"x"===this.axis?(t.top=this.sourceRegion_.top,t.bottom=this.sourceRegion_.bottom):"y"===this.axis&&(t.left=this.sourceRegion_.left,
t.right=this.sourceRegion_.right)},u.prototype.constrainToRegion_=function(t){var n=this.constrain;n&&(e.isElement(n)&&(n=c.getRegion(n,!0)),t.left<n.left?t.left=n.left:t.right>n.right&&(t.left-=t.right-n.right),t.top<n.top?t.top=n.top:t.bottom>n.bottom&&(t.top-=t.bottom-n.bottom),t.right=t.left+t.width,t.bottom=t.top+t.height)},u.prototype.constrainToSteps_=function(t){var e=t.left-this.sourceRegion_.left,n=t.top-this.sourceRegion_.top;t.left-=e%this.steps.x,t.right=t.left+t.width,t.top-=n%this.steps.y,t.bottom=t.top+t.height},u.prototype.createActiveDragPlaceholder_=function(){var t=this.dragPlaceholder;t===u.Placeholder.CLONE?this.activeDragPlaceholder_=this.cloneActiveDrag_():e.isElement(t)?this.activeDragPlaceholder_=t:this.activeDragPlaceholder_=this.activeDragSource_},u.prototype.defaultDragFn_=function(){this.moveToPosition_(this.activeDragPlaceholder_)},u.prototype.defaultEndFn_=function(){this.moveToPosition_(this.activeDragSource_)},u.prototype.disposeInternal=function(){this.cleanUpAfterDragging_(),this.dragHandler_=null,this.dragScrollDelta_.dispose(),this.dragScrollDelta_=null,this.sourceHandler_.removeAllListeners(),this.sourceHandler_=null,i.prototype.disposeInternal.call(this)},u.prototype.getActiveDrag=function(){return this.activeDragSource_},u.prototype.handleDragEndEvent_=function(){this.autoScroll&&this.autoScroll.stop(),this.dragScrollDelta_.stop(),a.hideDocShim(),this.emit(u.Events.END,this.buildEventObject_()),this.cleanUpAfterDragging_()},u.prototype.handleDragMoveEvent_=function(t){var e=t.targetTouches?t.targetTouches[0]:t,n=e.clientX-this.mousePos_.x,o=e.clientY-this.mousePos_.y;this.mousePos_.x=e.clientX,this.mousePos_.y=e.clientY,(this.isDragging()||this.hasReachedMinimumDistance_(n,o))&&(this.isDragging()||(this.startDragging_(),this.dragScrollDelta_.start(this.activeDragPlaceholder_,this.scrollContainers)),this.autoScroll&&this.autoScroll.scroll(this.scrollContainers,this.mousePos_.x,this.mousePos_.y),this.updatePositionFromMouse())},u.prototype.handleDragStartEvent_=function(t){this.activeDragSource_=t.delegateTarget||t.currentTarget,this.canStartDrag_(t)&&(this.calculateInitialPosition_(t.targetTouches?t.targetTouches[0]:t),t.preventDefault(),"keydown"===t.type?this.startDragging_():(this.dragHandler_.add.apply(this.dragHandler_,a.attachDocListeners(this.useShim,{mousemove:this.handleDragMoveEvent_.bind(this),touchmove:this.handleDragMoveEvent_.bind(this),mouseup:this.handleDragEndEvent_.bind(this),touchend:this.handleDragEndEvent_.bind(this)})),this.distanceDragged_=0))},u.prototype.handleKeyDown_=function(t){27===t.keyCode&&this.isDragging()&&this.handleDragEndEvent_()},u.prototype.handleScrollDelta_=function(t){this.mouseSourceDelta_.x+=t.deltaX,this.mouseSourceDelta_.y+=t.deltaY,this.updatePositionFromMouse()},u.prototype.handleSourceKeyDown_=function(t){if(this.isDragging()){var e=t.delegateTarget||t.currentTarget;if(e!==this.activeDragSource_)return;if(t.keyCode>=37&&t.keyCode<=40){var n=0,o=0,i=this.keyboardSpeed>=this.steps.x?this.keyboardSpeed:this.steps.x,r=this.keyboardSpeed>=this.steps.y?this.keyboardSpeed:this.steps.y;37===t.keyCode?n-=i:38===t.keyCode?o-=r:39===t.keyCode?n+=i:o+=r,this.updatePositionFromDelta(n,o),t.preventDefault()}else 13!==t.keyCode&&32!==t.keyCode&&27!==t.keyCode||this.handleDragEndEvent_()}else 13!==t.keyCode&&32!==t.keyCode||this.handleDragStartEvent_(t)},u.prototype.handleSourcesChanged_=function(){this.sourceHandler_.removeAllListeners(),this.attachSourceEvents_()},u.prototype.hasReachedMinimumDistance_=function(t,e){return this.distanceDragged_+=Math.abs(t)+Math.abs(e),this.distanceDragged_>=this.minimumDragDistance},u.prototype.isDragging=function(){return this.dragging_},u.prototype.isWithinHandle_=function(t){var n=this.handles;return n?e.isString(n)?o.match(t,n+", "+n+" *"):o.contains(n,t):!0},u.prototype.moveToPosition_=function(t){t.style.left=this.sourceRelativePos_.x+"px",t.style.top=this.sourceRelativePos_.y+"px"},u.prototype.setterAutoScrollFn_=function(t){return t!==!1?new r(t):void 0},u.prototype.setterConstrainFn=function(t){return e.isString(t)&&(t=o.toElement(t)),t},u.prototype.setterScrollContainersFn_=function(t){var e=this.toElements_(t);return e.push(document),e},u.prototype.startDragging_=function(){this.dragging_=!0,this.createActiveDragPlaceholder_(),o.addClasses(this.activeDragPlaceholder_,this.draggingClass),this.activeDragPlaceholder_.setAttribute("aria-grabbed","true")},u.prototype.toElements_=function(t){if(e.isString(t)){var n=this.container.querySelectorAll(t);return Array.prototype.slice.call(n,0)}return t?[t]:[]},u.prototype.updatePosition=function(t){this.constrain_(t);var e=t.left-this.sourceRegion_.left,n=t.top-this.sourceRegion_.top;0===e&&0===n||(this.sourceRegion_=t,this.sourceRelativePos_.x+=e,this.sourceRelativePos_.y+=n,this.emit(u.Events.DRAG,this.buildEventObject_()))},u.prototype.updatePositionFromDelta=function(t,e){var o=n.mixin({},this.sourceRegion_);o.left+=t,o.right+=t,o.top+=e,o.bottom+=e,this.updatePosition(o)},u.prototype.updatePositionFromMouse=function(){var t={height:this.sourceRegion_.height,left:this.mousePos_.x+this.mouseSourceDelta_.x,top:this.mousePos_.y+this.mouseSourceDelta_.y,width:this.sourceRegion_.width};t.right=t.left+t.width,t.bottom=t.top+t.height,this.updatePosition(t)},u.prototype.validateElementOrString_=function(t){return e.isString(t)||e.isElement(t)},u.prototype.validatorConstrainFn=function(t){return e.isString(t)||e.isObject(t)},u}(i);u.prototype.registerMetalComponent&&u.prototype.registerMetalComponent(u,"Drag"),u.ATTRS={autoScroll:{setter:"setterAutoScrollFn_",value:!1,writeOnce:!0},axis:{validator:e.isString},constrain:{setter:"setterConstrainFn",validator:"validatorConstrainFn"},container:{setter:o.toElement,validator:"validateElementOrString_",value:document},disabled:{validator:e.isBoolean,value:!1},draggingClass:{validator:e.isString,value:"dragging"},dragPlaceholder:{validator:"validateElementOrString_"},handles:{validator:"validateElementOrString_"},keyboardSpeed:{validator:e.isNumber,value:10},minimumDragDistance:{validator:e.isNumber,value:5,writeOnce:!0},scrollContainers:{setter:"setterScrollContainersFn_",validator:"validateElementOrString_"},sources:{validator:"validateElementOrString_"},steps:{validator:e.isObject,valueFn:function(){return{x:1,y:1}}},useShim:{value:!0}},u.Events={DRAG:"drag",END:"end"},u.Placeholder={CLONE:"clone"},this.metal.Drag=u}.call(this),function(){var e=this.metalNamed.metal.array,n=this.metalNamed.metal.core,o=this.metalNamed.metal.object,i=this.metal.dom,r=this.metal.Drag,s=this.metal.position,a=function(r){function a(e){t.classCallCheck(this,a);var n=t.possibleConstructorReturn(this,r.call(this,e));return n.activeTargets_=[],n}return t.inherits(a,r),a.prototype.addTarget=function(t){this.targets.push(t),this.targets=this.targets},a.prototype.buildEventObject_=function(){var t=r.prototype.buildEventObject_.call(this);return t.target=this.activeTargets_[0],t.allActiveTargets=this.activeTargets_,t},a.prototype.cleanUpAfterDragging_=function(){r.prototype.cleanUpAfterDragging_.call(this),this.targets.forEach(function(t){return t.removeAttribute("aria-dropeffect")}),this.activeTargets_.length&&i.removeClasses(this.activeTargets_[0],this.targetOverClass),this.activeTargets_=[]},a.prototype.findAllActiveTargets_=function(){var t,e=[],n=this.getSourceRegion_(),o=this.targets;return o.forEach(function(i,r){var a=s.getRegion(i);o[r]!==this.activeDragPlaceholder_&&s.intersectRegion(a,n)&&(!t||s.insideRegion(t,a)?(e=[o[r]].concat(e),t=a):e.push(o[r]))}.bind(this)),e},a.prototype.getSourceRegion_=function(){if(n.isDefAndNotNull(this.mousePos_)){var t=this.mousePos_.x,e=this.mousePos_.y;return s.makeRegion(e,0,t,t,e,0)}var i=o.mixin({},this.sourceRegion_);return i.left-=document.body.scrollLeft,i.right-=document.body.scrollLeft,i.top-=document.body.scrollTop,i.bottom-=document.body.scrollTop,i},a.prototype.removeTarget=function(t){e.remove(this.targets,t),this.targets=this.targets},a.prototype.startDragging_=function(){var t=this;this.ariaDropEffect&&this.targets.forEach(function(e){return e.setAttribute("aria-dropeffect",t.ariaDropEffect)}),r.prototype.startDragging_.call(this)},a.prototype.updatePosition=function(t,e){r.prototype.updatePosition.call(this,t,e);var n=this.findAllActiveTargets_();n[0]!==this.activeTargets_[0]&&(this.activeTargets_[0]&&(i.removeClasses(this.activeTargets_[0],this.targetOverClass),this.emit(a.Events.TARGET_LEAVE,this.buildEventObject_())),this.activeTargets_=n,this.activeTargets_[0]&&(i.addClasses(this.activeTargets_[0],this.targetOverClass),this.emit(a.Events.TARGET_ENTER,this.buildEventObject_())))},a}(r);a.prototype.registerMetalComponent&&a.prototype.registerMetalComponent(a,"DragDrop"),a.ATTRS={ariaDropEffect:{validator:n.isString},targetOverClass:{validator:n.isString,value:"targetOver"},targets:{setter:"toElements_",validator:"validateElementOrString_"}},a.Events={DRAG:"drag",END:"end",TARGET_ENTER:"targetEnter",TARGET_LEAVE:"targetLeave"},this.metal.DragDrop=a}.call(this),function(){var t=this.metal.Drag,e=this.metal.DragDrop;this.metalNamed.drag={},this.metalNamed.drag.Drag=t,this.metalNamed.drag.DragDrop=e}.call(this),function(){var e=this.metal.component,n=this.metalNamed.soy.SoyAop,o=this.metalNamed.soy.SoyRenderer,i=this.metalNamed.soy.SoyTemplates,r=i.get();"undefined"==typeof r.Slider&&(r.Slider={}),r.Slider.render=function(t,e,n){return soydata.VERY_UNSAFE.ordainSanitizedHtml('<div id="'+soy.$$escapeHtmlAttribute(t.id)+'" class="slider component'+soy.$$escapeHtmlAttribute(t.elementClasses?" "+t.elementClasses:"")+'">'+r.Slider.input(t,null,n)+r.Slider.label(t,null,n)+r.Slider.rail(t,null,n)+"</div>")},goog.DEBUG&&(r.Slider.render.soyTemplateName="Templates.Slider.render"),r.Slider.input=function(t,e,n){return soydata.VERY_UNSAFE.ordainSanitizedHtml('<div id="'+soy.$$escapeHtmlAttribute(t.id)+'-input"><input name="'+soy.$$escapeHtmlAttribute(t.inputName?t.inputName:t.id)+'" type="hidden" value="'+soy.$$escapeHtmlAttribute(t.value)+'"></div>')},goog.DEBUG&&(r.Slider.input.soyTemplateName="Templates.Slider.input"),r.Slider.label=function(t,e,n){return soydata.VERY_UNSAFE.ordainSanitizedHtml('<div id="'+soy.$$escapeHtmlAttribute(t.id)+'-label"><span>'+soy.$$escapeHtml(t.value)+"</span></div>")},goog.DEBUG&&(r.Slider.label.soyTemplateName="Templates.Slider.label"),r.Slider.rail=function(t,e,n){return soydata.VERY_UNSAFE.ordainSanitizedHtml('<div id="'+soy.$$escapeHtmlAttribute(t.id)+'-rail"><div class="rail" data-onmousedown="onRailMouseDown_"><div class="rail-active"></div><div class="rail-handle"><div class="handle" tabindex="0"></div></div></div></div>')},goog.DEBUG&&(r.Slider.rail.soyTemplateName="Templates.Slider.rail"),r.Slider.render.params=["id"],r.Slider.input.params=["id","inputName","value"],r.Slider.label.params=["id","value"],r.Slider.rail.params=["id"];var s=function(e){function n(){return t.classCallCheck(this,n),t.possibleConstructorReturn(this,e.apply(this,arguments))}return t.inherits(n,e),n}(e);s.prototype.registerMetalComponent&&s.prototype.registerMetalComponent(s,"Slider"),s.RENDERER=o,n.registerTemplates("Slider"),this.metal.Slider=s}.call(this),function(){var e=this.metal.metal,n=this.metalNamed.drag.Drag,o=this.metal.position,i=this.metal.Slider,r=function(e){function i(n){t.classCallCheck(this,i);var o=t.possibleConstructorReturn(this,e.call(this,n));return o.elements_=new Map,o}return t.inherits(i,e),i.prototype.attached=function(){this.drag_=new n({constrain:this.getElement_(".rail"),handles:this.getElement_(".handle"),sources:this.getElement_(".rail-handle")}),this.elementRegion_=o.getRegion(this.element),this.attachDragEvents_()},i.prototype.attachDragEvents_=function(){this.drag_.on(n.Events.DRAG,this.updateValueFromDragData_.bind(this)),this.drag_.on(n.Events.END,this.updateValueFromDragData_.bind(this))},i.prototype.disposeInternal=function(){e.prototype.disposeInternal.call(this),this.drag_.dispose(),this.elements_=null,this.elementRegion_=null},i.prototype.getElement_=function(t){var e=this.elements_.get(t);return e||(e=this.element.querySelector(t),this.elements_.set(t,e)),e},i.prototype.onRailMouseDown_=function(t){t.target!==this.getElement_(".rail")&&t.target!==this.getElement_(".rail-active")||this.updateValue_(t.offsetX,0)},i.prototype.syncMax=function(t){t<this.value?this.value=t:this.updateHandlePosition_()},i.prototype.syncMin=function(t){t>this.value?this.value=t:this.updateHandlePosition_()},i.prototype.syncValue=function(){this.updateHandlePosition_()},i.prototype.updateHandlePosition_=function(){var t=100*(this.value-this.min)/(this.max-this.min)+"%";this.drag_&&this.drag_.isDragging()||(this.getElement_(".rail-handle").style.left=t),this.getElement_(".rail-active").style.width=t},i.prototype.updateValue_=function(t,e){this.value=Math.round(e+t/this.elementRegion_.width*(this.max-this.min))},i.prototype.updateValueFromDragData_=function(t){this.updateValue_(t.relativeX,this.min)},i}(i);r.prototype.registerMetalComponent&&r.prototype.registerMetalComponent(r,"Slider"),r.ATTRS={inputName:{validator:e.isString},max:{value:100},min:{value:0},value:{validator:function(t){return e.isNumber(t)&&this.min<=t&&t<=this.max},value:80}},r.ELEMENT_CLASSES="slider",this.metal.Slider=r}.call(this),function(){var e=this.metal.component,n=this.metalNamed.soy.SoyAop,o=this.metalNamed.soy.SoyRenderer,i=this.metalNamed.soy.SoyTemplates,r=i.get();"undefined"==typeof r.Switcher&&(r.Switcher={}),r.Switcher.render=function(t,e,n){return soydata.VERY_UNSAFE.ordainSanitizedHtml('<div id="'+soy.$$escapeHtmlAttribute(t.id)+'" class="switcher component'+soy.$$escapeHtmlAttribute(t.elementClasses?" "+t.elementClasses:"")+soy.$$escapeHtmlAttribute(t.checked?" switcher-on":"")+'"><div class="switcher-control"><div class="switcher-control-icon"></div></div></div>')},goog.DEBUG&&(r.Switcher.render.soyTemplateName="Templates.Switcher.render"),r.Switcher.render.params=["id"];var s=function(e){function n(){return t.classCallCheck(this,n),t.possibleConstructorReturn(this,e.apply(this,arguments))}return t.inherits(n,e),n}(e);s.prototype.registerMetalComponent&&s.prototype.registerMetalComponent(s,"Switcher"),s.RENDERER=o,n.registerTemplates("Switcher"),this.metal.Switcher=s}.call(this),function(){var e=this.metal.metal,n=this.metal.dom,o=this.metal.Switcher,i=function(e){function o(){return t.classCallCheck(this,o),t.possibleConstructorReturn(this,e.apply(this,arguments))}return t.inherits(o,e),o.prototype.attached=function(){this.on("click",this.handleClick)},o.prototype.handleClick=function(){this.checked=!this.checked},o.prototype.syncChecked=function(t){n[t?"addClasses":"removeClasses"](this.element,"switcher-on")},o}(o);i.prototype.registerMetalComponent&&i.prototype.registerMetalComponent(i,"Switcher"),i.ELEMENT_CLASSES="switcher",i.ATTRS={checked:{validator:e.isBoolean,value:!1}},this.metal.Switcher=i}.call(this),function(){var e=this.metal.component,n=this.metalNamed.soy.SoyAop,o=this.metalNamed.soy.SoyRenderer,i=this.metalNamed.soy.SoyTemplates,r=i.get();"undefined"==typeof r.Treeview&&(r.Treeview={}),r.Treeview.render=function(t,e,n){return soydata.VERY_UNSAFE.ordainSanitizedHtml('<div id="'+soy.$$escapeHtmlAttribute(t.id)+'" class="treeview component'+soy.$$escapeHtmlAttribute(t.elementClasses?" "+t.elementClasses:"")+'" role="tree">'+r.Treeview.nodes(t,null,n)+"</div>")},goog.DEBUG&&(r.Treeview.render.soyTemplateName="Templates.Treeview.render"),r.Treeview.nodes=function(t,e,n){var o="",i=t.id+"-"+(null!=t.surfaceId?t.surfaceId:"nodes");o+='<ul id="'+soy.$$escapeHtmlAttribute(i)+'" class="treeview-nodes">';for(var s=t.nodes,a=s.length,l=0;a>l;l++){var c=s[l],u=l;o+=r.Treeview.node({id:t.id,node:c,surfaceId:null!=t.parentSurfaceId?t.parentSurfaceId+"-"+u:u},null,n)}return o+="</ul>",soydata.VERY_UNSAFE.ordainSanitizedHtml(o)},goog.DEBUG&&(r.Treeview.nodes.soyTemplateName="Templates.Treeview.nodes"),r.Treeview.node=function(t,e,n){return soydata.VERY_UNSAFE.ordainSanitizedHtml('<li id="'+soy.$$escapeHtmlAttribute(t.id)+"-"+soy.$$escapeHtmlAttribute(t.surfaceId)+'" class="treeview-node">'+(t.node?'<div class="treeview-node-wrapper'+soy.$$escapeHtmlAttribute(t.node.expanded?" expanded":"")+'"><div class="treeview-node-main clearfix'+soy.$$escapeHtmlAttribute(t.node.children?" hasChildren":"")+'" data-onclick="handleNodeClicked_" data-onkeyup="handleNodeKeyUp_" aria-expanded="'+soy.$$escapeHtmlAttribute(t.node.expanded?"true":"false")+'" role="treeitem" tabindex="0">'+(t.node.children?'<div class="treeview-node-toggler"></div>':"")+'<span class="treeview-node-name">'+soy.$$escapeHtml(t.node.name)+"</span></div>"+(t.node.children?r.Treeview.nodes({id:t.id,nodes:t.node.children,parentSurfaceId:t.surfaceId,surfaceId:t.surfaceId+"-nodes"},null,n):"")+"</div>":"")+"</li>")},goog.DEBUG&&(r.Treeview.node.soyTemplateName="Templates.Treeview.node"),r.Treeview.render.params=["id"],r.Treeview.nodes.params=["id","nodes","parentSurfaceId","surfaceId"],r.Treeview.node["private"]=!0;var s=function(e){function n(){return t.classCallCheck(this,n),t.possibleConstructorReturn(this,e.apply(this,arguments))}return t.inherits(n,e),n}(e);s.prototype.registerMetalComponent&&s.prototype.registerMetalComponent(s,"Treeview"),s.RENDERER=o,n.registerTemplates("Treeview"),this.metal.Treeview=s}.call(this),function(){var e=this.metal.dom,n=this.metal.Treeview,o=function(n){function o(){return t.classCallCheck(this,o),t.possibleConstructorReturn(this,n.apply(this,arguments))}return t.inherits(o,n),o.prototype.attached=function(){this.on("nodesChanged",this.onNodesChanged_),this.getRenderer().on("renderSurface",this.handleRenderSurface_.bind(this))},o.prototype.getNodeObj=function(t){for(var e=this.nodes[t[0]],n=1;n<t.length;n++)e=e.children[t[n]];return e},o.prototype.getNodeObjFromId_=function(t){var e=t.substr(this.id.length+1).split("-");return this.getNodeObj(e)},o.prototype.handleNodeClicked_=function(t){this.toggleExpandedState_(t.delegateTarget)},o.prototype.handleNodeKeyUp_=function(t){13!==t.keyCode&&32!==t.keyCode||this.toggleExpandedState_(t.delegateTarget)},o.prototype.handleRenderSurface_=function(t,e){this.ignoreSurfaceUpdate_&&(e.preventDefault(),this.ignoreSurfaceUpdate_=!1)},o.prototype.onNodesChanged_=function(){this.ignoreSurfaceUpdate_=!1},o.prototype.toggleExpandedState_=function(t){var n=this.getNodeObjFromId_(t.parentNode.parentNode.id);n.expanded=!n.expanded,n.expanded?(e.addClasses(t.parentNode,"expanded"),t.setAttribute("aria-expanded","true")):(e.removeClasses(t.parentNode,"expanded"),t.setAttribute("aria-expanded","false")),this.nodes=this.nodes,this.ignoreSurfaceUpdate_=!0},o}(n);o.prototype.registerMetalComponent&&o.prototype.registerMetalComponent(o,"Treeview"),o.ELEMENT_CLASSES="treeview",o.ATTRS={nodes:{validator:Array.isArray,valueFn:function(){return[]}}},this.metal.Treeview=o}.call(this)}).call(this);