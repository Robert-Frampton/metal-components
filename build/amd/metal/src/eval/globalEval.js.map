{"version":3,"sources":["globalEval.js"],"names":[],"mappings":"AAAA,YAAY,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;mBAgEE,UAAU","file":"bower_components/metal/src/eval/globalEval.js","sourcesContent":["'use strict';\n\nimport dom from '../dom/dom';\n\n/**\n * Utility functions for running javascript code in the global scope.\n */\nclass globalEval {\n\t/**\n\t * Evaluates the given string in the global scope.\n\t * @param {string} text\n\t */\n\tstatic run(text) {\n\t\tvar script = document.createElement('script');\n\t\tscript.text = text;\n\t\tdocument.head.appendChild(script).parentNode.removeChild(script);\n\t}\n\n\t/**\n\t * Evaluates the given javascript file in the global scope.\n\t * @param {string} src The file's path.\n\t */\n\tstatic runFile(src) {\n\t\tvar script = document.createElement('script');\n\t\tscript.src = src;\n\t\tdom.on(script, 'load', function() {\n\t\t\tscript.parentNode.removeChild(script);\n\t\t});\n\t\tdom.on(script, 'error', function() {\n\t\t\tscript.parentNode.removeChild(script);\n\t\t});\n\t\tdocument.head.appendChild(script);\n\t}\n\n\t/**\n\t * Evaluates the code referenced by the given script element.\n\t * @param {!Element} script\n\t */\n\tstatic runScript(script) {\n\t\tif (script.parentNode) {\n\t\t\tscript.parentNode.removeChild(script);\n\t\t}\n\t\tif (script.src) {\n\t\t\tglobalEval.runFile(script.src);\n\t\t} else {\n\t\t\tglobalEval.run(script.text);\n\t\t}\n\t}\n\n\t/**\n\t * Evaluates any script tags present in the given element.\n\t * @params {!Element} element\n\t */\n\tstatic runScriptsInElement(element) {\n\t\tvar scripts = element.querySelectorAll('script');\n\t\tfor (var i = 0; i < scripts.length; i++) {\n\t\t\tvar script = scripts.item(i);\n\t\t\tif (!script.type || script.type === 'text/javascript') {\n\t\t\t\tglobalEval.runScript(script);\n\t\t\t}\n\t\t}\n\t}\n}\n\nexport default globalEval;\n"],"sourceRoot":"/source/"}