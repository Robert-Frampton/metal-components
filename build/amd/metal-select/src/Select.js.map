{"version":3,"sources":["Select.js"],"names":["Select","findItemIndex_","element","items","querySelectorAll","i","length","item","focusIndex_","index","option","querySelector","focusedIndex_","focus","getDropdown","components","dropdown","handleDropdownStateSynced_","data","openedWithKeyboard_","closedWithKeyboard_","changes","expanded","expanded_","handleItemClick_","event","selectItem_","delegateTarget","preventDefault","handleItemKeyDown_","keyCode","handleKeyDown_","isDefAndNotNull","hasClass","target","itemElement","selectedIndex","setItems_","map","toIncDom","register","STATE","arrowClass","value","buttonClass","validator","isString","isBoolean","internal","hiddenInputName","setter","val","Array","valueFn","label","isNumber","values","ELEMENT_CLASSES"],"mappings":"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","file":"node_modules/metal-select/src/Select.js","sourcesContent":["'use strict';\n\nimport core from 'metal';\nimport dom from 'metal-dom';\nimport Component from 'metal-component';\nimport Soy from 'metal-soy';\n\nimport 'metal-dropdown';\nimport templates from './Select.soy.js';\n\n/**\n * Responsible for rendering and handling a custom select component, based\n * on `Dropdown`.\n */\nclass Select extends Component {\n\t/**\n\t * Finds the index of the given element in the items array.\n\t * @param {!Element} element\n\t * @return {number}\n\t * @protected\n\t */\n\tfindItemIndex_(element) {\n\t\tvar items = this.element.querySelectorAll('li');\n\t\tfor (var i = 0; i < items.length; i++) {\n\t\t\tif (items.item(i) === element) {\n\t\t\t\treturn i;\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Focuses the option at the given index.\n\t * @param {number} index\n\t * @protected\n\t */\n\tfocusIndex_(index) {\n\t\tvar option = this.element.querySelector('.select-option:nth-child(' + (index + 1) + ') a');\n\t\tif (option) {\n\t\t\tthis.focusedIndex_ = index;\n\t\t\toption.focus();\n\t\t}\n\t}\n\n\t/**\n\t * Gets the `Dropdown` instance used by this `Select`.\n\t * @return {!Dropdown}\n\t */\n\tgetDropdown() {\n\t\treturn this.components.dropdown;\n\t}\n\n\t/**\n\t * Handles a `stateSynced` event for the dropdown.\n\t * @param {!Object} data\n\t * @protected\n\t */\n\thandleDropdownStateSynced_(data) {\n\t\tif (this.openedWithKeyboard_) {\n\t\t\t// This is done on `stateSynced` because the items need to have already\n\t\t\t// been made visible before we try focusing them.\n\t\t\tthis.focusIndex_(0);\n\t\t\tthis.openedWithKeyboard_ = false;\n\t\t} else if (this.closedWithKeyboard_) {\n\t\t\tthis.element.querySelector('.dropdown-select').focus();\n\t\t\tthis.closedWithKeyboard_ = false;\n\t\t} else if (data.changes.expanded) {\n\t\t\tthis.focusedIndex_ = null;\n\t\t}\n\n\t\tthis.expanded_ = this.getDropdown().expanded;\n\t}\n\n\t/**\n\t * Handles a `click` event on one of the items. Updates `selectedIndex`\n\t * accordingly.\n\t * @param {!Event} event\n\t * @protected\n\t */\n\thandleItemClick_(event) {\n\t\tthis.selectItem_(event.delegateTarget);\n\t\tevent.preventDefault();\n\t}\n\n\t/**\n\t * Handles a `keydown` event on one of the items. Updates `selectedIndex`\n\t * accordingly.\n\t * @param {!Event} event\n\t * @protected\n\t */\n\thandleItemKeyDown_(event) {\n\t\tif ((event.keyCode === 13 || event.keyCode === 32)) {\n\t\t\tthis.closedWithKeyboard_ = true;\n\t\t\tthis.selectItem_(event.delegateTarget);\n\t\t\tevent.preventDefault();\n\t\t}\n\t}\n\n\t/**\n\t * Handles a `keydown` event on this component. Handles keyboard controls.\n\t * @param {!Event} event\n\t * @protected\n\t */\n\thandleKeyDown_(event) {\n\t\tif (this.expanded_) {\n\t\t\tswitch (event.keyCode) {\n\t\t\t\tcase 27:\n\t\t\t\t\tthis.closedWithKeyboard_ = true;\n\t\t\t\t\tthis.expanded_ = false;\n\t\t\t\t\tbreak;\n\t\t\t\tcase 38:\n\t\t\t\t\tthis.focusedIndex_ = core.isDefAndNotNull(this.focusedIndex_) ? this.focusedIndex_ : 1;\n\t\t\t\t\tthis.focusIndex_(this.focusedIndex_ === 0 ? this.items.length - 1 : this.focusedIndex_ - 1);\n\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\tbreak;\n\t\t\t\tcase 40:\n\t\t\t\t\tthis.focusedIndex_ = core.isDefAndNotNull(this.focusedIndex_) ? this.focusedIndex_ : -1;\n\t\t\t\t\tthis.focusIndex_(this.focusedIndex_ === this.items.length - 1 ? 0 : this.focusedIndex_ + 1);\n\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t} else if ((event.keyCode === 13 || event.keyCode === 32) && dom.hasClass(event.target, 'dropdown-select')) {\n\t\t\tthis.openedWithKeyboard_ = true;\n\t\t\tthis.expanded_ = true;\n\t\t\tevent.preventDefault();\n\t\t\treturn;\n\t\t}\n\t}\n\n\t/**\n\t * Selects the item for the given element, and closes the dropdown.\n\t * @param {!Element} itemElement\n\t * @protected\n\t */\n\tselectItem_(itemElement) {\n\t\tthis.selectedIndex = this.findItemIndex_(itemElement);\n\t\tthis.expanded_ = false;\n\t}\n\n\t/**\n\t * Setter for items attribute.\n\t * @param {!Array<string>} items\n\t * @protected\n\t */\n\tsetItems_(items) {\n\t\treturn items.map((item) => Soy.toIncDom(item));\n\t}\n\n}\nSoy.register(Select, templates);\n\n/**\n * State definition.\n * @type {!Object}\n * @static\n */\nSelect.STATE = {\n\t/**\n\t * The CSS class used by the select menu arrow.\n\t * @type {string}\n\t * @default 'caret'\n\t */\n\tarrowClass: {\n\t\tvalue: 'caret'\n\t},\n\n\t/**\n\t * The CSS class used by the select menu button.\n\t * @type {string}\n\t * @default 'btn btn-default'\n\t */\n\tbuttonClass: {\n\t\tvalidator: core.isString,\n\t\tvalue: 'btn btn-default'\n\t},\n\n\t/**\n\t * Flag indicating if the select dropdown is currently expanded.\n\t * @type {boolean}\n\t */\n\texpanded_: {\n\t\tvalidator: core.isBoolean,\n\t\tvalue: false,\n\t\tinternal: true\n\t},\n\n\t/**\n\t * The name of the hidden input field\n\t * @type {string}\n\t */\n\thiddenInputName: {\n\t\tvalidator: core.isString\n\t},\n\n\t/**\n\t * A list representing the select dropdown items.\n\t * @type {!Array<string>}\n\t * @default []\n\t */\n\titems: {\n\t\tsetter: 'setItems_',\n\t\tvalidator: val => val instanceof Array,\n\t\tvalueFn: function() {\n\t\t\treturn [];\n\t\t}\n\t},\n\n\t/**\n\t * The label that should be used for the select menu when no item is\n\t * selected. If not set, the first item will be selected automatically.\n\t * @type {string}\n\t */\n\tlabel: {\n\t\tvalidator: core.isString\n\t},\n\n\t/**\n\t * The index of the currently selected item, or -1 if none is selected.\n\t * @type {number}\n\t */\n\tselectedIndex: {\n\t\tvalidator: core.isNumber,\n\t\tvalueFn: function() {\n\t\t\treturn this.label || !this.items.length ? -1 : 0;\n\t\t}\n\t},\n\n\t/**\n\t * A list representing the select dropdown values.\n\t * @type {Array<string>=}\n\t */\n\tvalues: {\n\t\tvalidator: val => val instanceof Array\n\t}\n};\n\n/**\n * Default element classes.\n * @type {string}\n * @static\n */\nSelect.ELEMENT_CLASSES = 'select';\n\nexport default Select;\n"],"sourceRoot":"/source/"}