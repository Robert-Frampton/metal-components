{"version":3,"sources":["IncrementalDomUnusedComponents.js"],"names":[],"mappings":";AAAA;;;;;;;;;;;;KAIM,8B;;;;;iCAKE,Q,qBAAS,K,EAAO;AACtB,QAAK,IAAI,IAAI,CAAb,EAAgB,IAAI,MAAM,MAA1B,EAAkC,GAAlC,EAAuC;AACtC,UAAM,CAAN,EAAS,WAAT,GAAuB,OAAvB,GAAiC,IAAjC;AACA,WAAO,IAAP,CAAY,MAAM,CAAN,CAAZ;AACA;AACD,OAAI,CAAC,UAAL,EAAiB;AAChB,iBAAa,IAAb;AACA,iBAAM,QAAN,CAAe,cAAf;AACA;AACD,G;;;;;AAGF,KAAI,SAAS,EAAb;AACA,KAAI,aAAa,KAAjB;;;;;;;AAOA,UAAS,cAAT,GAA0B;AACzB,OAAK,IAAI,IAAI,CAAb,EAAgB,IAAI,OAAO,MAA3B,EAAmC,GAAnC,EAAwC;AACvC,OAAI,CAAC,OAAO,CAAP,EAAU,UAAV,EAAL,EAA6B;AAC5B,QAAI,WAAW,OAAO,CAAP,EAAU,WAAV,EAAf;AACA,QAAI,CAAC,SAAS,SAAT,EAAL,EAA2B;AAC1B,cAAS,QAAT,GAAoB,oBAApB,CAAyC,CAAC,OAAO,CAAP,EAAU,MAAV,CAAiB,GAAlB,CAAzC;AACA;AACD;AACD;AACD,eAAa,KAAb;AACA,WAAS,EAAT;AACA;;mBAEc,8B","file":"node_modules/metal-incremental-dom/src/cleanup/IncrementalDomUnusedComponents.js","sourcesContent":["'use strict';\n\nimport { async } from 'metal';\n\nclass IncrementalDomUnusedComponents {\n\t/**\n\t * Schedules a cleanup of unused components to happen in the next tick.\n\t * @param {!Array<!Component} comps\n\t */\n\tstatic schedule(comps) {\n\t\tfor (var i = 0; i < comps.length; i++) {\n\t\t\tcomps[i].getRenderer().parent_ = null;\n\t\t\tcomps_.push(comps[i]);\n\t\t}\n\t\tif (!scheduled_) {\n\t\t\tscheduled_ = true;\n\t\t\tasync.nextTick(disposeUnused_);\n\t\t}\n\t}\n}\n\nvar comps_ = [];\nvar scheduled_ = false;\n\n/**\n * Disposes all sub components that were not rerendered since the last\n * time this function was scheduled.\n * @protected\n */\nfunction disposeUnused_() {\n\tfor (var i = 0; i < comps_.length; i++) {\n\t\tif (!comps_[i].isDisposed()) {\n\t\t\tvar renderer = comps_[i].getRenderer();\n\t\t\tif (!renderer.getParent()) {\n\t\t\t\trenderer.getOwner().disposeSubComponents([comps_[i].config.ref]);\n\t\t\t}\n\t\t}\n\t}\n\tscheduled_ = false;\n\tcomps_ = [];\n}\n\nexport default IncrementalDomUnusedComponents;\n"],"sourceRoot":"/source/"}