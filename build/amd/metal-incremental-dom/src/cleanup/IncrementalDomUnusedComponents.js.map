{"version":3,"sources":["IncrementalDomUnusedComponents.js"],"names":[],"mappings":";AAAA;;;;;;;;;;;;AAEA,KAAI,SAAS,EAAb;;KAEM,8B;;;;;iCAKE,a,4BAAgB;AACtB,QAAK,IAAI,IAAI,CAAb,EAAgB,IAAI,OAAO,MAA3B,EAAmC,GAAnC,EAAwC;AACvC,QAAI,CAAC,OAAO,CAAP,EAAU,UAAV,EAAL,EAA6B;AAC5B,SAAI,WAAW,OAAO,CAAP,EAAU,WAAV,EAAf;AACA,SAAI,CAAC,SAAS,SAAT,EAAL,EAA2B;;;AAG1B,aAAO,CAAP,EAAU,OAAV,GAAoB,IAApB;;AAEA,UAAI,MAAM,OAAO,CAAP,EAAU,MAAV,CAAiB,GAA3B;AACA,UAAI,QAAQ,SAAS,QAAT,EAAZ;AACA,UAAI,MAAM,UAAN,CAAiB,GAAjB,MAA0B,OAAO,CAAP,CAA9B,EAAyC;AACxC,aAAM,oBAAN,CAA2B,CAAC,GAAD,CAA3B;AACA,OAFD,MAEO;AACN,cAAO,CAAP,EAAU,OAAV;AACA;AACD;AACD;AACD;AACD,YAAS,EAAT;AACA,G;;iCAOM,Q,qBAAS,K,EAAO;AACtB,QAAK,IAAI,IAAI,CAAb,EAAgB,IAAI,MAAM,MAA1B,EAAkC,GAAlC,EAAuC;AACtC,UAAM,CAAN,EAAS,WAAT,GAAuB,OAAvB,GAAiC,IAAjC;AACA,WAAO,IAAP,CAAY,MAAM,CAAN,CAAZ;AACA;AACD,G;;;;;mBAGa,8B","file":"node_modules/metal-incremental-dom/src/cleanup/IncrementalDomUnusedComponents.js","sourcesContent":["'use strict';\n\nvar comps_ = [];\n\nclass IncrementalDomUnusedComponents {\n\t/**\n\t * Disposes all sub components that were not rerendered since the last\n\t * time this function was scheduled.\n\t */\n\tstatic disposeUnused() {\n\t\tfor (var i = 0; i < comps_.length; i++) {\n\t\t\tif (!comps_[i].isDisposed()) {\n\t\t\t\tvar renderer = comps_[i].getRenderer();\n\t\t\t\tif (!renderer.getParent()) {\n\t\t\t\t\t// Don't let disposing cause the element to be removed, since it may\n\t\t\t\t\t// be currently being reused by another component.\n\t\t\t\t\tcomps_[i].element = null;\n\n\t\t\t\t\tvar ref = comps_[i].config.ref;\n\t\t\t\t\tvar owner = renderer.getOwner();\n\t\t\t\t\tif (owner.components[ref] === comps_[i]) {\n\t\t\t\t\t\towner.disposeSubComponents([ref]);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tcomps_[i].dispose();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tcomps_ = [];\n\t}\n\n\t/**\n\t * Schedules the given components to be checked and disposed if not used\n\t * anymore, when `IncrementalDomUnusedComponents.disposeUnused` is called.\n\t * @param {!Array<!Component} comps\n\t */\n\tstatic schedule(comps) {\n\t\tfor (var i = 0; i < comps.length; i++) {\n\t\t\tcomps[i].getRenderer().parent_ = null;\n\t\t\tcomps_.push(comps[i]);\n\t\t}\n\t}\n}\n\nexport default IncrementalDomUnusedComponents;\n"],"sourceRoot":"/source/"}