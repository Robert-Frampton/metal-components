define(["exports","./Position"],function(t,e){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var n=i(e),r=function(){function t(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,i,o){return i&&t(e.prototype,i),o&&t(e,o),e}}(),f=function(){function t(){o(this,t)}return r(t,null,[{key:"align",value:function(t,e,i){var o=this.suggestAlignBestRegion(t,e,i),r=o.region,f=window.getComputedStyle(t,null);if("fixed"!==f.getPropertyValue("position")){r.top+=window.pageYOffset,r.left+=window.pageXOffset;for(var g=t;g=g.offsetParent;)r.top-=n["default"].getOffsetTop(g),r.left-=n["default"].getOffsetLeft(g)}return t.style.top=r.top+"px",t.style.left=r.left+"px",o.position}},{key:"getAlignBestRegion",value:function(e,i,o){return t.suggestAlignBestRegion(e,i,o).region}},{key:"getAlignRegion",value:function(e,i,o){var r=n["default"].getRegion(i),f=n["default"].getRegion(e),g=0,a=0;switch(o){case t.TopCenter:g=r.top-f.height,a=r.left+r.width/2-f.width/2;break;case t.RightCenter:g=r.top+r.height/2-f.height/2,a=r.left+r.width;break;case t.BottomCenter:g=r.bottom,a=r.left+r.width/2-f.width/2;break;case t.LeftCenter:g=r.top+r.height/2-f.height/2,a=r.left-f.width;break;case t.TopRight:g=r.top-f.height,a=r.right-f.width;break;case t.BottomRight:g=r.bottom,a=r.right-f.width;break;case t.BottomLeft:g=r.bottom,a=r.left;break;case t.TopLeft:g=r.top-f.height,a=r.left}return{bottom:g+f.height,height:f.height,left:a,right:a+f.width,top:g,width:f.width}}},{key:"isValidPosition",value:function(t){return 0<=t&&t<=8}},{key:"suggestAlignBestRegion",value:function(t,e,i){for(var o=0,r=i,f=this.getAlignRegion(t,e,r),g=r,a=f,l=n["default"].getRegion(window),u=0;u<8;){if(n["default"].intersectRegion(l,a)){var h=n["default"].intersection(l,a),s=h.width*h.height;if(s>o&&(o=s,f=a,r=g),n["default"].insideViewport(a))break}g=(i+ ++u)%8,a=this.getAlignRegion(t,e,g)}return{position:r,region:f}}}]),t}();f.TopCenter=0,f.TopRight=1,f.RightCenter=2,f.BottomRight=3,f.BottomCenter=4,f.BottomLeft=5,f.LeftCenter=6,f.TopLeft=7,f.Top=f.TopCenter,f.Right=f.RightCenter,f.Bottom=f.BottomCenter,f.Left=f.LeftCenter,t["default"]=f});