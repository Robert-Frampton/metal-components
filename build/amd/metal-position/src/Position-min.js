define(["exports","metal/src/metal","./Geometry"],function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=i(t),u=i(n),l=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=function(){function e(){o(this,e)}return l(e,null,[{key:"getClientHeight",value:function(e){return this.getClientSize_(e,"Height")}},{key:"getClientSize_",value:function(e,t){var n=e;return r["default"].isWindow(e)&&(n=e.document.documentElement),r["default"].isDocument(e)&&(n=e.documentElement),n["client"+t]}},{key:"getClientWidth",value:function(e){return this.getClientSize_(e,"Width")}},{key:"getDocumentRegion_",value:function(e){var t=this.getHeight(e),n=this.getWidth(e);return this.makeRegion(t,t,0,n,0,n)}},{key:"getHeight",value:function(e){return this.getSize_(e,"Height")}},{key:"getOffsetLeft",value:function(t,n){return t.offsetLeft+(n?0:e.getTranslation(t).left)}},{key:"getOffsetTop",value:function(t,n){return t.offsetTop+(n?0:e.getTranslation(t).top)}},{key:"getRegion",value:function(e,t){return r["default"].isDocument(e)||r["default"].isWindow(e)?this.getDocumentRegion_(e):this.makeRegionFromBoundingRect_(e.getBoundingClientRect(),t)}},{key:"getScrollLeft",value:function(e){return r["default"].isWindow(e)?e.pageXOffset:r["default"].isDocument(e)?e.defaultView.pageXOffset:e.scrollLeft}},{key:"getScrollTop",value:function(e){return r["default"].isWindow(e)?e.pageYOffset:r["default"].isDocument(e)?e.defaultView.pageYOffset:e.scrollTop}},{key:"getSize_",value:function(e,t){if(r["default"].isWindow(e))return this.getClientSize_(e,t);if(r["default"].isDocument(e)){var n=e.documentElement;return Math.max(e.body["scroll"+t],n["scroll"+t],e.body["offset"+t],n["offset"+t],n["client"+t])}return Math.max(e["client"+t],e["scroll"+t],e["offset"+t])}},{key:"getTransformMatrixValues",value:function(e){var t=getComputedStyle(e),n=t.msTransform||t.transform||t.webkitTransform||t.mozTransform;if("none"!==n){for(var i=[],o=/([\d-\.\s]+)/g,r=o.exec(n);r;)i.push(r[1]),r=o.exec(n);return i}}},{key:"getTranslation",value:function(t){var n=e.getTransformMatrixValues(t),i={left:0,top:0};return n&&(i.left=parseFloat(6===n.length?n[4]:n[13]),i.top=parseFloat(6===n.length?n[5]:n[14])),i}},{key:"getWidth",value:function(e){return this.getSize_(e,"Width")}},{key:"intersectRegion",value:function(e,t){return u["default"].intersectRect(e.top,e.left,e.bottom,e.right,t.top,t.left,t.bottom,t.right)}},{key:"insideRegion",value:function(e,t){return t.top>=e.top&&t.bottom<=e.bottom&&t.right<=e.right&&t.left>=e.left}},{key:"insideViewport",value:function(e){return this.insideRegion(this.getRegion(window),e)}},{key:"intersection",value:function(e,t){if(!this.intersectRegion(e,t))return null;var n=Math.min(e.bottom,t.bottom),i=Math.min(e.right,t.right),o=Math.max(e.left,t.left),r=Math.max(e.top,t.top);return this.makeRegion(n,n-r,o,i,r,i-o)}},{key:"makeRegion",value:function(e,t,n,i,o,r){return{bottom:e,height:t,left:n,right:i,top:o,width:r}}},{key:"makeRegionFromBoundingRect_",value:function(t,n){var i=n?e.getScrollLeft(document):0,o=n?e.getScrollTop(document):0;return this.makeRegion(t.bottom+o,t.height,t.left+i,t.right+i,t.top+o,t.width)}},{key:"pointInsideRegion",value:function(t,n,i){return e.insideRegion(i,e.makeRegion(n,0,t,t,n,0))}}]),e}();e["default"]=a});