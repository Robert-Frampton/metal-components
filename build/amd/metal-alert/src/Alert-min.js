define(["exports","metal/src/metal","metal-dom/src/all/dom","./Alert.soy","metal-anim/src/Anim","metal-events/src/events"],function(e,t,i,s,n,o){"use strict";function l(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(e,"__esModule",{value:!0});var d=l(i),h=l(s),u=l(n),p=function(e){function i(t){a(this,i);var s=r(this,e.call(this,t));return s.eventHandler_=new o.EventHandler,s}return c(i,e),i.prototype.detached=function(){e.prototype.detached.call(this),this.eventHandler_.removeAllListeners(),clearTimeout(this.delay_)},i.prototype.close=function(){d["default"].once(this.element,"animationend",this.dispose.bind(this)),d["default"].once(this.element,"transitionend",this.dispose.bind(this)),this.eventHandler_.removeAllListeners(),this.syncVisible(!1)},i.prototype.handleDocClick_=function(e){this.element.contains(e.target)||this.hide()},i.prototype.hide=function(){this.visible=!1},i.prototype.toggle=function(){this.visible=!this.visible},i.prototype.show=function(){this.visible=!0},i.prototype.syncDismissible=function(e){e?this.eventHandler_.add(d["default"].on(document,"click",this.handleDocClick_.bind(this))):this.eventHandler_.removeAllListeners(),d["default"][e?"addClasses":"removeClasses"](this.element,"alert-dismissible")},i.prototype.syncVisible=function(e){d["default"].removeClasses(this.element,this.animClasses[e?"hide":"show"]),d["default"].addClasses(this.element,this.animClasses[e?"show":"hide"]),u["default"].emulateEnd(this.element),e&&t.core.isNumber(this.hideDelay)&&this.syncHideDelay(this.hideDelay)},i.prototype.syncHideDelay=function(e){t.core.isNumber(e)&&this.visible&&(clearTimeout(this.delay_),this.delay_=setTimeout(this.hide.bind(this),e))},i}(h["default"]);p.prototype.registerMetalComponent&&p.prototype.registerMetalComponent(p,"Alert"),p.ELEMENT_CLASSES="alert",p.ATTRS={animClasses:{validator:t.core.isObject,value:{show:"fade in",hide:"fade"}},body:{value:""},dismissible:{validator:t.core.isBoolean,value:!0},elementClasses:{value:"alert-success"},hideDelay:{},spinner:{value:!1},spinnerClasses:{},spinnerDone:{value:!1},visible:{value:!1}},e["default"]=p});