{"version":3,"sources":["Anim.js"],"names":["Anim","emulateEnd","element","opt_durationMs","getComputedDurationMs","emulateEnd_","emulateAnimationEnd","emulateTransitionEnd","type","duration","isDef","delayed","setTimeout","triggerEvent","checkAnimationEventName","abort","clearTimeout","hoistedEvtHandler","removeListener","once","parseFloat","window","getComputedStyle","getPropertyValue"],"mappings":";AAAA;;;;;;;;;;;;;;;;;;;;KAKMA,I;;;;;OASEC,U,uBAAWC,O,EAASC,c,EAAgB;AAC1C,OAAI,KAAKC,qBAAL,CAA2BF,OAA3B,EAAoC,WAApC,IAAmD,KAAKE,qBAAL,CAA2BF,OAA3B,EAAoC,YAApC,CAAvD,EAA0G;AACzG,WAAO,KAAKG,WAAL,CAAiBH,OAAjB,EAA0B,WAA1B,EAAuCC,cAAvC,CAAP;AACA,IAFD,MAEO;AACN,WAAO,KAAKE,WAAL,CAAiBH,OAAjB,EAA0B,YAA1B,EAAwCC,cAAxC,CAAP;AACA;AACD,G;;OASMG,mB,gCAAoBJ,O,EAASC,c,EAAgB;AACnD,UAAO,KAAKE,WAAL,CAAiBH,OAAjB,EAA0B,WAA1B,EAAuCC,cAAvC,CAAP;AACA,G;;OASMI,oB,iCAAqBL,O,EAASC,c,EAAgB;AACpD,QAAKE,WAAL,CAAiBH,OAAjB,EAA0B,YAA1B,EAAwCC,cAAxC;AACA,G;;OAUME,W,wBAAYH,O,EAASM,I,EAAML,c,EAAgB;AACjD,OAAIM,WAAWN,cAAf;AACA,OAAI,CAAC,gBAAKO,KAAL,CAAWP,cAAX,CAAL,EAAiC;AAChCM,eAAW,KAAKL,qBAAL,CAA2BF,OAA3B,EAAoCM,IAApC,CAAX;AACA;;AAED,OAAIG,UAAUC,WAAW,YAAW;AACnC,aAAIC,YAAJ,CAAiBX,OAAjB,EAA0B,cAASY,uBAAT,GAAmCN,IAAnC,CAA1B;AACA,IAFa,EAEXC,QAFW,CAAd;;AAIA,OAAIM,QAAQ,SAARA,KAAQ,GAAW;AACtBC,iBAAaL,OAAb;AACAM,sBAAkBC,cAAlB;AACA,IAHD;AAIA,OAAID,oBAAoB,SAAIE,IAAJ,CAASjB,OAAT,EAAkBM,OAAO,KAAzB,EAAgCO,KAAhC,CAAxB;;AAEA,UAAO;AACNA,WAAOA;AADD,IAAP;AAGA,G;;OAQMX,qB,kCAAsBF,O,EAASM,I,EAAM;AAC3C,UAAO,CAACY,WAAWC,OAAOC,gBAAP,CAAwBpB,OAAxB,EAAiC,IAAjC,EAAuCqB,gBAAvC,CAAwDf,OAAO,WAA/D,CAAX,KAA2F,CAA5F,IAAiG,IAAxG;AACA,G;;;;;mBAGaR,I","file":"node_modules/metal-anim/src/Anim.js","sourcesContent":["'use strict';\n\nimport core from 'metal';\nimport { dom, features } from 'metal-dom';\n\nclass Anim {\n\t/**\n\t * Emulates animation or transition end event, the end event with longer\n\t * duration will be used by the emulation. If they have the same value,\n\t * transitionend will be emulated.\n\t * @param {!Element} element\n\t * @param {number=} opt_durationMs\n\t * @return {!Object} Object containing `abort` function.\n\t */\n\tstatic emulateEnd(element, opt_durationMs) {\n\t\tif (this.getComputedDurationMs(element, 'animation') > this.getComputedDurationMs(element, 'transition')) {\n\t\t\treturn this.emulateEnd_(element, 'animation', opt_durationMs);\n\t\t} else {\n\t\t\treturn this.emulateEnd_(element, 'transition', opt_durationMs);\n\t\t}\n\t}\n\n\t/**\n\t * Emulates animation end event. If `opt_durationMs` not specified the value\n\t * will read from computed style for animation-duration.\n\t * @param {!Element} element\n\t * @param {number=} opt_durationMs\n\t * @return {!Object} Object containing `abort` function.\n\t */\n\tstatic emulateAnimationEnd(element, opt_durationMs) {\n\t\treturn this.emulateEnd_(element, 'animation', opt_durationMs);\n\t}\n\n\t/**\n\t * Emulates transition end event. If `opt_durationMs` not specified the\n\t * value will read from computed style for transition-duration.\n\t * @param {!Element} element\n\t * @param {number=} opt_durationMs\n\t * @return {!Object} Object containing `abort` function.\n\t */\n\tstatic emulateTransitionEnd(element, opt_durationMs) {\n\t\tthis.emulateEnd_(element, 'transition', opt_durationMs);\n\t}\n\n\t/**\n\t * Emulates transition or animation end.\n\t * @param {!Element} element\n\t * @param {string} type\n\t * @param {number=} opt_durationMs\n\t * @return {!Object} Object containing `abort` function.\n\t * @protected\n\t */\n\tstatic emulateEnd_(element, type, opt_durationMs) {\n\t\tvar duration = opt_durationMs;\n\t\tif (!core.isDef(opt_durationMs)) {\n\t\t\tduration = this.getComputedDurationMs(element, type);\n\t\t}\n\n\t\tvar delayed = setTimeout(function() {\n\t\t\tdom.triggerEvent(element, features.checkAnimationEventName()[type]);\n\t\t}, duration);\n\n\t\tvar abort = function() {\n\t\t\tclearTimeout(delayed);\n\t\t\thoistedEvtHandler.removeListener();\n\t\t};\n\t\tvar hoistedEvtHandler = dom.once(element, type + 'end', abort);\n\n\t\treturn {\n\t\t\tabort: abort\n\t\t};\n\t}\n\n\t/**\n\t * Gets computed style duration for duration.\n\t * @param {!Element} element\n\t * @param {string} type\n\t * @return {number} The computed duration in milliseconds.\n\t */\n\tstatic getComputedDurationMs(element, type) {\n\t\treturn (parseFloat(window.getComputedStyle(element, null).getPropertyValue(type + '-duration')) || 0) * 1000;\n\t}\n}\n\nexport default Anim;\n"],"sourceRoot":"/source/"}